(()=>{var e={};e.id=1887,e.ids=[1887],e.modules={2643:(e,t,s)=>{"use strict";s.d(t,{$:()=>n});var r=s(60687),a=s(43210),i=s(4780);let n=a.forwardRef(({className:e,variant:t="default",size:s="default",...a},n)=>(0,r.jsx)("button",{className:(0,i.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"default"===t,"bg-red-600 text-white hover:bg-red-700":"destructive"===t,"border border-gray-300 bg-white hover:bg-gray-50":"outline"===t,"bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===t,"hover:bg-gray-100":"ghost"===t,"text-blue-600 underline-offset-4 hover:underline":"link"===t},{"h-10 px-4 py-2":"default"===s,"h-9 rounded-md px-3":"sm"===s,"h-11 rounded-md px-8":"lg"===s,"h-10 w-10":"icon"===s},e),ref:n,...a}));n.displayName="Button"},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4780:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(49384),a=s(82348);function i(...e){return(0,a.QP)((0,r.$)(e))}},9362:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},14743:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(60687),a=s(43210),i=s(28749),n=s(2643),l=s(71170),d=s(51907),o=s(84219),c=s(78520),u=s(9362),x=s(49987),m=s(29446),h=s(83435),p=s(53344),f=s(56717),g=s(37775),v=s(16189);function y(){let e=(0,v.useParams)(),t=(0,v.useRouter)(),s=e.id,[y,b]=(0,a.useState)(null),[j,N]=(0,a.useState)([]),[w,k]=(0,a.useState)(0),[q,A]=(0,a.useState)(!0),[_,P]=(0,a.useState)(!1),[C,R]=(0,a.useState)(!1),[S,E]=(0,a.useState)({}),[$,M]=(0,a.useState)(null),[T]=(0,a.useState)(new Date),z=e=>j.find(t=>t.question_id===e),L=(e,t)=>{N(s=>s.find(t=>t.question_id===e)?s.map(s=>s.question_id===e?{...s,value:t}:s):[...s,{question_id:e,value:t}]),S[e]&&E(t=>{let s={...t};return delete s[e],s})},B=e=>{let t=z(e.id);if(e.required&&(!t||!t.value||Array.isArray(t.value)&&0===t.value.length||"string"==typeof t.value&&""===t.value.trim()))return"This question is required";if(t&&e.validation){let s=t.value;if("string"==typeof s){if(e.validation.min_length&&s.length<e.validation.min_length)return`Minimum length is ${e.validation.min_length} characters`;if(e.validation.max_length&&s.length>e.validation.max_length)return`Maximum length is ${e.validation.max_length} characters`;if(e.validation.pattern&&!new RegExp(e.validation.pattern).test(s))return"Invalid format"}if("number"==typeof s){if(e.validation.min_value&&s<e.validation.min_value)return`Minimum value is ${e.validation.min_value}`;if(e.validation.max_value&&s>e.validation.max_value)return`Maximum value is ${e.validation.max_value}`}}return null},F=async()=>{if(!y)return;let e={};if(y.questions.forEach(t=>{let s=B(t);s&&(e[t.id]=s)}),Object.keys(e).length>0){E(e);let t=y.questions.findIndex(t=>e[t.id]);-1!==t&&k(t);return}P(!0);try{await new Promise(e=>setTimeout(e,2e3));let e={questionnaire_id:s,responses:j,submitted_at:new Date().toISOString(),time_taken:Math.floor((new Date().getTime()-T.getTime())/1e3)};console.log("Submitting responses:",e),R(!0)}catch(e){console.error("Error submitting responses:",e)}finally{P(!1)}};if(q)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!y)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(i.Zp,{className:"max-w-md",children:(0,r.jsxs)(i.Wu,{className:"text-center py-12",children:[(0,r.jsx)(c.A,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Questionnaire Not Found"}),(0,r.jsx)("p",{className:"text-gray-600",children:"The questionnaire you're looking for doesn't exist or has been removed."})]})})});if(C)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)(i.Zp,{className:"max-w-md",children:(0,r.jsxs)(i.Wu,{className:"text-center py-12",children:[(0,r.jsx)(u.A,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Thank You!"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Your responses have been submitted successfully. We appreciate your feedback."}),(0,r.jsx)(n.$,{onClick:()=>t.push("/questionnaires"),children:"Back to Questionnaires"})]})})});let Z=y.questions[w],I=(w+1)/y.questions.length*100;return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto px-4",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:y.title}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:y.description})]}),null!==$&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-orange-600",children:[(0,r.jsx)(x.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"font-mono text-lg",children:(e=>{let t=Math.floor(e/60);return`${t}:${(e%60).toString().padStart(2,"0")}`})($)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,r.jsx)(l.E,{variant:"secondary",children:y.category}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(m.A,{className:"h-4 w-4"}),y.target_audience]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),y.questions.length," questions"]})]}),y.settings.show_progress&&(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,r.jsxs)("span",{children:["Question ",w+1," of ",y.questions.length]}),(0,r.jsxs)("span",{children:[Math.round(I),"% complete"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${I}%`}})})]})]}),(0,r.jsxs)(i.Zp,{className:"mb-8",children:[(0,r.jsx)(i.aR,{children:(0,r.jsx)(i.ZB,{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:["Question ",w+1]}),Z.required&&(0,r.jsx)(l.E,{variant:"destructive",className:"text-xs",children:"Required"})]}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:Z.title}),Z.description&&(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:Z.description})]})})}),(0,r.jsx)(i.Wu,{children:(e=>{let t=z(e.id),s=S[e.id];switch(e.type){case"text":case"email":return(0,r.jsxs)("div",{children:[(0,r.jsx)(d.p,{type:e.type,value:t?.value||"",onChange:t=>L(e.id,t.target.value),placeholder:e.placeholder,className:s?"border-red-500":""}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:s})]});case"number":return(0,r.jsxs)("div",{children:[(0,r.jsx)(d.p,{type:"number",value:t?.value||"",onChange:t=>L(e.id,parseFloat(t.target.value)||0),placeholder:e.placeholder,className:s?"border-red-500":""}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:s})]});case"date":return(0,r.jsxs)("div",{children:[(0,r.jsx)(d.p,{type:"date",value:t?.value||"",onChange:t=>L(e.id,t.target.value),className:s?"border-red-500":""}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:s})]});case"textarea":return(0,r.jsxs)("div",{children:[(0,r.jsx)("textarea",{value:t?.value||"",onChange:t=>L(e.id,t.target.value),placeholder:e.placeholder,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${s?"border-red-500":"border-gray-300"}`,rows:4}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:s})]});case"single_choice":return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"space-y-3",children:e.options?.map((s,a)=>(0,r.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:e.id,value:s,checked:t?.value===s,onChange:t=>L(e.id,t.target.value),className:"text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-gray-700",children:s})]},a))}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:s})]});case"multiple_choice":return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"space-y-3",children:e.options?.map((s,a)=>(0,r.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",value:s,checked:(t?.value||[]).includes(s),onChange:r=>{let a=t?.value||[];r.target.checked?L(e.id,[...a,s]):L(e.id,a.filter(e=>e!==s))},className:"rounded text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-gray-700",children:s})]},a))}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:s})]});case"rating":let a=e.min_rating||1,i=e.max_rating||5,n=t?.value||0;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:a}),(0,r.jsx)("div",{className:"flex space-x-1",children:Array.from({length:i-a+1},(t,s)=>{let i=a+s;return(0,r.jsx)("button",{type:"button",onClick:()=>L(e.id,i),className:`p-1 rounded ${n>=i?"text-yellow-400":"text-gray-300 hover:text-yellow-200"}`,children:(0,r.jsx)(o.A,{className:"h-8 w-8 fill-current"})},i)})}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:i})]}),n>0&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["You rated: ",n," out of ",i]}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:s})]});default:return(0,r.jsx)("div",{children:"Unsupported question type"})}})(Z)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)(n.$,{variant:"outline",onClick:()=>{w>0&&k(e=>e-1)},disabled:0===w,children:[(0,r.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Previous"]}),(0,r.jsx)("div",{className:"flex gap-2",children:y.questions.map((e,t)=>(0,r.jsx)("button",{onClick:()=>k(t),className:`w-3 h-3 rounded-full ${t===w?"bg-blue-600":t<w?"bg-green-500":"bg-gray-300"}`},t))}),w===y.questions.length-1?(0,r.jsx)(n.$,{onClick:F,disabled:_,children:_?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Submit"]})}):(0,r.jsxs)(n.$,{onClick:()=>{if(!y)return;let e=y.questions[w],t=B(e);if(t)return void E(s=>({...s,[e.id]:t}));w<y.questions.length-1&&k(e=>e+1)},children:["Next",(0,r.jsx)(g.A,{className:"h-4 w-4 ml-2"})]})]})]})})}},16189:(e,t,s)=>{"use strict";var r=s(65773);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28749:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>l});var r=s(60687),a=s(43210),i=s(4780);let n=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm",e),...t}));n.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-gray-500",e),...t}));o.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29446:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},33873:e=>{"use strict";e.exports=require("path")},37775:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},38295:(e,t,s)=>{Promise.resolve().then(s.bind(s,14743))},43871:(e,t,s)=>{Promise.resolve().then(s.bind(s,78549))},49987:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},51907:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var r=s(60687),a=s(43210),i=s(4780);let n=a.forwardRef(({className:e,type:t,...s},a)=>(0,r.jsx)("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));n.displayName="Input"},53344:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},55591:e=>{"use strict";e.exports=require("https")},56717:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]])},56923:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o});var r=s(65239),a=s(48088),i=s(88170),n=s.n(i),l=s(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o={children:["",{children:["questionnaires",{children:["respond",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,78549)),"/home/ubuntu/ETLA-Platform/frontend/src/app/questionnaires/respond/[id]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/home/ubuntu/ETLA-Platform/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/home/ubuntu/ETLA-Platform/frontend/src/app/questionnaires/respond/[id]/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/questionnaires/respond/[id]/page",pathname:"/questionnaires/respond/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71170:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var r=s(60687),a=s(43210),i=s(4780);let n=a.forwardRef(({className:e,variant:t="default",...s},a)=>(0,r.jsx)("div",{ref:a,className:(0,i.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",{"border-transparent bg-blue-600 text-white hover:bg-blue-700":"default"===t,"border-transparent bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===t,"border-transparent bg-red-600 text-white hover:bg-red-700":"destructive"===t,"text-gray-950 border-gray-200 bg-white hover:bg-gray-50":"outline"===t},e),...s}));n.displayName="Badge"},74075:e=>{"use strict";e.exports=require("zlib")},78520:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},78549:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/ubuntu/ETLA-Platform/frontend/src/app/questionnaires/respond/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/ETLA-Platform/frontend/src/app/questionnaires/respond/[id]/page.tsx","default")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83435:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},84219:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4447,197,1147,897],()=>s(56923));module.exports=r})();