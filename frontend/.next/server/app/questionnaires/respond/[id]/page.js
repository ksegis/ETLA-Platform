(()=>{var e={};e.id=1887,e.ids=[1887],e.modules={2643:(e,t,s)=>{"use strict";s.d(t,{$:()=>a});var r=s(60687),i=s(43210),n=s(4780);let a=i.forwardRef(({className:e,variant:t="default",size:s="default",...i},a)=>(0,r.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"default"===t,"bg-red-600 text-white hover:bg-red-700":"destructive"===t,"border border-gray-300 bg-white hover:bg-gray-50":"outline"===t,"bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===t,"hover:bg-gray-100":"ghost"===t,"text-blue-600 underline-offset-4 hover:underline":"link"===t},{"h-10 px-4 py-2":"default"===s,"h-9 rounded-md px-3":"sm"===s,"h-11 rounded-md px-8":"lg"===s,"h-10 w-10":"icon"===s},e),ref:a,...i}));a.displayName="Button"},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},14743:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(60687),i=s(43210),n=s(28749),a=s(2643),l=s(71170),d=s(51907),o=s(60149),c=s(84219),u=s(78520),x=s(9362),m=s(49987),h=s(29446),p=s(83435),f=s(53344),g=s(56717),b=s(37775),v=s(16189);function y(){let e=(0,v.useParams)(),t=(0,v.useRouter)(),s=e.id,[y,j]=(0,i.useState)(null),[N,w]=(0,i.useState)([]),[q,_]=(0,i.useState)(0),[k,A]=(0,i.useState)(!0),[P,C]=(0,i.useState)(!1),[S,E]=(0,i.useState)(!1),[$,M]=(0,i.useState)({}),[T,R]=(0,i.useState)(null),[L]=(0,i.useState)(new Date),z=e=>N.find(t=>t.question_id===e),I=(e,t)=>{w(s=>s.find(t=>t.question_id===e)?s.map(s=>s.question_id===e?{...s,value:t}:s):[...s,{question_id:e,value:t}]),$[e]&&M(t=>{let s={...t};return delete s[e],s})},B=e=>{let t=z(e.id);if(e.required&&(!t||!t.value||Array.isArray(t.value)&&0===t.value.length||"string"==typeof t.value&&""===t.value.trim()))return"This question is required";if(t&&e.validation){let s=t.value;if("string"==typeof s){if(e.validation.min_length&&s.length<e.validation.min_length)return`Minimum length is ${e.validation.min_length} characters`;if(e.validation.max_length&&s.length>e.validation.max_length)return`Maximum length is ${e.validation.max_length} characters`;if(e.validation.pattern&&!new RegExp(e.validation.pattern).test(s))return"Invalid format"}if("number"==typeof s){if(e.validation.min_value&&s<e.validation.min_value)return`Minimum value is ${e.validation.min_value}`;if(e.validation.max_value&&s>e.validation.max_value)return`Maximum value is ${e.validation.max_value}`}}return null},F=async()=>{if(!y)return;let e={};if(y.questions.forEach(t=>{let s=B(t);s&&(e[t.id]=s)}),Object.keys(e).length>0){M(e);let t=y.questions.findIndex(t=>e[t.id]);-1!==t&&_(t);return}C(!0);try{await new Promise(e=>setTimeout(e,2e3));let e={questionnaire_id:s,responses:N,submitted_at:new Date().toISOString(),time_taken:Math.floor((new Date().getTime()-L.getTime())/1e3)};console.log("Submitting responses:",e),E(!0)}catch(e){console.error("Error submitting responses:",e)}finally{C(!1)}};if(k)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!y)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(n.Zp,{className:"max-w-md",children:(0,r.jsxs)(n.Wu,{className:"text-center py-12",children:[(0,r.jsx)(u.A,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Questionnaire Not Found"}),(0,r.jsx)("p",{className:"text-gray-600",children:"The questionnaire you're looking for doesn't exist or has been removed."})]})})});if(S)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)(n.Zp,{className:"max-w-md",children:(0,r.jsxs)(n.Wu,{className:"text-center py-12",children:[(0,r.jsx)(x.A,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Thank You!"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Your responses have been submitted successfully. We appreciate your feedback."}),(0,r.jsx)(a.$,{onClick:()=>t.push("/questionnaires"),children:"Back to Questionnaires"})]})})});let G=y.questions[q],Q=(q+1)/y.questions.length*100;return(0,r.jsx)(o.A,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto px-4",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:y.title}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:y.description})]}),null!==T&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-orange-600",children:[(0,r.jsx)(m.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"font-mono text-lg",children:(e=>{let t=Math.floor(e/60);return`${t}:${(e%60).toString().padStart(2,"0")}`})(T)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,r.jsx)(l.E,{variant:"secondary",children:y.category}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),y.target_audience]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(p.A,{className:"h-4 w-4"}),y.questions.length," questions"]})]}),y.settings.show_progress&&(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,r.jsxs)("span",{children:["Question ",q+1," of ",y.questions.length]}),(0,r.jsxs)("span",{children:[Math.round(Q),"% complete"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Q}%`}})})]})]}),(0,r.jsxs)(n.Zp,{className:"mb-8",children:[(0,r.jsx)(n.aR,{children:(0,r.jsx)(n.ZB,{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:["Question ",q+1]}),G.required&&(0,r.jsx)(l.E,{variant:"destructive",className:"text-xs",children:"Required"})]}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:G.title}),G.description&&(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:G.description})]})})}),(0,r.jsx)(n.Wu,{children:(e=>{let t=z(e.id),s=$[e.id];switch(e.type){case"text":case"email":return(0,r.jsxs)("div",{children:[(0,r.jsx)(d.p,{type:e.type,value:t?.value||"",onChange:t=>I(e.id,t.target.value),placeholder:e.placeholder,className:s?"border-red-500":""}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:s})]});case"number":return(0,r.jsxs)("div",{children:[(0,r.jsx)(d.p,{type:"number",value:t?.value||"",onChange:t=>I(e.id,parseFloat(t.target.value)||0),placeholder:e.placeholder,className:s?"border-red-500":""}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:s})]});case"date":return(0,r.jsxs)("div",{children:[(0,r.jsx)(d.p,{type:"date",value:t?.value||"",onChange:t=>I(e.id,t.target.value),className:s?"border-red-500":""}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:s})]});case"textarea":return(0,r.jsxs)("div",{children:[(0,r.jsx)("textarea",{value:t?.value||"",onChange:t=>I(e.id,t.target.value),placeholder:e.placeholder,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${s?"border-red-500":"border-gray-300"}`,rows:4}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:s})]});case"single_choice":return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"space-y-3",children:e.options?.map((s,i)=>(0,r.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:e.id,value:s,checked:t?.value===s,onChange:t=>I(e.id,t.target.value),className:"text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-gray-700",children:s})]},i))}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:s})]});case"multiple_choice":return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"space-y-3",children:e.options?.map((s,i)=>(0,r.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",value:s,checked:(t?.value||[]).includes(s),onChange:r=>{let i=t?.value||[];r.target.checked?I(e.id,[...i,s]):I(e.id,i.filter(e=>e!==s))},className:"rounded text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-gray-700",children:s})]},i))}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:s})]});case"rating":let i=e.min_rating||1,n=e.max_rating||5,a=t?.value||0;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:i}),(0,r.jsx)("div",{className:"flex space-x-1",children:Array.from({length:n-i+1},(t,s)=>{let n=i+s;return(0,r.jsx)("button",{type:"button",onClick:()=>I(e.id,n),className:`p-1 rounded ${a>=n?"text-yellow-400":"text-gray-300 hover:text-yellow-200"}`,children:(0,r.jsx)(c.A,{className:"h-8 w-8 fill-current"})},n)})}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:n})]}),a>0&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["You rated: ",a," out of ",n]}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:s})]});default:return(0,r.jsx)("div",{children:"Unsupported question type"})}})(G)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)(a.$,{variant:"outline",onClick:()=>{q>0&&_(e=>e-1)},disabled:0===q,children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Previous"]}),(0,r.jsx)("div",{className:"flex gap-2",children:y.questions.map((e,t)=>(0,r.jsx)("button",{onClick:()=>_(t),className:`w-3 h-3 rounded-full ${t===q?"bg-blue-600":t<q?"bg-green-500":"bg-gray-300"}`},t))}),q===y.questions.length-1?(0,r.jsx)(a.$,{onClick:F,disabled:P,children:P?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Submit"]})}):(0,r.jsxs)(a.$,{onClick:()=>{if(!y)return;let e=y.questions[q],t=B(e);if(t)return void M(s=>({...s,[e.id]:t}));q<y.questions.length-1&&_(e=>e+1)},children:["Next",(0,r.jsx)(b.A,{className:"h-4 w-4 ml-2"})]})]})]})})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37775:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},38295:(e,t,s)=>{Promise.resolve().then(s.bind(s,14743))},43871:(e,t,s)=>{Promise.resolve().then(s.bind(s,78549))},49987:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},51907:(e,t,s)=>{"use strict";s.d(t,{p:()=>a});var r=s(60687),i=s(43210),n=s(4780);let a=i.forwardRef(({className:e,type:t,...s},i)=>(0,r.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...s}));a.displayName="Input"},53344:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},55591:e=>{"use strict";e.exports=require("https")},56717:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]])},56923:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o});var r=s(65239),i=s(48088),n=s(88170),a=s.n(n),l=s(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o={children:["",{children:["questionnaires",{children:["respond",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,78549)),"/home/ubuntu/ETLA-Platform/frontend/src/app/questionnaires/respond/[id]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/home/ubuntu/ETLA-Platform/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/home/ubuntu/ETLA-Platform/frontend/src/app/questionnaires/respond/[id]/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/questionnaires/respond/[id]/page",pathname:"/questionnaires/respond/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71170:(e,t,s)=>{"use strict";s.d(t,{E:()=>a});var r=s(60687),i=s(43210),n=s(4780);let a=i.forwardRef(({className:e,variant:t="default",...s},i)=>(0,r.jsx)("div",{ref:i,className:(0,n.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",{"border-transparent bg-blue-600 text-white hover:bg-blue-700":"default"===t,"border-transparent bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===t,"border-transparent bg-red-600 text-white hover:bg-red-700":"destructive"===t,"text-gray-950 border-gray-200 bg-white hover:bg-gray-50":"outline"===t},e),...s}));a.displayName="Badge"},74075:e=>{"use strict";e.exports=require("zlib")},78520:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},78549:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/ubuntu/ETLA-Platform/frontend/src/app/questionnaires/respond/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/ETLA-Platform/frontend/src/app/questionnaires/respond/[id]/page.tsx","default")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},84219:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19377).A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4447,197,1147,3626,897,2001],()=>s(56923));module.exports=r})();