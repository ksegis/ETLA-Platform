(()=>{var e={};e.id=937,e.ids=[937],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9235:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});let n=(0,l(19377).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},10041:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});let n=(0,l(19377).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},12041:(e,t,l)=>{Promise.resolve().then(l.bind(l,27843))},16073:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});let n=(0,l(19377).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},16189:(e,t,l)=>{"use strict";var n=l(65773);l.o(n,"usePathname")&&l.d(t,{usePathname:function(){return n.usePathname}}),l.o(n,"useRouter")&&l.d(t,{useRouter:function(){return n.useRouter}}),l.o(n,"useSearchParams")&&l.d(t,{useSearchParams:function(){return n.useSearchParams}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19377:(e,t,l)=>{"use strict";l.d(t,{A:()=>i});var n=l(43210),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var i=(e,t)=>{let l=(0,n.forwardRef)(({color:l="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,children:u,...d},g)=>(0,n.createElement)("svg",{ref:g,...r,width:i,height:i,stroke:l,strokeWidth:a?24*Number(s)/Number(i):s,className:`lucide lucide-${o(e)}`,...d},[...t.map(([e,t])=>(0,n.createElement)(e,t)),...(Array.isArray(u)?u:[u])||[]]));return l.displayName=`${e}`,l}},27529:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});let n=(0,l(19377).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},27843:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>eb});var n=l(60687),r=l(43210),o=l.n(r),i=l(51635),s=l(16189);function a({children:e,fallback:t,redirectTo:l="/dashboard"}){(0,s.usePathname)();let o=(0,s.useRouter)(),{hasPermission:a,isAdmin:u,isHostAdmin:d,isLoading:g,isAuthenticated:c,currentRole:m}=(0,i.Sk)(),[p,f]=(0,r.useState)(null),[h,x]=(0,r.useState)("");return g||null===p?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Checking permissions..."})]})}):p?(0,n.jsx)(n.Fragment,{children:e}):t?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsx)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD12"}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:h}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("button",{onClick:()=>o.push(l),className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Go to Dashboard"}),(0,n.jsx)("button",{onClick:()=>o.back(),className:"w-full bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Go Back"})]}),!1]})})})}l(50251),i.Gv.PROJECT_MANAGEMENT,i.Jj.VIEW,i.Gv.PROJECT_MANAGEMENT,i.Jj.CREATE,i.Gv.WORK_REQUESTS,i.Jj.VIEW,i.Gv.WORK_REQUESTS,i.Jj.CREATE,i.Gv.PROJECT_CHARTER,i.Jj.VIEW,i.Gv.PROJECT_CHARTER,i.Jj.CREATE,i.Gv.RISK_MANAGEMENT,i.Jj.VIEW,i.Gv.RESOURCE_MANAGEMENT,i.Jj.VIEW,i.Gv.WORK_REQUESTS,i.Jj.VIEW,i.Gv.WORK_REQUESTS,i.Jj.CREATE,i.Gv.ACCESS_CONTROL,i.Jj.VIEW,i.Gv.USER_MANAGEMENT,i.Jj.VIEW,i.Gv.TENANT_MANAGEMENT,i.Jj.VIEW,i.Gv.SYSTEM_SETTINGS,i.Jj.VIEW,i.Gv.AUDIT_LOGS,i.Jj.VIEW,i.Gv.REPORTING,i.Jj.VIEW,i.Gv.DASHBOARDS,i.Jj.VIEW,i.Gv.ANALYTICS,i.Jj.VIEW,i.Gv.MIGRATION_WORKBENCH,i.Jj.VIEW,i.Gv.FILE_UPLOAD,i.Jj.CREATE,i.Gv.DATA_VALIDATION,i.Jj.VIEW,i.Gv.BENEFITS_MANAGEMENT,i.Jj.VIEW,i.Gv.PAYROLL_PROCESSING,i.Jj.VIEW,i.Gv.EMPLOYEE_RECORDS,i.Jj.VIEW;var u=l(9235),d=l(10041),g=l(30983);function c({tenants:e,selectedTenant:t,onTenantChange:l,searchTerm:r,onSearchChange:i,loading:s=!1}){let[a,c]=o().useState(!1);return(0,n.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("button",{onClick:()=>c(!a),disabled:s,className:"flex items-center space-x-2 px-4 py-2 bg-gray-50 border border-gray-300 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50",children:[(0,n.jsx)(u.A,{className:"h-4 w-4 text-gray-500"}),(0,n.jsx)("span",{className:"text-sm font-medium text-gray-900",children:t?t.name:"Select Tenant"}),(0,n.jsx)(d.A,{className:"h-4 w-4 text-gray-500"})]}),a&&(0,n.jsx)("div",{className:"absolute top-full left-0 mt-1 w-64 bg-white border border-gray-200 rounded-md shadow-lg z-50",children:(0,n.jsx)("div",{className:"max-h-60 overflow-y-auto",children:0===e.length?(0,n.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500",children:"No tenants available"}):e.map(e=>(0,n.jsx)("button",{onClick:()=>{l(e),c(!1)},className:`w-full text-left px-4 py-3 text-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50 ${t?.id===e.id?"bg-blue-50 text-blue-700 font-medium":"text-gray-900"}`,children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(u.A,{className:"h-4 w-4 text-gray-400"}),(0,n.jsx)("span",{children:e.name})]})},e.id))})})]}),t&&(0,n.jsxs)("div",{className:"text-sm text-gray-500",children:["Managing access for ",(0,n.jsx)("span",{className:"font-medium",children:t.name})]})]}),(0,n.jsx)("div",{className:"flex items-center space-x-4",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(g.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,n.jsx)("input",{type:"text",placeholder:"Search users...",value:r,onChange:e=>i(e.target.value),className:"pl-10 pr-4 py-2 w-64 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})})]}),a&&(0,n.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)})]})}var m=l(16073),p=l(62420);function f({activeEntity:e,onEntityChange:t,userCount:l,roleCount:r}){return(0,n.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsxs)("button",{onClick:()=>t("users"),className:`flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${"users"===e?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[(0,n.jsx)(m.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Users"}),void 0!==l&&(0,n.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs ${"users"===e?"bg-blue-200 text-blue-800":"bg-gray-200 text-gray-600"}`,children:l})]}),(0,n.jsxs)("button",{onClick:()=>t("roles"),className:`flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${"roles"===e?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[(0,n.jsx)(p.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Roles"}),void 0!==r&&(0,n.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs ${"roles"===e?"bg-blue-200 text-blue-800":"bg-gray-200 text-gray-600"}`,children:r})]})]})})}function h(e,t){return"function"==typeof e?e(t):e}function x(e,t){return l=>{t.setState(t=>({...t,[e]:h(l,t[e])}))}}function v(e){return e instanceof Function}function b(e,t,l){let n,r=[];return o=>{let i,s;l.key&&l.debug&&(i=Date.now());let a=e(o);if(!(a.length!==r.length||a.some((e,t)=>r[t]!==e)))return n;if(r=a,l.key&&l.debug&&(s=Date.now()),n=t(...a),null==l||null==l.onChange||l.onChange(n),l.key&&l.debug&&null!=l&&l.debug()){let e=Math.round((Date.now()-i)*100)/100,t=Math.round((Date.now()-s)*100)/100,n=t/16,r=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%câ± ${r(t,5)} /${r(e,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*n,120))}deg 100% 31%);`,null==l?void 0:l.key)}return n}}function w(e,t,l,n){return{debug:()=>{var l;return null!=(l=null==e?void 0:e.debugAll)?l:e[t]},key:!1,onChange:n}}let C="debugHeaders";function y(e,t,l){var n;let r={id:null!=(n=l.id)?n:t.id,column:t,index:l.index,isPlaceholder:!!l.isPlaceholder,placeholderId:l.placeholderId,depth:l.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let e=[],t=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(t),e.push(l)};return t(r),e},getContext:()=>({table:e,header:r,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(r,e)}),r}function S(e,t,l,n){var r,o;let i=0,s=function(e,t){void 0===t&&(t=1),i=Math.max(i,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var l;null!=(l=e.columns)&&l.length&&s(e.columns,t+1)},0)};s(e);let a=[],u=(e,t)=>{let r={depth:t,id:[n,`${t}`].filter(Boolean).join("_"),headers:[]},o=[];e.forEach(e=>{let i,s=[...o].reverse()[0],a=e.column.depth===r.depth,u=!1;if(a&&e.column.parent?i=e.column.parent:(i=e.column,u=!0),s&&(null==s?void 0:s.column)===i)s.subHeaders.push(e);else{let r=y(l,i,{id:[n,t,i.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:u,placeholderId:u?`${o.filter(e=>e.column===i).length}`:void 0,depth:t,index:o.length});r.subHeaders.push(e),o.push(r)}r.headers.push(e),e.headerGroup=r}),a.push(r),t>0&&u(o,t-1)};u(t.map((e,t)=>y(l,e,{depth:i,index:t})),i-1),a.reverse();let d=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,l=0,n=[0];return e.subHeaders&&e.subHeaders.length?(n=[],d(e.subHeaders).forEach(e=>{let{colSpan:l,rowSpan:r}=e;t+=l,n.push(r)})):t=1,l+=Math.min(...n),e.colSpan=t,e.rowSpan=l,{colSpan:t,rowSpan:l}});return d(null!=(r=null==(o=a[0])?void 0:o.headers)?r:[]),a}let R=(e,t,l,n,r,o,i)=>{let s={id:t,index:n,original:l,depth:r,parentId:i,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(s._valuesCache.hasOwnProperty(t))return s._valuesCache[t];let l=e.getColumn(t);if(null!=l&&l.accessorFn)return s._valuesCache[t]=l.accessorFn(s.original,n),s._valuesCache[t]},getUniqueValues:t=>{if(s._uniqueValuesCache.hasOwnProperty(t))return s._uniqueValuesCache[t];let l=e.getColumn(t);if(null!=l&&l.accessorFn)return l.columnDef.getUniqueValues?s._uniqueValuesCache[t]=l.columnDef.getUniqueValues(s.original,n):s._uniqueValuesCache[t]=[s.getValue(t)],s._uniqueValuesCache[t]},renderValue:t=>{var l;return null!=(l=s.getValue(t))?l:e.options.renderFallbackValue},subRows:null!=o?o:[],getLeafRows:()=>(function(e,t){let l=[],n=e=>{e.forEach(e=>{l.push(e);let r=t(e);null!=r&&r.length&&n(r)})};return n(e),l})(s.subRows,e=>e.subRows),getParentRow:()=>s.parentId?e.getRow(s.parentId,!0):void 0,getParentRows:()=>{let e=[],t=s;for(;;){let l=t.getParentRow();if(!l)break;e.push(l),t=l}return e.reverse()},getAllCells:b(()=>[e.getAllLeafColumns()],t=>t.map(t=>(function(e,t,l,n){let r={id:`${t.id}_${l.id}`,row:t,column:l,getValue:()=>t.getValue(n),renderValue:()=>{var t;return null!=(t=r.getValue())?t:e.options.renderFallbackValue},getContext:b(()=>[e,l,t,r],(e,t,l,n)=>({table:e,column:t,row:l,cell:n,getValue:n.getValue,renderValue:n.renderValue}),w(e.options,"debugCells","cell.getContext"))};return e._features.forEach(n=>{null==n.createCell||n.createCell(r,l,t,e)},{}),r})(e,s,t,t.id)),w(e.options,"debugRows","getAllCells")),_getAllCellsByColumnId:b(()=>[s.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),w(e.options,"debugRows","getAllCellsByColumnId"))};for(let t=0;t<e._features.length;t++){let l=e._features[t];null==l||null==l.createRow||l.createRow(s,e)}return s},j=(e,t,l)=>{var n,r;let o=null==l||null==(n=l.toString())?void 0:n.toLowerCase();return!!(null==(r=e.getValue(t))||null==(r=r.toString())||null==(r=r.toLowerCase())?void 0:r.includes(o))};j.autoRemove=e=>G(e);let _=(e,t,l)=>{var n;return!!(null==(n=e.getValue(t))||null==(n=n.toString())?void 0:n.includes(l))};_.autoRemove=e=>G(e);let F=(e,t,l)=>{var n;return(null==(n=e.getValue(t))||null==(n=n.toString())?void 0:n.toLowerCase())===(null==l?void 0:l.toLowerCase())};F.autoRemove=e=>G(e);let N=(e,t,l)=>{var n;return null==(n=e.getValue(t))?void 0:n.includes(l)};N.autoRemove=e=>G(e);let M=(e,t,l)=>!l.some(l=>{var n;return!(null!=(n=e.getValue(t))&&n.includes(l))});M.autoRemove=e=>G(e)||!(null!=e&&e.length);let I=(e,t,l)=>l.some(l=>{var n;return null==(n=e.getValue(t))?void 0:n.includes(l)});I.autoRemove=e=>G(e)||!(null!=e&&e.length);let A=(e,t,l)=>e.getValue(t)===l;A.autoRemove=e=>G(e);let E=(e,t,l)=>e.getValue(t)==l;E.autoRemove=e=>G(e);let P=(e,t,l)=>{let[n,r]=l,o=e.getValue(t);return o>=n&&o<=r};P.resolveFilterValue=e=>{let[t,l]=e,n="number"!=typeof t?parseFloat(t):t,r="number"!=typeof l?parseFloat(l):l,o=null===t||Number.isNaN(n)?-1/0:n,i=null===l||Number.isNaN(r)?1/0:r;if(o>i){let e=o;o=i,i=e}return[o,i]},P.autoRemove=e=>G(e)||G(e[0])&&G(e[1]);let V={includesString:j,includesStringSensitive:_,equalsString:F,arrIncludes:N,arrIncludesAll:M,arrIncludesSome:I,equals:A,weakEquals:E,inNumberRange:P};function G(e){return null==e||""===e}function k(e,t,l){return!!e&&!!e.autoRemove&&e.autoRemove(t,l)||void 0===t||"string"==typeof t&&!t}let L={sum:(e,t,l)=>l.reduce((t,l)=>{let n=l.getValue(e);return t+("number"==typeof n?n:0)},0),min:(e,t,l)=>{let n;return l.forEach(t=>{let l=t.getValue(e);null!=l&&(n>l||void 0===n&&l>=l)&&(n=l)}),n},max:(e,t,l)=>{let n;return l.forEach(t=>{let l=t.getValue(e);null!=l&&(n<l||void 0===n&&l>=l)&&(n=l)}),n},extent:(e,t,l)=>{let n,r;return l.forEach(t=>{let l=t.getValue(e);null!=l&&(void 0===n?l>=l&&(n=r=l):(n>l&&(n=l),r<l&&(r=l)))}),[n,r]},mean:(e,t)=>{let l=0,n=0;if(t.forEach(t=>{let r=t.getValue(e);null!=r&&(r*=1)>=r&&(++l,n+=r)}),l)return n/l},median:(e,t)=>{if(!t.length)return;let l=t.map(t=>t.getValue(e));if(!function(e){return Array.isArray(e)&&e.every(e=>"number"==typeof e)}(l))return;if(1===l.length)return l[0];let n=Math.floor(l.length/2),r=l.sort((e,t)=>e-t);return l.length%2!=0?r[n]:(r[n-1]+r[n])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},D=()=>({left:[],right:[]}),z={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},O=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),H=null;function T(e){return"touchstart"===e.type}function q(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}let $=()=>({pageIndex:0,pageSize:10}),B=()=>({top:[],bottom:[]}),U=(e,t,l,n,r)=>{var o;let i=r.getRow(t,!0);l?(i.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),i.getCanSelect()&&(e[t]=!0)):delete e[t],n&&null!=(o=i.subRows)&&o.length&&i.getCanSelectSubRows()&&i.subRows.forEach(t=>U(e,t.id,l,n,r))};function J(e,t){let l=e.getState().rowSelection,n=[],r={},o=function(e,t){return e.map(e=>{var t;let i=W(e,l);if(i&&(n.push(e),r[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:o(e.subRows)}),i)return e}).filter(Boolean)};return{rows:o(t.rows),flatRows:n,rowsById:r}}function W(e,t){var l;return null!=(l=t[e.id])&&l}function K(e,t,l){var n;if(!(null!=(n=e.subRows)&&n.length))return!1;let r=!0,o=!1;return e.subRows.forEach(e=>{if((!o||r)&&(e.getCanSelect()&&(W(e,t)?o=!0:r=!1),e.subRows&&e.subRows.length)){let l=K(e,t);"all"===l?o=!0:("some"===l&&(o=!0),r=!1)}}),r?"all":!!o&&"some"}let X=/([0-9]+)/gm;function Q(e,t){return e===t?0:e>t?1:-1}function Y(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function Z(e,t){let l=e.split(X).filter(Boolean),n=t.split(X).filter(Boolean);for(;l.length&&n.length;){let e=l.shift(),t=n.shift(),r=parseInt(e,10),o=parseInt(t,10),i=[r,o].sort();if(isNaN(i[0])){if(e>t)return 1;if(t>e)return -1;continue}if(isNaN(i[1]))return isNaN(r)?-1:1;if(r>o)return 1;if(o>r)return -1}return l.length-n.length}let ee={alphanumeric:(e,t,l)=>Z(Y(e.getValue(l)).toLowerCase(),Y(t.getValue(l)).toLowerCase()),alphanumericCaseSensitive:(e,t,l)=>Z(Y(e.getValue(l)),Y(t.getValue(l))),text:(e,t,l)=>Q(Y(e.getValue(l)).toLowerCase(),Y(t.getValue(l)).toLowerCase()),textCaseSensitive:(e,t,l)=>Q(Y(e.getValue(l)),Y(t.getValue(l))),datetime:(e,t,l)=>{let n=e.getValue(l),r=t.getValue(l);return n>r?1:n<r?-1:0},basic:(e,t,l)=>Q(e.getValue(l),t.getValue(l))},et=[{createTable:e=>{e.getHeaderGroups=b(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,l,n,r)=>{var o,i;let s=null!=(o=null==n?void 0:n.map(e=>l.find(t=>t.id===e)).filter(Boolean))?o:[],a=null!=(i=null==r?void 0:r.map(e=>l.find(t=>t.id===e)).filter(Boolean))?i:[];return S(t,[...s,...l.filter(e=>!(null!=n&&n.includes(e.id))&&!(null!=r&&r.includes(e.id))),...a],e)},w(e.options,C,"getHeaderGroups")),e.getCenterHeaderGroups=b(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,l,n,r)=>S(t,l=l.filter(e=>!(null!=n&&n.includes(e.id))&&!(null!=r&&r.includes(e.id))),e,"center"),w(e.options,C,"getCenterHeaderGroups")),e.getLeftHeaderGroups=b(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,l,n)=>{var r;return S(t,null!=(r=null==n?void 0:n.map(e=>l.find(t=>t.id===e)).filter(Boolean))?r:[],e,"left")},w(e.options,C,"getLeftHeaderGroups")),e.getRightHeaderGroups=b(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,l,n)=>{var r;return S(t,null!=(r=null==n?void 0:n.map(e=>l.find(t=>t.id===e)).filter(Boolean))?r:[],e,"right")},w(e.options,C,"getRightHeaderGroups")),e.getFooterGroups=b(()=>[e.getHeaderGroups()],e=>[...e].reverse(),w(e.options,C,"getFooterGroups")),e.getLeftFooterGroups=b(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),w(e.options,C,"getLeftFooterGroups")),e.getCenterFooterGroups=b(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),w(e.options,C,"getCenterFooterGroups")),e.getRightFooterGroups=b(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),w(e.options,C,"getRightFooterGroups")),e.getFlatHeaders=b(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),w(e.options,C,"getFlatHeaders")),e.getLeftFlatHeaders=b(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),w(e.options,C,"getLeftFlatHeaders")),e.getCenterFlatHeaders=b(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),w(e.options,C,"getCenterFlatHeaders")),e.getRightFlatHeaders=b(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),w(e.options,C,"getRightFlatHeaders")),e.getCenterLeafHeaders=b(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),w(e.options,C,"getCenterLeafHeaders")),e.getLeftLeafHeaders=b(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),w(e.options,C,"getLeftLeafHeaders")),e.getRightLeafHeaders=b(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),w(e.options,C,"getRightLeafHeaders")),e.getLeafHeaders=b(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,l)=>{var n,r,o,i,s,a;return[...null!=(n=null==(r=e[0])?void 0:r.headers)?n:[],...null!=(o=null==(i=t[0])?void 0:i.headers)?o:[],...null!=(s=null==(a=l[0])?void 0:a.headers)?s:[]].map(e=>e.getLeafHeaders()).flat()},w(e.options,C,"getLeafHeaders"))}},{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:x("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=l=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=l?l:!e.getIsVisible()}))},e.getIsVisible=()=>{var l,n;let r=e.columns;return null==(l=r.length?r.some(e=>e.getIsVisible()):null==(n=t.getState().columnVisibility)?void 0:n[e.id])||l},e.getCanHide=()=>{var l,n;return(null==(l=e.columnDef.enableHiding)||l)&&(null==(n=t.options.enableHiding)||n)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=b(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),w(t.options,"debugRows","_getAllVisibleCells")),e.getVisibleCells=b(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,l)=>[...e,...t,...l],w(t.options,"debugRows","getVisibleCells"))},createTable:e=>{let t=(t,l)=>b(()=>[l(),l().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),w(e.options,"debugColumns",t));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var l;e.setColumnVisibility(t?{}:null!=(l=e.initialState.columnVisibility)?l:{})},e.toggleAllColumnsVisible=t=>{var l;t=null!=(l=t)?l:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,l)=>({...e,[l.id]:t||!(null!=l.getCanHide&&l.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var l;e.toggleAllColumnsVisible(null==(l=t.target)?void 0:l.checked)}}},{getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:x("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=b(e=>[q(t,e)],t=>t.findIndex(t=>t.id===e.id),w(t.options,"debugColumns","getIndex")),e.getIsFirstColumn=l=>{var n;return(null==(n=q(t,l)[0])?void 0:n.id)===e.id},e.getIsLastColumn=l=>{var n;let r=q(t,l);return(null==(n=r[r.length-1])?void 0:n.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var l;e.setColumnOrder(t?[]:null!=(l=e.initialState.columnOrder)?l:[])},e._getOrderColumnsFn=b(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,l)=>n=>{let r=[];if(null!=e&&e.length){let t=[...e],l=[...n];for(;l.length&&t.length;){let e=t.shift(),n=l.findIndex(t=>t.id===e);n>-1&&r.push(l.splice(n,1)[0])}r=[...r,...l]}else r=n;return function(e,t,l){if(!(null!=t&&t.length)||!l)return e;let n=e.filter(e=>!t.includes(e.id));return"remove"===l?n:[...t.map(t=>e.find(e=>e.id===t)).filter(Boolean),...n]}(r,t,l)},w(e.options,"debugTable","_getOrderColumnsFn"))}},{getInitialState:e=>({columnPinning:D(),...e}),getDefaultOptions:e=>({onColumnPinningChange:x("columnPinning",e)}),createColumn:(e,t)=>{e.pin=l=>{let n=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,r,o,i,s,a;return"right"===l?{left:(null!=(o=null==e?void 0:e.left)?o:[]).filter(e=>!(null!=n&&n.includes(e))),right:[...(null!=(i=null==e?void 0:e.right)?i:[]).filter(e=>!(null!=n&&n.includes(e))),...n]}:"left"===l?{left:[...(null!=(s=null==e?void 0:e.left)?s:[]).filter(e=>!(null!=n&&n.includes(e))),...n],right:(null!=(a=null==e?void 0:e.right)?a:[]).filter(e=>!(null!=n&&n.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=n&&n.includes(e))),right:(null!=(r=null==e?void 0:e.right)?r:[]).filter(e=>!(null!=n&&n.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var l,n,r;return(null==(l=e.columnDef.enablePinning)||l)&&(null==(n=null!=(r=t.options.enableColumnPinning)?r:t.options.enablePinning)||n)}),e.getIsPinned=()=>{let l=e.getLeafColumns().map(e=>e.id),{left:n,right:r}=t.getState().columnPinning,o=l.some(e=>null==n?void 0:n.includes(e)),i=l.some(e=>null==r?void 0:r.includes(e));return o?"left":!!i&&"right"},e.getPinnedIndex=()=>{var l,n;let r=e.getIsPinned();return r?null!=(l=null==(n=t.getState().columnPinning)||null==(n=n[r])?void 0:n.indexOf(e.id))?l:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=b(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,l)=>{let n=[...null!=t?t:[],...null!=l?l:[]];return e.filter(e=>!n.includes(e.column.id))},w(t.options,"debugRows","getCenterVisibleCells")),e.getLeftVisibleCells=b(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),w(t.options,"debugRows","getLeftVisibleCells")),e.getRightVisibleCells=b(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),w(t.options,"debugRows","getRightVisibleCells"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var l,n;return e.setColumnPinning(t?D():null!=(l=null==(n=e.initialState)?void 0:n.columnPinning)?l:D())},e.getIsSomeColumnsPinned=t=>{var l,n,r;let o=e.getState().columnPinning;return t?!!(null==(l=o[t])?void 0:l.length):!!((null==(n=o.left)?void 0:n.length)||(null==(r=o.right)?void 0:r.length))},e.getLeftLeafColumns=b(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),w(e.options,"debugColumns","getLeftLeafColumns")),e.getRightLeafColumns=b(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),w(e.options,"debugColumns","getRightLeafColumns")),e.getCenterLeafColumns=b(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,l)=>{let n=[...null!=t?t:[],...null!=l?l:[]];return e.filter(e=>!n.includes(e.id))},w(e.options,"debugColumns","getCenterLeafColumns"))}},{createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:x("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{let l=t.getCoreRowModel().flatRows[0],n=null==l?void 0:l.getValue(e.id);return"string"==typeof n?V.includesString:"number"==typeof n?V.inNumberRange:"boolean"==typeof n||null!==n&&"object"==typeof n?V.equals:Array.isArray(n)?V.arrIncludes:V.weakEquals},e.getFilterFn=()=>{var l,n;return v(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(l=null==(n=t.options.filterFns)?void 0:n[e.columnDef.filterFn])?l:V[e.columnDef.filterFn]},e.getCanFilter=()=>{var l,n,r;return(null==(l=e.columnDef.enableColumnFilter)||l)&&(null==(n=t.options.enableColumnFilters)||n)&&(null==(r=t.options.enableFilters)||r)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var l;return null==(l=t.getState().columnFilters)||null==(l=l.find(t=>t.id===e.id))?void 0:l.value},e.getFilterIndex=()=>{var l,n;return null!=(l=null==(n=t.getState().columnFilters)?void 0:n.findIndex(t=>t.id===e.id))?l:-1},e.setFilterValue=l=>{t.setColumnFilters(t=>{var n,r;let o=e.getFilterFn(),i=null==t?void 0:t.find(t=>t.id===e.id),s=h(l,i?i.value:void 0);if(k(o,s,e))return null!=(n=null==t?void 0:t.filter(t=>t.id!==e.id))?n:[];let a={id:e.id,value:s};return i?null!=(r=null==t?void 0:t.map(t=>t.id===e.id?a:t))?r:[]:null!=t&&t.length?[...t,a]:[a]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{let l=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var n;return null==(n=h(t,e))?void 0:n.filter(e=>{let t=l.find(t=>t.id===e.id);return!(t&&k(t.getFilterFn(),e.value,t))&&!0})})},e.resetColumnFilters=t=>{var l,n;e.setColumnFilters(t?[]:null!=(l=null==(n=e.initialState)?void 0:n.columnFilters)?l:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel)?e.getPreFilteredRowModel():e._getFilteredRowModel()}},{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:x("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var l;let n=null==(l=e.getCoreRowModel().flatRows[0])||null==(l=l._getAllCellsByColumnId()[t.id])?void 0:l.getValue();return"string"==typeof n||"number"==typeof n}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var l,n,r,o;return(null==(l=e.columnDef.enableGlobalFilter)||l)&&(null==(n=t.options.enableGlobalFilter)||n)&&(null==(r=t.options.enableFilters)||r)&&(null==(o=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||o)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>V.includesString,e.getGlobalFilterFn=()=>{var t,l;let{globalFilterFn:n}=e.options;return v(n)?n:"auto"===n?e.getGlobalAutoFilterFn():null!=(t=null==(l=e.options.filterFns)?void 0:l[n])?t:V[n]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:x("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{let l=t.getFilteredRowModel().flatRows.slice(10),n=!1;for(let t of l){let l=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(l))return ee.datetime;if("string"==typeof l&&(n=!0,l.split(X).length>1))return ee.alphanumeric}return n?ee.text:ee.basic},e.getAutoSortDir=()=>{let l=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==l?void 0:l.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var l,n;if(!e)throw Error();return v(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(l=null==(n=t.options.sortingFns)?void 0:n[e.columnDef.sortingFn])?l:ee[e.columnDef.sortingFn]},e.toggleSorting=(l,n)=>{let r=e.getNextSortingOrder(),o=null!=l;t.setSorting(i=>{let s,a=null==i?void 0:i.find(t=>t.id===e.id),u=null==i?void 0:i.findIndex(t=>t.id===e.id),d=[],g=o?l:"desc"===r;if("toggle"!=(s=null!=i&&i.length&&e.getCanMultiSort()&&n?a?"toggle":"add":null!=i&&i.length&&u!==i.length-1?"replace":a?"toggle":"replace")||o||r||(s="remove"),"add"===s){var c;(d=[...i,{id:e.id,desc:g}]).splice(0,d.length-(null!=(c=t.options.maxMultiSortColCount)?c:Number.MAX_SAFE_INTEGER))}else d="toggle"===s?i.map(t=>t.id===e.id?{...t,desc:g}:t):"remove"===s?i.filter(t=>t.id!==e.id):[{id:e.id,desc:g}];return d})},e.getFirstSortDir=()=>{var l,n;return(null!=(l=null!=(n=e.columnDef.sortDescFirst)?n:t.options.sortDescFirst)?l:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=l=>{var n,r;let o=e.getFirstSortDir(),i=e.getIsSorted();return i?(i===o||null!=(n=t.options.enableSortingRemoval)&&!n||!!l&&null!=(r=t.options.enableMultiRemove)&&!r)&&("desc"===i?"asc":"desc"):o},e.getCanSort=()=>{var l,n;return(null==(l=e.columnDef.enableSorting)||l)&&(null==(n=t.options.enableSorting)||n)&&!!e.accessorFn},e.getCanMultiSort=()=>{var l,n;return null!=(l=null!=(n=e.columnDef.enableMultiSort)?n:t.options.enableMultiSort)?l:!!e.accessorFn},e.getIsSorted=()=>{var l;let n=null==(l=t.getState().sorting)?void 0:l.find(t=>t.id===e.id);return!!n&&(n.desc?"desc":"asc")},e.getSortIndex=()=>{var l,n;return null!=(l=null==(n=t.getState().sorting)?void 0:n.findIndex(t=>t.id===e.id))?l:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{let l=e.getCanSort();return n=>{l&&(null==n.persist||n.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(n))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var l,n;e.setSorting(t?[]:null!=(l=null==(n=e.initialState)?void 0:n.sorting)?l:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel)?e.getPreSortedRowModel():e._getSortedRowModel()}},{getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,l;return null!=(t=null==(l=e.getValue())||null==l.toString?void 0:l.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:x("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var l,n;return(null==(l=e.columnDef.enableGrouping)||l)&&(null==(n=t.options.enableGrouping)||n)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var l;return null==(l=t.getState().grouping)?void 0:l.includes(e.id)},e.getGroupedIndex=()=>{var l;return null==(l=t.getState().grouping)?void 0:l.indexOf(e.id)},e.getToggleGroupingHandler=()=>{let t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{let l=t.getCoreRowModel().flatRows[0],n=null==l?void 0:l.getValue(e.id);return"number"==typeof n?L.sum:"[object Date]"===Object.prototype.toString.call(n)?L.extent:void 0},e.getAggregationFn=()=>{var l,n;if(!e)throw Error();return v(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(l=null==(n=t.options.aggregationFns)?void 0:n[e.columnDef.aggregationFn])?l:L[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var l,n;e.setGrouping(t?[]:null!=(l=null==(n=e.initialState)?void 0:n.grouping)?l:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel)?e.getPreGroupedRowModel():e._getGroupedRowModel()},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=l=>{if(e._groupingValuesCache.hasOwnProperty(l))return e._groupingValuesCache[l];let n=t.getColumn(l);return null!=n&&n.columnDef.getGroupingValue?(e._groupingValuesCache[l]=n.columnDef.getGroupingValue(e.original),e._groupingValuesCache[l]):e.getValue(l)},e._groupingValuesCache={}},createCell:(e,t,l,n)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===l.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!(null!=(t=l.subRows)&&t.length)}}},{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:x("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,l=!1;e._autoResetExpanded=()=>{var n,r;if(!t)return void e._queue(()=>{t=!0});if(null!=(n=null!=(r=e.options.autoResetAll)?r:e.options.autoResetExpanded)?n:!e.options.manualExpanding){if(l)return;l=!0,e._queue(()=>{e.resetExpanded(),l=!1})}},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var l,n;e.setExpanded(t?{}:null!=(l=null==(n=e.initialState)?void 0:n.expanded)?l:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{let t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{let t=e.getState().expanded;return"boolean"==typeof t?!0===t:!(!Object.keys(t).length||e.getRowModel().flatRows.some(e=>!e.getIsExpanded()))},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{let l=e.split(".");t=Math.max(t,l.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel)?e.getPreExpandedRowModel():e._getExpandedRowModel()},createRow:(e,t)=>{e.toggleExpanded=l=>{t.setExpanded(n=>{var r;let o=!0===n||!!(null!=n&&n[e.id]),i={};if(!0===n?Object.keys(t.getRowModel().rowsById).forEach(e=>{i[e]=!0}):i=n,l=null!=(r=l)?r:!o,!o&&l)return{...i,[e.id]:!0};if(o&&!l){let{[e.id]:t,...l}=i;return l}return n})},e.getIsExpanded=()=>{var l;let n=t.getState().expanded;return!!(null!=(l=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?l:!0===n||(null==n?void 0:n[e.id]))},e.getCanExpand=()=>{var l,n,r;return null!=(l=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?l:(null==(n=t.options.enableExpanding)||n)&&!!(null!=(r=e.subRows)&&r.length)},e.getIsAllParentsExpanded=()=>{let l=!0,n=e;for(;l&&n.parentId;)l=(n=t.getRow(n.parentId,!0)).getIsExpanded();return l},e.getToggleExpandedHandler=()=>{let t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},{getInitialState:e=>({...e,pagination:{...$(),...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:x("pagination",e)}),createTable:e=>{let t=!1,l=!1;e._autoResetPageIndex=()=>{var n,r;if(!t)return void e._queue(()=>{t=!0});if(null!=(n=null!=(r=e.options.autoResetAll)?r:e.options.autoResetPageIndex)?n:!e.options.manualPagination){if(l)return;l=!0,e._queue(()=>{e.resetPageIndex(),l=!1})}},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>h(t,e)),e.resetPagination=t=>{var l;e.setPagination(t?$():null!=(l=e.initialState.pagination)?l:$())},e.setPageIndex=t=>{e.setPagination(l=>{let n=h(t,l.pageIndex);return n=Math.max(0,Math.min(n,void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1)),{...l,pageIndex:n}})},e.resetPageIndex=t=>{var l,n;e.setPageIndex(t?0:null!=(l=null==(n=e.initialState)||null==(n=n.pagination)?void 0:n.pageIndex)?l:0)},e.resetPageSize=t=>{var l,n;e.setPageSize(t?10:null!=(l=null==(n=e.initialState)||null==(n=n.pagination)?void 0:n.pageSize)?l:10)},e.setPageSize=t=>{e.setPagination(e=>{let l=Math.max(1,h(t,e.pageSize)),n=Math.floor(e.pageSize*e.pageIndex/l);return{...e,pageIndex:n,pageSize:l}})},e.setPageCount=t=>e.setPagination(l=>{var n;let r=h(t,null!=(n=e.options.pageCount)?n:-1);return"number"==typeof r&&(r=Math.max(-1,r)),{...l,pageCount:r}}),e.getPageOptions=b(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...Array(e)].fill(null).map((e,t)=>t)),t},w(e.options,"debugTable","getPageOptions")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{let{pageIndex:t}=e.getState().pagination,l=e.getPageCount();return -1===l||0!==l&&t<l-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel)?e.getPrePaginationRowModel():e._getPaginationRowModel(),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},{getInitialState:e=>({rowPinning:B(),...e}),getDefaultOptions:e=>({onRowPinningChange:x("rowPinning",e)}),createRow:(e,t)=>{e.pin=(l,n,r)=>{let o=n?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],i=new Set([...r?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],e.id,...o]);t.setRowPinning(e=>{var t,n,r,o,s,a;return"bottom"===l?{top:(null!=(r=null==e?void 0:e.top)?r:[]).filter(e=>!(null!=i&&i.has(e))),bottom:[...(null!=(o=null==e?void 0:e.bottom)?o:[]).filter(e=>!(null!=i&&i.has(e))),...Array.from(i)]}:"top"===l?{top:[...(null!=(s=null==e?void 0:e.top)?s:[]).filter(e=>!(null!=i&&i.has(e))),...Array.from(i)],bottom:(null!=(a=null==e?void 0:e.bottom)?a:[]).filter(e=>!(null!=i&&i.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=i&&i.has(e))),bottom:(null!=(n=null==e?void 0:e.bottom)?n:[]).filter(e=>!(null!=i&&i.has(e)))}})},e.getCanPin=()=>{var l;let{enableRowPinning:n,enablePinning:r}=t.options;return"function"==typeof n?n(e):null==(l=null!=n?n:r)||l},e.getIsPinned=()=>{let l=[e.id],{top:n,bottom:r}=t.getState().rowPinning,o=l.some(e=>null==n?void 0:n.includes(e)),i=l.some(e=>null==r?void 0:r.includes(e));return o?"top":!!i&&"bottom"},e.getPinnedIndex=()=>{var l,n;let r=e.getIsPinned();if(!r)return -1;let o=null==(l="top"===r?t.getTopRows():t.getBottomRows())?void 0:l.map(e=>{let{id:t}=e;return t});return null!=(n=null==o?void 0:o.indexOf(e.id))?n:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var l,n;return e.setRowPinning(t?B():null!=(l=null==(n=e.initialState)?void 0:n.rowPinning)?l:B())},e.getIsSomeRowsPinned=t=>{var l,n,r;let o=e.getState().rowPinning;return t?!!(null==(l=o[t])?void 0:l.length):!!((null==(n=o.top)?void 0:n.length)||(null==(r=o.bottom)?void 0:r.length))},e._getPinnedRows=(t,l,n)=>{var r;return(null==(r=e.options.keepPinnedRows)||r?(null!=l?l:[]).map(t=>{let l=e.getRow(t,!0);return l.getIsAllParentsExpanded()?l:null}):(null!=l?l:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:n}))},e.getTopRows=b(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,l)=>e._getPinnedRows(t,l,"top"),w(e.options,"debugRows","getTopRows")),e.getBottomRows=b(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,l)=>e._getPinnedRows(t,l,"bottom"),w(e.options,"debugRows","getBottomRows")),e.getCenterRows=b(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,l)=>{let n=new Set([...null!=t?t:[],...null!=l?l:[]]);return e.filter(e=>!n.has(e.id))},w(e.options,"debugRows","getCenterRows"))}},{getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:x("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var l;return e.setRowSelection(t?{}:null!=(l=e.initialState.rowSelection)?l:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(l=>{t=void 0!==t?t:!e.getIsAllRowsSelected();let n={...l},r=e.getPreGroupedRowModel().flatRows;return t?r.forEach(e=>{e.getCanSelect()&&(n[e.id]=!0)}):r.forEach(e=>{delete n[e.id]}),n})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(l=>{let n=void 0!==t?t:!e.getIsAllPageRowsSelected(),r={...l};return e.getRowModel().rows.forEach(t=>{U(r,t.id,n,!0,e)}),r}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=b(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,l)=>Object.keys(t).length?J(e,l):{rows:[],flatRows:[],rowsById:{}},w(e.options,"debugTable","getSelectedRowModel")),e.getFilteredSelectedRowModel=b(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,l)=>Object.keys(t).length?J(e,l):{rows:[],flatRows:[],rowsById:{}},w(e.options,"debugTable","getFilteredSelectedRowModel")),e.getGroupedSelectedRowModel=b(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,l)=>Object.keys(t).length?J(e,l):{rows:[],flatRows:[],rowsById:{}},w(e.options,"debugTable","getGroupedSelectedRowModel")),e.getIsAllRowsSelected=()=>{let t=e.getFilteredRowModel().flatRows,{rowSelection:l}=e.getState(),n=!!(t.length&&Object.keys(l).length);return n&&t.some(e=>e.getCanSelect()&&!l[e.id])&&(n=!1),n},e.getIsAllPageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:l}=e.getState(),n=!!t.length;return n&&t.some(e=>!l[e.id])&&(n=!1),n},e.getIsSomeRowsSelected=()=>{var t;let l=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return l>0&&l<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(l,n)=>{let r=e.getIsSelected();t.setRowSelection(o=>{var i;if(l=void 0!==l?l:!r,e.getCanSelect()&&r===l)return o;let s={...o};return U(s,e.id,l,null==(i=null==n?void 0:n.selectChildren)||i,t),s})},e.getIsSelected=()=>{let{rowSelection:l}=t.getState();return W(e,l)},e.getIsSomeSelected=()=>{let{rowSelection:l}=t.getState();return"some"===K(e,l)},e.getIsAllSubRowsSelected=()=>{let{rowSelection:l}=t.getState();return"all"===K(e,l)},e.getCanSelect=()=>{var l;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(l=t.options.enableRowSelection)||l},e.getCanSelectSubRows=()=>{var l;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(l=t.options.enableSubRowSelection)||l},e.getCanMultiSelect=()=>{var l;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(l=t.options.enableMultiRowSelection)||l},e.getToggleSelectedHandler=()=>{let t=e.getCanSelect();return l=>{var n;t&&e.toggleSelected(null==(n=l.target)?void 0:n.checked)}}}},{getDefaultColumnDef:()=>z,getInitialState:e=>({columnSizing:{},columnSizingInfo:O(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:x("columnSizing",e),onColumnSizingInfoChange:x("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var l,n,r;let o=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(l=e.columnDef.minSize)?l:z.minSize,null!=(n=null!=o?o:e.columnDef.size)?n:z.size),null!=(r=e.columnDef.maxSize)?r:z.maxSize)},e.getStart=b(e=>[e,q(t,e),t.getState().columnSizing],(t,l)=>l.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),w(t.options,"debugColumns","getStart")),e.getAfter=b(e=>[e,q(t,e),t.getState().columnSizing],(t,l)=>l.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),w(t.options,"debugColumns","getAfter")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:l,...n}=t;return n})},e.getCanResize=()=>{var l,n;return(null==(l=e.columnDef.enableResizing)||l)&&(null==(n=t.options.enableColumnResizing)||n)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0,l=e=>{if(e.subHeaders.length)e.subHeaders.forEach(l);else{var n;t+=null!=(n=e.column.getSize())?n:0}};return l(e),t},e.getStart=()=>{if(e.index>0){let t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=l=>{let n=t.getColumn(e.column.id),r=null==n?void 0:n.getCanResize();return o=>{if(!n||!r||(null==o.persist||o.persist(),T(o)&&o.touches&&o.touches.length>1))return;let i=e.getSize(),s=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[n.id,n.getSize()]],a=T(o)?Math.round(o.touches[0].clientX):o.clientX,u={},d=(e,l)=>{"number"==typeof l&&(t.setColumnSizingInfo(e=>{var n,r;let o="rtl"===t.options.columnResizeDirection?-1:1,i=(l-(null!=(n=null==e?void 0:e.startOffset)?n:0))*o,s=Math.max(i/(null!=(r=null==e?void 0:e.startSize)?r:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,l]=e;u[t]=Math.round(100*Math.max(l+l*s,0))/100}),{...e,deltaOffset:i,deltaPercentage:s}}),("onChange"===t.options.columnResizeMode||"end"===e)&&t.setColumnSizing(e=>({...e,...u})))},g=e=>d("move",e),c=e=>{d("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},m=l||("undefined"!=typeof document?document:null),p={moveHandler:e=>g(e.clientX),upHandler:e=>{null==m||m.removeEventListener("mousemove",p.moveHandler),null==m||m.removeEventListener("mouseup",p.upHandler),c(e.clientX)}},f={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),g(e.touches[0].clientX),!1),upHandler:e=>{var t;null==m||m.removeEventListener("touchmove",f.moveHandler),null==m||m.removeEventListener("touchend",f.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),c(null==(t=e.touches[0])?void 0:t.clientX)}},h=!!function(){if("boolean"==typeof H)return H;let e=!1;try{let t=()=>{};window.addEventListener("test",t,{get passive(){return e=!0,!1}}),window.removeEventListener("test",t)}catch(t){e=!1}return H=e}()&&{passive:!1};T(o)?(null==m||m.addEventListener("touchmove",f.moveHandler,h),null==m||m.addEventListener("touchend",f.upHandler,h)):(null==m||m.addEventListener("mousemove",p.moveHandler,h),null==m||m.addEventListener("mouseup",p.upHandler,h)),t.setColumnSizingInfo(e=>({...e,startOffset:a,startSize:i,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:n.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var l;e.setColumnSizing(t?{}:null!=(l=e.initialState.columnSizing)?l:{})},e.resetHeaderSizeInfo=t=>{var l;e.setColumnSizingInfo(t?O():null!=(l=e.initialState.columnSizingInfo)?l:O())},e.getTotalSize=()=>{var t,l;return null!=(t=null==(l=e.getHeaderGroups()[0])?void 0:l.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,l;return null!=(t=null==(l=e.getLeftHeaderGroups()[0])?void 0:l.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,l;return null!=(t=null==(l=e.getCenterHeaderGroups()[0])?void 0:l.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,l;return null!=(t=null==(l=e.getRightHeaderGroups()[0])?void 0:l.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}}];function el(e,t){var l,n,o;return e?"function"==typeof(n=l=e)&&(()=>{let e=Object.getPrototypeOf(n);return e.prototype&&e.prototype.isReactComponent})()||"function"==typeof l||"object"==typeof(o=l)&&"symbol"==typeof o.$$typeof&&["react.memo","react.forward_ref"].includes(o.$$typeof.description)?r.createElement(e,t):e:null}var en=l(29446),er=l(27529),eo=l(56717),ei=l(77473);let es=(0,l(19377).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var ea=l(45763);let eu={accessor:(e,t)=>"function"==typeof e?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e};function ed({users:e,permissionCatalog:t,onCellClick:l,onUserClick:o,loading:i=!1,draftChanges:s=new Map}){let[a,u]=(0,r.useState)(new Set),g=(0,r.useMemo)(()=>{let e=new Map;return t.forEach(t=>{e.has(t.resource)||e.set(t.resource,[]),e.get(t.resource).push(t)}),Array.from(e.entries()).map(([e,t])=>({resource:e,permissions:t.sort((e,t)=>e.action.localeCompare(t.action))}))},[t]),c=e=>{let t=new Set(a);t.has(e)?t.delete(e):t.add(e),u(t)},m=(0,r.useMemo)(()=>{let e=[];return e.push(eu.accessor("email",{id:"user",header:"User",size:250,cell:({row:e})=>(0,n.jsxs)("div",{className:"flex items-center space-x-3 p-3 cursor-pointer hover:bg-gray-50",onClick:()=>o(e.original.userId),children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(en.A,{className:"h-4 w-4 text-blue-600"})})}),(0,n.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,n.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.original.display_name||e.original.email}),(0,n.jsx)("div",{className:"text-xs text-gray-500 truncate",children:e.original.email}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,n.jsxs)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${"host_admin"===e.original.role?"bg-purple-100 text-purple-800":"client_admin"===e.original.role?"bg-blue-100 text-blue-800":"program_manager"===e.original.role?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:[(0,n.jsx)(p.A,{className:"h-3 w-3 mr-1"}),e.original.role.replace("_"," ")]}),!e.original.is_active&&(0,n.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactive"})]})]})]})})),g.forEach(t=>{let r=a.has(t.resource);e.push(eu.display({id:`group-${t.resource}`,header:()=>(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)("button",{onClick:()=>c(t.resource),className:"flex items-center justify-center space-x-1 w-full p-2 hover:bg-gray-50 rounded",children:[r?(0,n.jsx)(d.A,{className:"h-4 w-4"}):(0,n.jsx)(er.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"text-xs font-medium text-gray-700 capitalize",children:t.resource.replace("-"," ")})]})}),size:120,cell:({row:e})=>(0,n.jsx)("div",{className:"text-center p-2",children:(0,n.jsx)(ec,{userId:e.original.userId,resource:t.resource,permissions:t.permissions,userCells:e.original.cells,onBulkChange:n=>{t.permissions.forEach(t=>{l(e.original.userId,t.permissionId)})}})})})),r&&t.permissions.forEach(t=>{e.push(eu.display({id:t.permissionId,header:()=>(0,n.jsx)("div",{className:"text-center p-2",children:(0,n.jsx)("div",{className:"text-xs font-medium text-gray-700 capitalize",children:t.action})}),size:80,cell:({row:e})=>{let r=e.original.cells.find(e=>e.permissionId===t.permissionId),o=`${e.original.userId}:${t.permissionId}`,i=s.get(o);return(0,n.jsx)("div",{className:"text-center p-2",children:(0,n.jsx)(eg,{cell:r,draftState:i,onClick:()=>l(e.original.userId,t.permissionId)})})}}))})}),e},[g,a,e,s,l,o]),f=function(e){let t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[l]=r.useState(()=>({current:function(e){var t,l;let n=[...et,...null!=(t=e._features)?t:[]],r={_features:n},o=r._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(r)),{}),i=e=>r.options.mergeOptions?r.options.mergeOptions(o,e):{...o,...e},s={...null!=(l=e.initialState)?l:{}};r._features.forEach(e=>{var t;s=null!=(t=null==e.getInitialState?void 0:e.getInitialState(s))?t:s});let a=[],u=!1,d={_features:n,options:{...o,...e},initialState:s,_queue:e=>{a.push(e),u||(u=!0,Promise.resolve().then(()=>{for(;a.length;)a.shift()();u=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{r.setState(r.initialState)},setOptions:e=>{let t=h(e,r.options);r.options=i(t)},getState:()=>r.options.state,setState:e=>{null==r.options.onStateChange||r.options.onStateChange(e)},_getRowId:(e,t,l)=>{var n;return null!=(n=null==r.options.getRowId?void 0:r.options.getRowId(e,t,l))?n:`${l?[l.id,t].join("."):t}`},getCoreRowModel:()=>(r._getCoreRowModel||(r._getCoreRowModel=r.options.getCoreRowModel(r)),r._getCoreRowModel()),getRowModel:()=>r.getPaginationRowModel(),getRow:(e,t)=>{let l=(t?r.getPrePaginationRowModel():r.getRowModel()).rowsById[e];if(!l&&!(l=r.getCoreRowModel().rowsById[e]))throw Error();return l},_getDefaultColumnDef:b(()=>[r.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{let t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,l;return null!=(t=null==(l=e.renderValue())||null==l.toString?void 0:l.toString())?t:null},...r._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},w(e,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>r.options.columns,getAllColumns:b(()=>[r._getColumnDefs()],e=>{let t=function(e,l,n){return void 0===n&&(n=0),e.map(e=>{let o=function(e,t,l,n){var r,o;let i,s={...e._getDefaultColumnDef(),...t},a=s.accessorKey,u=null!=(r=null!=(o=s.id)?o:a?"function"==typeof String.prototype.replaceAll?a.replaceAll(".","_"):a.replace(/\./g,"_"):void 0)?r:"string"==typeof s.header?s.header:void 0;if(s.accessorFn?i=s.accessorFn:a&&(i=a.includes(".")?e=>{let t=e;for(let e of a.split(".")){var l;t=null==(l=t)?void 0:l[e]}return t}:e=>e[s.accessorKey]),!u)throw Error();let d={id:`${String(u)}`,accessorFn:i,parent:n,depth:l,columnDef:s,columns:[],getFlatColumns:b(()=>[!0],()=>{var e;return[d,...null==(e=d.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},w(e.options,"debugColumns","column.getFlatColumns")),getLeafColumns:b(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=d.columns)&&t.length?e(d.columns.flatMap(e=>e.getLeafColumns())):[d]},w(e.options,"debugColumns","column.getLeafColumns"))};for(let t of e._features)null==t.createColumn||t.createColumn(d,e);return d}(r,e,n,l);return o.columns=e.columns?t(e.columns,o,n+1):[],o})};return t(e)},w(e,"debugColumns","getAllColumns")),getAllFlatColumns:b(()=>[r.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),w(e,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:b(()=>[r.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),w(e,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:b(()=>[r.getAllColumns(),r._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),w(e,"debugColumns","getAllLeafColumns")),getColumn:e=>r._getAllFlatColumnsById()[e]};Object.assign(r,d);for(let e=0;e<r._features.length;e++){let t=r._features[e];null==t||null==t.createTable||t.createTable(r)}return r}(t)})),[n,o]=r.useState(()=>l.current.initialState);return l.current.setOptions(t=>({...t,...e,state:{...n,...e.state},onStateChange:t=>{o(t),null==e.onStateChange||e.onStateChange(t)}})),l.current}({data:e,columns:m,getCoreRowModel:e=>b(()=>[e.options.data],t=>{let l={rows:[],flatRows:[],rowsById:{}},n=function(t,r,o){void 0===r&&(r=0);let i=[];for(let a=0;a<t.length;a++){let u=R(e,e._getRowId(t[a],a,o),t[a],a,r,void 0,null==o?void 0:o.id);if(l.flatRows.push(u),l.rowsById[u.id]=u,i.push(u),e.options.getSubRows){var s;u.originalSubRows=e.options.getSubRows(t[a],a),null!=(s=u.originalSubRows)&&s.length&&(u.subRows=n(u.originalSubRows,r+1,u))}}return i};return l.rows=n(t),l},w(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex())),getFilteredRowModel:e=>b(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,l,n)=>{var r,o,i;let s,a;if(!t.rows.length||!(null!=l&&l.length)&&!n){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}let u=[],d=[];(null!=l?l:[]).forEach(t=>{var l;let n=e.getColumn(t.id);if(!n)return;let r=n.getFilterFn();r&&u.push({id:t.id,filterFn:r,resolvedValue:null!=(l=null==r.resolveFilterValue?void 0:r.resolveFilterValue(t.value))?l:t.value})});let g=(null!=l?l:[]).map(e=>e.id),c=e.getGlobalFilterFn(),m=e.getAllLeafColumns().filter(e=>e.getCanGlobalFilter());n&&c&&m.length&&(g.push("__global__"),m.forEach(e=>{var t;d.push({id:e.id,filterFn:c,resolvedValue:null!=(t=null==c.resolveFilterValue?void 0:c.resolveFilterValue(n))?t:n})}));for(let e=0;e<t.flatRows.length;e++){let l=t.flatRows[e];if(l.columnFilters={},u.length)for(let e=0;e<u.length;e++){let t=(s=u[e]).id;l.columnFilters[t]=s.filterFn(l,t,s.resolvedValue,e=>{l.columnFiltersMeta[t]=e})}if(d.length){for(let e=0;e<d.length;e++){let t=(a=d[e]).id;if(a.filterFn(l,t,a.resolvedValue,e=>{l.columnFiltersMeta[t]=e})){l.columnFilters.__global__=!0;break}}!0!==l.columnFilters.__global__&&(l.columnFilters.__global__=!1)}}return r=t.rows,o=e=>{for(let t=0;t<g.length;t++)if(!1===e.columnFilters[g[t]])return!1;return!0},(i=e).options.filterFromLeafRows?function(e,t,l){var n;let r=[],o={},i=null!=(n=l.options.maxLeafRowFilterDepth)?n:100,s=function(e,n){void 0===n&&(n=0);let a=[];for(let d=0;d<e.length;d++){var u;let g=e[d],c=R(l,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(c.columnFilters=g.columnFilters,null!=(u=g.subRows)&&u.length&&n<i){if(c.subRows=s(g.subRows,n+1),t(g=c)&&!c.subRows.length||t(g)||c.subRows.length){a.push(g),o[g.id]=g,r.push(g);continue}}else t(g=c)&&(a.push(g),o[g.id]=g,r.push(g))}return a};return{rows:s(e),flatRows:r,rowsById:o}}(r,o,i):function(e,t,l){var n;let r=[],o={},i=null!=(n=l.options.maxLeafRowFilterDepth)?n:100,s=function(e,n){void 0===n&&(n=0);let a=[];for(let d=0;d<e.length;d++){let g=e[d];if(t(g)){var u;if(null!=(u=g.subRows)&&u.length&&n<i){let e=R(l,g.id,g.original,g.index,g.depth,void 0,g.parentId);e.subRows=s(g.subRows,n+1),g=e}a.push(g),r.push(g),o[g.id]=g}}return a};return{rows:s(e),flatRows:r,rowsById:o}}(r,o,i)},w(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex())),getSortedRowModel:e=>b(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,l)=>{if(!l.rows.length||!(null!=t&&t.length))return l;let n=e.getState().sorting,r=[],o=n.filter(t=>{var l;return null==(l=e.getColumn(t.id))?void 0:l.getCanSort()}),i={};o.forEach(t=>{let l=e.getColumn(t.id);l&&(i[t.id]={sortUndefined:l.columnDef.sortUndefined,invertSorting:l.columnDef.invertSorting,sortingFn:l.getSortingFn()})});let s=e=>{let t=e.map(e=>({...e}));return t.sort((e,t)=>{for(let n=0;n<o.length;n+=1){var l;let r=o[n],s=i[r.id],a=s.sortUndefined,u=null!=(l=null==r?void 0:r.desc)&&l,d=0;if(a){let l=e.getValue(r.id),n=t.getValue(r.id),o=void 0===l,i=void 0===n;if(o||i){if("first"===a)return o?-1:1;if("last"===a)return o?1:-1;d=o&&i?0:o?a:-a}}if(0===d&&(d=s.sortingFn(e,t,r.id)),0!==d)return u&&(d*=-1),s.invertSorting&&(d*=-1),d}return e.index-t.index}),t.forEach(e=>{var t;r.push(e),null!=(t=e.subRows)&&t.length&&(e.subRows=s(e.subRows))}),t};return{rows:s(l.rows),flatRows:r,rowsById:l.rowsById}},w(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))});return i?(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Loading permissions matrix..."})]})}):(0,n.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:f.getHeaderGroups().map(e=>(0,n.jsx)("tr",{children:e.headers.map(e=>(0,n.jsx)("th",{className:`px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${"user"===e.id?"sticky left-0 bg-gray-50 z-10":""}`,style:{width:e.getSize()},children:e.isPlaceholder?null:el(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,n.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.getRowModel().rows.map(e=>(0,n.jsx)("tr",{className:"hover:bg-gray-50",children:e.getVisibleCells().map(e=>(0,n.jsx)("td",{className:`px-2 py-1 whitespace-nowrap text-sm text-gray-900 ${"user"===e.column.id?"sticky left-0 bg-white z-10":""}`,style:{width:e.column.getSize()},children:el(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),0===e.length&&(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)(en.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,n.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No users found"}),(0,n.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Select a tenant to view users and their permissions."})]})]})}function eg({cell:e,draftState:t,onClick:l}){let r=t||e?.state||"none",o=e?.origin||"none",i=void 0!==t;return(0,n.jsx)("button",{onClick:l,className:`w-8 h-8 rounded border flex items-center justify-center hover:opacity-80 transition-all ${(()=>{if(i)switch(r){case"allow":return"bg-green-200 text-green-800 border-green-300 ring-2 ring-green-400";case"deny":return"bg-red-200 text-red-800 border-red-300 ring-2 ring-red-400";default:return"bg-gray-200 text-gray-600 border-gray-300 ring-2 ring-gray-400"}switch(r){case"allow":return"role"===o?"bg-green-100 text-green-700 border-green-200":"bg-green-500 text-white border-green-600";case"deny":return"role"===o?"bg-red-100 text-red-700 border-red-200":"bg-red-500 text-white border-red-600";default:return"bg-gray-100 text-gray-500 border-gray-200"}})()}`,title:`${r} (${o}${e?.roleNames?` - ${e.roleNames.join(", ")}`:""})`,children:(()=>{switch(r){case"allow":return(0,n.jsx)(eo.A,{className:"h-4 w-4"});case"deny":return(0,n.jsx)(ei.A,{className:"h-4 w-4"});default:return(0,n.jsx)(es,{className:"h-4 w-4"})}})()})}function ec({userId:e,resource:t,permissions:l,userCells:r,onBulkChange:o}){let i=r.filter(e=>l.some(t=>t.permissionId===e.permissionId)),s=i.filter(e=>"allow"===e.state).length,a=i.filter(e=>"deny"===e.state).length,u=i.length,d=s===u?"allow":a===u?"deny":s>0||a>0?"mixed":"none";return(0,n.jsx)("button",{onClick:()=>o("allow"===d?"none":"allow"),className:`w-8 h-8 rounded border flex items-center justify-center hover:opacity-80 transition-all ${(()=>{switch(d){case"allow":return"bg-green-100 text-green-700 border-green-200";case"deny":return"bg-red-100 text-red-700 border-red-200";case"mixed":return"bg-yellow-100 text-yellow-700 border-yellow-200";default:return"bg-gray-100 text-gray-500 border-gray-200"}})()}`,title:`Bulk ${t}: ${s}/${u} allowed`,children:(()=>{switch(d){case"allow":return(0,n.jsx)(eo.A,{className:"h-4 w-4"});case"deny":return(0,n.jsx)(ei.A,{className:"h-4 w-4"});case"mixed":return(0,n.jsx)(ea.A,{className:"h-4 w-4"});default:return(0,n.jsx)(es,{className:"h-4 w-4"})}})()})}var em=l(78520);function ep({isOpen:e,onClose:t,userDetail:l,userPermissions:r,onPermissionToggle:o,onRevertOverride:i,loading:s=!1}){if(!e)return null;let a=r.filter(e=>"override"===e.origin),d=r.filter(e=>"role"===e.origin&&"allow"===e.state);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:t}),(0,n.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-white shadow-xl z-50 overflow-y-auto",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"User Permissions"}),(0,n.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-md",children:(0,n.jsx)(ei.A,{className:"h-5 w-5 text-gray-500"})})]}),s?(0,n.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):l?(0,n.jsxs)("div",{className:"p-6 space-y-6",children:[(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,n.jsx)("div",{className:"h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(en.A,{className:"h-5 w-5 text-blue-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:l.profile.first_name&&l.profile.last_name?`${l.profile.first_name} ${l.profile.last_name}`:l.profile.email}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:l.profile.email})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(p.A,{className:"h-4 w-4 text-gray-400"}),(0,n.jsx)("span",{className:"text-gray-600",children:"Role:"}),(0,n.jsx)("span",{className:"font-medium",children:l.membership.role.replace("_"," ")})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(u.A,{className:"h-4 w-4 text-gray-400"}),(0,n.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,n.jsx)("span",{className:`font-medium ${l.membership.is_active?"text-green-600":"text-red-600"}`,children:l.membership.is_active?"Active":"Inactive"})]})]})]}),a.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[(0,n.jsx)(em.A,{className:"h-4 w-4 text-orange-500 mr-2"}),"Permission Overrides (",a.length,")"]}),(0,n.jsx)("div",{className:"space-y-2",children:a.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-orange-50 border border-orange-200 rounded-md",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.resource.replace("-"," ")," - ",e.action]}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:["Override: ",e.state]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:`w-6 h-6 rounded flex items-center justify-center ${"allow"===e.state?"bg-green-500 text-white":"deny"===e.state?"bg-red-500 text-white":"bg-gray-400 text-white"}`,children:"allow"===e.state?(0,n.jsx)(eo.A,{className:"h-3 w-3"}):"deny"===e.state?(0,n.jsx)(ei.A,{className:"h-3 w-3"}):(0,n.jsx)(es,{className:"h-3 w-3"})}),(0,n.jsx)("button",{onClick:()=>i(e.permissionId),className:"text-xs text-blue-600 hover:text-blue-800",children:"Revert"})]})]},e.permissionId))})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[(0,n.jsx)(p.A,{className:"h-4 w-4 text-blue-500 mr-2"}),"Role Permissions (",d.length,")"]}),(0,n.jsx)("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:d.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded-md",children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsxs)("div",{className:"text-sm text-gray-900",children:[e.resource.replace("-"," ")," - ",e.action]})}),(0,n.jsx)("div",{className:"w-6 h-6 bg-green-100 text-green-700 rounded flex items-center justify-center",children:(0,n.jsx)(eo.A,{className:"h-3 w-3"})})]},e.permissionId))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"All Permissions"}),(0,n.jsx)("div",{className:"space-y-1 max-h-96 overflow-y-auto",children:r.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded-md",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"text-sm text-gray-900",children:[e.resource.replace("-"," ")," - ",e.action]}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"role"===e.origin?`From role: ${e.roleNames?.join(", ")}`:"override"===e.origin?"User override":"Not granted"})]}),(0,n.jsx)("button",{onClick:()=>o(e.permissionId),className:`w-6 h-6 rounded flex items-center justify-center border transition-colors ${"allow"===e.state?"override"===e.origin?"bg-green-500 text-white border-green-600":"bg-green-100 text-green-700 border-green-200":"deny"===e.state?"override"===e.origin?"bg-red-500 text-white border-red-600":"bg-red-100 text-red-700 border-red-200":"bg-gray-100 text-gray-500 border-gray-200 hover:bg-gray-200"}`,children:"allow"===e.state?(0,n.jsx)(eo.A,{className:"h-3 w-3"}):"deny"===e.state?(0,n.jsx)(ei.A,{className:"h-3 w-3"}):(0,n.jsx)(es,{className:"h-3 w-3"})})]},e.permissionId))})]}),(0,n.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Bulk Actions"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsx)("button",{onClick:()=>{r.forEach(e=>{"allow"!==e.state&&o(e.permissionId)})},className:"px-3 py-2 text-xs bg-green-100 text-green-700 rounded-md hover:bg-green-200",children:"Grant All"}),(0,n.jsx)("button",{onClick:()=>{r.forEach(e=>{"deny"!==e.state&&o(e.permissionId)})},className:"px-3 py-2 text-xs bg-red-100 text-red-700 rounded-md hover:bg-red-200",children:"Deny All"}),(0,n.jsx)("button",{onClick:()=>{a.forEach(e=>{i(e.permissionId)})},className:"px-3 py-2 text-xs bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 col-span-2",disabled:0===a.length,children:"Clear All Overrides"})]})]})]}):(0,n.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(en.A,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"No user selected"}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Click on a user to view their permissions"})]})})]})]})}var ef=l(16391);class eh{static async listTenants(){try{let{data:e,error:t}=await ef.ND.from("tenants").select("id, name").eq("status","active").order("name");if(t)throw t;return e||[]}catch(e){throw console.error("Error listing tenants:",e),e}}static async listTenantUsers(e,t={}){try{let{page:l=1,limit:n=50,search:r}=t,o=(l-1)*n,i=ef.ND.from("tenant_users").select(`
          user_id,
          role,
          is_active,
          profiles!inner(
            id,
            email,
            full_name
          )
        `).eq("tenant_id",e);r&&(i=i.or(`profiles.email.ilike.%${r}%,profiles.first_name.ilike.%${r}%,profiles.last_name.ilike.%${r}%`));let{count:s}=await ef.ND.from("tenant_users").select("*",{count:"exact",head:!0}).eq("tenant_id",e),{data:a,error:u}=await i.range(o,o+n-1).order("profiles(email)");if(u)throw u;return{users:a?.map(e=>({userId:e.user_id,email:e.profiles?.email||"unknown@example.com",display_name:e.profiles?.first_name&&e.profiles?.last_name?`${e.profiles.first_name} ${e.profiles.last_name}`:e.profiles?.email||"Unknown User",role:e.role,is_active:e.is_active}))||[],total:s||0}}catch(e){throw console.error("Error listing tenant users:",e),e}}static async listPermissionCatalog(){let e=[];return Object.values(i.Gv).forEach(t=>{Object.values(i.Jj).forEach(l=>{e.push({resource:t,action:l,permissionId:`${t}:${l}`,description:`${l.charAt(0).toUpperCase()+l.slice(1)} ${t.replace("-"," ")}`})})}),e}static async getEffectivePermissions(e,t){try{let l=await this.listPermissionCatalog(),n=new Map;for(let r of t){let t=await this.getUserDetail(e,r),o=[];for(let e of l){let l=await this.calculateEffectivePermission(t,e.permissionId,e.resource,e.action);o.push(l)}n.set(r,o)}return n}catch(e){throw console.error("Error getting effective permissions:",e),e}}static async getUserDetail(e,t){try{let{data:l,error:n}=await ef.ND.from("profiles").select("*").eq("id",t).single();if(n)throw n;let{data:r,error:o}=await ef.ND.from("tenant_users").select("role, is_active, tenant_id").eq("user_id",t).eq("tenant_id",e).single();if(o)throw o;let i=[];try{let{data:l}=await ef.ND.from("user_tenant_permissions").select("permission_id, effect").eq("user_id",t).eq("tenant_id",e);i=l?.map(e=>({permissionId:e.permission_id,effect:e.effect}))||[]}catch{}return{profile:{...l,role:r.role},membership:{role:r.role,is_active:r.is_active,tenant_id:r.tenant_id},overrides:i,roles:[r.role]}}catch(e){throw console.error("Error getting user detail:",e),e}}static async calculateEffectivePermission(e,t,l,n){let r=e.overrides.find(e=>e.permissionId===t);return r?{permissionId:t,resource:l,action:n,state:r.effect,origin:"override",roleNames:e.roles}:this.checkRolePermission(e.membership.role,l,n)?{permissionId:t,resource:l,action:n,state:"allow",origin:"role",roleNames:[e.membership.role]}:{permissionId:t,resource:l,action:n,state:"none",origin:"none",roleNames:e.roles}}static checkRolePermission(e,t,l){return"host_admin"===e||("client_admin"===e?!["tenant-management","system-settings"].includes(t):"program_manager"===e?["project-management","work-requests","project-charter","risk-management"].includes(t)&&["view","create","update"].includes(l):"client_user"===e&&["work-requests","reporting"].includes(t)&&["view","create"].includes(l))}static async applyChanges(e){try{let{data:t,error:l}=await ef.ND.rpc("apply_rbac_changes",{p_tenant_id:e.tenantId,p_actor_user_id:e.actorUserId,p_role_assignments:e.roleAssignments||[],p_user_overrides:e.userOverrides||[],p_audit_note:e.auditNote||"RBAC changes applied via admin interface"});if(l)return console.error("Error applying RBAC changes:",l),{success:!1,error:l.message};return{success:!0}}catch(e){return console.error("Error applying RBAC changes:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}}static async getAuditLog(e,t=100){try{let{data:l,error:n}=await ef.ND.from("activity_log").select(`
          *,
          profiles!activity_log_user_id_fkey(full_name, email)
        `).eq("tenant_id",e).in("action",["rbac_role_assigned","rbac_role_removed","rbac_override_set","rbac_override_cleared"]).order("timestamp",{ascending:!1}).limit(t);if(n)throw n;return l||[]}catch(e){return console.error("Error getting audit log:",e),[]}}}var ex=l(94416),ev=l(97152);function eb(){let[e,t]=(0,r.useState)([]),[l,o]=(0,r.useState)(null),[s,u]=(0,r.useState)("users"),[d,g]=(0,r.useState)(""),[m,p]=(0,r.useState)([]),[h,x]=(0,r.useState)([]),[v,b]=(0,r.useState)(null),[w,C]=(0,r.useState)(null),[y,S]=(0,r.useState)([]),[R,j]=(0,r.useState)(!1),[_,F]=(0,r.useState)(!1),[N,M]=(0,r.useState)(!1),[I,A]=(0,r.useState)(new Map),[E,P]=(0,r.useState)([]),{currentUserId:V,currentTenantId:G,isHostAdmin:k,canManage:L}=(0,i.Sk)(),D=async()=>{if(l){F(!0);try{let{users:e}=await eh.listTenantUsers(l.id,{search:d||void 0,limit:100}),t=e.map(e=>e.userId),n=await eh.getEffectivePermissions(l.id,t),r=e.map(e=>({userId:e.userId,email:e.email,display_name:e.display_name,role:e.role,is_active:e.is_active,cells:n.get(e.userId)||[]}));p(r)}catch(e){console.error("Error loading tenant users:",e)}finally{F(!1)}}},z=async()=>{if(v&&l){M(!0);try{let e=await eh.getUserDetail(l.id,v);C(e);let t=m.find(e=>e.userId===v);S(t?.cells||[])}catch(e){console.error("Error loading user detail:",e)}finally{M(!1)}}},O=(0,r.useCallback)((e,t)=>{let l,n=`${e}:${t}`,r=I.get(n),o=m.find(t=>t.userId===e),i=o?.cells.find(e=>e.permissionId===t);switch(r||i?.state||"none"){case"none":default:l="allow";break;case"allow":l="deny";break;case"deny":l="none"}let s=new Map(I);l===(i?.state||"none")?s.delete(n):s.set(n,l),A(s);let a={op:"none"===l?"clearOverride":"setOverride",userId:e,permissionId:t,effect:"none"===l?void 0:l};P(l=>[...l.filter(l=>l.userId!==e||l.permissionId!==t),a])},[I,m]),H=(0,r.useCallback)(e=>{b(e),j(!0)},[]),T=(0,r.useCallback)(e=>{v&&O(v,e)},[v,O]),q=(0,r.useCallback)(e=>{if(v){let t=`${v}:${e}`,l=new Map(I);l.delete(t),A(l);let n={op:"clearOverride",userId:v,permissionId:e};P(t=>[...t.filter(t=>t.userId!==v||t.permissionId!==e),n])}},[v,I]),$=async()=>{if(l&&V&&0!==E.length){F(!0);try{let e={tenantId:l.id,actorUserId:V,userOverrides:E.filter(e=>"setOverride"===e.op||"clearOverride"===e.op).map(e=>({userId:e.userId,permissionId:e.permissionId,effect:e.effect||null})),auditNote:`RBAC changes applied via admin interface: ${E.length} operations`},t=await eh.applyChanges(e);t.success?(A(new Map),P([]),await D(),v&&await z()):console.error("Failed to apply changes:",t.error)}catch(e){console.error("Error applying changes:",e)}finally{F(!1)}}},B=E.length>0;return(0,n.jsx)(a,{children:(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"RBAC Matrix"}),(0,n.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage user permissions and access control across tenants"})]}),B&&(0,n.jsxs)("div",{className:"flex items-center space-x-3 bg-blue-50 border border-blue-200 rounded-lg px-4 py-2",children:[(0,n.jsx)(em.A,{className:"h-5 w-5 text-blue-600"}),(0,n.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:[E.length," pending change",1!==E.length?"s":""]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)("button",{onClick:()=>{A(new Map),P([])},className:"px-3 py-1 text-xs bg-white border border-gray-300 text-gray-700 rounded hover:bg-gray-50",children:[(0,n.jsx)(ex.A,{className:"h-3 w-3 mr-1 inline"}),"Discard"]}),(0,n.jsxs)("button",{onClick:$,disabled:_,className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:[(0,n.jsx)(ev.A,{className:"h-3 w-3 mr-1 inline"}),"Apply Changes"]})]})]})]})})}),(0,n.jsx)(c,{tenants:e,selectedTenant:l,onTenantChange:o,searchTerm:d,onSearchChange:g,loading:_}),(0,n.jsx)(f,{activeEntity:s,onEntityChange:u,userCount:m.length,roleCount:4}),(0,n.jsx)("div",{className:"p-6",children:l?(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsx)(ed,{users:m,permissionCatalog:h,onCellClick:O,onUserClick:H,loading:_,draftChanges:I})}):(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)(em.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,n.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tenant selected"}),(0,n.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Select a tenant to manage user permissions and access control."})]})}),(0,n.jsx)(ep,{isOpen:R,onClose:()=>j(!1),userDetail:w,userPermissions:y,onPermissionToggle:T,onRevertOverride:q,loading:N})]})})}},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29446:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});let n=(0,l(19377).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},30983:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});let n=(0,l(19377).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},33873:e=>{"use strict";e.exports=require("path")},45763:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});let n=(0,l(19377).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},50251:(e,t,l)=>{"use strict";l.d(t,{LQ:()=>o,uD:()=>i});var n=l(60687);l(43210);var r=l(51635);function o({feature:e,permission:t=r.Jj.VIEW,fallback:l=null,children:o,className:i}){let{hasPermission:s,canAccessFeature:a}=(0,r.Sk)();return(t?s(e,t):a(e))?(0,n.jsx)("div",{className:i,children:o}):(0,n.jsx)("div",{className:i,children:l})}function i({feature:e,fallback:t=null,children:l,className:o}){let{canAccessFeature:i}=(0,r.Sk)();return i(e)?(0,n.jsx)("div",{className:o,children:l}):(0,n.jsx)("div",{className:o,children:t})}},55591:e=>{"use strict";e.exports=require("https")},56717:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});let n=(0,l(19377).A)("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]])},62420:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});let n=(0,l(19377).A)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67183:(e,t,l)=>{"use strict";l.r(t),l.d(t,{GlobalError:()=>i.a,__next_app__:()=>g,pages:()=>d,routeModule:()=>c,tree:()=>u});var n=l(65239),r=l(48088),o=l(88170),i=l.n(o),s=l(30893),a={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>s[e]);l.d(t,a);let u={children:["",{children:["admin",{children:["access-control",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(l.bind(l,80373)),"/home/ubuntu/ETLA-Platform/frontend/src/app/admin/access-control/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(l.bind(l,94431)),"/home/ubuntu/ETLA-Platform/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(l.t.bind(l,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(l.t.bind(l,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(l.t.bind(l,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/home/ubuntu/ETLA-Platform/frontend/src/app/admin/access-control/page.tsx"],g={require:l,loadChunk:()=>Promise.resolve()},c=new n.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/admin/access-control/page",pathname:"/admin/access-control",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},70185:(e,t,l)=>{Promise.resolve().then(l.bind(l,80373))},74075:e=>{"use strict";e.exports=require("zlib")},77473:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});let n=(0,l(19377).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},78520:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});let n=(0,l(19377).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},79551:e=>{"use strict";e.exports=require("url")},80373:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>n});let n=(0,l(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/ubuntu/ETLA-Platform/frontend/src/app/admin/access-control/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/ETLA-Platform/frontend/src/app/admin/access-control/page.tsx","default")},81630:e=>{"use strict";e.exports=require("http")},94416:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});let n=(0,l(19377).A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},97152:(e,t,l)=>{"use strict";l.d(t,{A:()=>n});let n=(0,l(19377).A)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])}};var t=require("../../../webpack-runtime.js");t.C(e);var l=e=>t(t.s=e),n=t.X(0,[197,897],()=>l(67183));module.exports=n})();