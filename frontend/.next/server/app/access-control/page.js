(()=>{var e={};e.id=4685,e.ids=[4685],e.modules={2643:(e,s,t)=>{"use strict";t.d(s,{$:()=>n});var a=t(60687),r=t(43210),l=t(4780);let n=r.forwardRef(({className:e,variant:s="default",size:t="default",...r},n)=>(0,a.jsx)("button",{className:(0,l.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"default"===s,"bg-red-600 text-white hover:bg-red-700":"destructive"===s,"border border-gray-300 bg-white hover:bg-gray-50":"outline"===s,"bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===s,"hover:bg-gray-100":"ghost"===s,"text-blue-600 underline-offset-4 hover:underline":"link"===s},{"h-10 px-4 py-2":"default"===t,"h-9 rounded-md px-3":"sm"===t,"h-11 rounded-md px-8":"lg"===t,"h-10 w-10":"icon"===t},e),ref:n,...r}));n.displayName="Button"},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},16973:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/ubuntu/ETLA-Platform/frontend/src/app/access-control/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/ETLA-Platform/frontend/src/app/access-control/page.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23323:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>d});var a=t(65239),r=t(48088),l=t(88170),n=t.n(l),i=t(30893),c={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let d={children:["",{children:["access-control",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,16973)),"/home/ubuntu/ETLA-Platform/frontend/src/app/access-control/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/home/ubuntu/ETLA-Platform/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/home/ubuntu/ETLA-Platform/frontend/src/app/access-control/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/access-control/page",pathname:"/access-control",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},26228:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19377).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},27320:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>E});var a=t(60687),r=t(43210),l=t(13732),n=t(61523),i=t(60149),c=t(28749),d=t(2643),o=t(78520),m=t(53106),x=t(4463);let u=(0,t(19377).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var h=t(35377),p=t(16073),g=t(62420),j=t(9362),v=t(49987),f=t(30983),b=t(26228),y=t(18188),N=t(16391),_=t(29446),w=t(77473),A=t(42633),k=t(82457),C=t(9235);function S({isOpen:e,onClose:s,onSuccess:t,tenants:l}){let[n,i]=(0,r.useState)({email:"",full_name:"",phone:"",department:"",job_title:"",role:"user",role_level:"sub_client",tenant_id:"",password:"",can_invite_users:!1,can_manage_sub_clients:!1,permission_scope:"own"}),[o,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),p=(e,s)=>{if(i(t=>({...t,[e]:s})),"role_level"===e){let e="host"===s?"all":"primary_client"===s?"tenant":"own";i(s=>({...s,permission_scope:e}))}},j=async e=>{e.preventDefault(),x(!0),h("");try{if(!n.email||!n.full_name||!n.tenant_id||!n.password)return void h("Please fill in all required fields");let e={email:n.email,full_name:n.full_name,phone:n.phone||void 0,department:n.department||void 0,job_title:n.job_title||void 0,role:n.role,role_level:n.role_level,tenant_id:n.tenant_id,password:n.password,can_invite_users:n.can_invite_users,can_manage_sub_clients:n.can_manage_sub_clients,permission_scope:n.permission_scope},a=await N.Lr.createUser(e);a.success?(t(),s(),i({email:"",full_name:"",phone:"",department:"",job_title:"",role:"user",role_level:"sub_client",tenant_id:"",password:"",can_invite_users:!1,can_manage_sub_clients:!1,permission_scope:"own"})):h(a.error||"Failed to create user")}catch(e){h("An error occurred while creating the user"),console.error("User creation error:",e)}finally{x(!1)}};return e?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(c.Zp,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(_.A,{className:"h-5 w-5 mr-2"}),"Create New User"]}),(0,a.jsx)(c.BT,{children:"Add a new user to the system with appropriate role and permissions"})]}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:s,children:(0,a.jsx)(w.A,{className:"h-4 w-4"})})]})}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[u&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:u})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 inline mr-1"}),"Email Address *"]}),(0,a.jsx)("input",{type:"email",required:!0,value:n.email,onChange:e=>p("email",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"user@company.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(_.A,{className:"h-4 w-4 inline mr-1"}),"Full Name *"]}),(0,a.jsx)("input",{type:"text",required:!0,value:n.full_name,onChange:e=>p("full_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"John Doe"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(A.A,{className:"h-4 w-4 inline mr-1"}),"Phone Number"]}),(0,a.jsx)("input",{type:"tel",value:n.phone,onChange:e=>p("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+1 (555) 123-4567"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 inline mr-1"}),"Job Title"]}),(0,a.jsx)("input",{type:"text",value:n.job_title,onChange:e=>p("job_title",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Software Engineer"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(C.A,{className:"h-4 w-4 inline mr-1"}),"Department"]}),(0,a.jsx)("input",{type:"text",value:n.department,onChange:e=>p("department",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Engineering"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Role and Permissions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 inline mr-1"}),"Role Level *"]}),(0,a.jsxs)("select",{required:!0,value:n.role_level,onChange:e=>p("role_level",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"sub_client",children:"Sub Client"}),(0,a.jsx)("option",{value:"primary_client",children:"Primary Client"}),(0,a.jsx)("option",{value:"host",children:"Host Admin"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),(0,a.jsxs)("select",{required:!0,value:n.role,onChange:e=>p("role",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"viewer",children:"Viewer"}),(0,a.jsx)("option",{value:"user",children:"User"}),(0,a.jsx)("option",{value:"manager",children:"Manager"}),(0,a.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(C.A,{className:"h-4 w-4 inline mr-1"}),"Tenant *"]}),(0,a.jsxs)("select",{required:!0,value:n.tenant_id,onChange:e=>p("tenant_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Select Tenant"}),l.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.tenant_type,")"]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permission Scope"}),(0,a.jsxs)("select",{value:n.permission_scope,onChange:e=>p("permission_scope",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"own",children:"Own Data Only"}),(0,a.jsx)("option",{value:"tenant",children:"Tenant Scope"}),(0,a.jsx)("option",{value:"all",children:"All Data"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"can_invite_users",checked:n.can_invite_users,onChange:e=>p("can_invite_users",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"can_invite_users",className:"ml-2 text-sm text-gray-700",children:"Can invite other users"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"can_manage_sub_clients",checked:n.can_manage_sub_clients,onChange:e=>p("can_manage_sub_clients",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"can_manage_sub_clients",className:"ml-2 text-sm text-gray-700",children:"Can manage sub-client users"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Authentication"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Temporary Password *"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",required:!0,value:n.password,onChange:e=>p("password",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter temporary password"}),(0,a.jsx)(d.$,{type:"button",onClick:()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*",s="";for(let t=0;t<12;t++)s+=e.charAt(Math.floor(Math.random()*e.length));i(e=>({...e,password:s}))},variant:"outline",children:"Generate"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"User will be required to change password on first login"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,a.jsx)(d.$,{type:"button",variant:"outline",onClick:s,disabled:o,children:"Cancel"}),(0,a.jsx)(d.$,{type:"submit",disabled:o,children:o?"Creating...":"Create User"})]})]})})]})}):null}var P=t(32773);function q({isOpen:e,onClose:s,onSuccess:t,tenants:l}){let[n,i]=(0,r.useState)({emails:"",role:"user",role_level:"sub_client",tenant_id:"",message:"",expires_in_days:7}),[o,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),[j,v]=(0,r.useState)(0),f=(e,s)=>{i(t=>({...t,[e]:s})),"emails"===e&&v(s.split(/[,\n]/).filter(e=>e.trim().length>0).length)},b=e=>{let s=e.split(/[,\n]/).map(e=>e.trim()).filter(e=>e.length>0),t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,a=[],r=[];if(s.forEach(e=>{t.test(e)?a.push(e):r.push(e)}),r.length>0)throw Error(`Invalid email addresses: ${r.join(", ")}`);return a},y=async e=>{e.preventDefault(),x(!0),h("");try{let e=b(n.emails);if(0===e.length)throw Error("Please enter at least one valid email address");if(!n.tenant_id)throw Error("Please select a tenant");let a={emails:e,role:n.role,role_level:n.role_level,tenant_id:n.tenant_id,message:n.message||void 0,expires_in_days:n.expires_in_days},r=await N.Lr.inviteUsers(a);r.success?(t(),s(),i({emails:"",role:"user",role_level:"sub_client",tenant_id:"",message:"",expires_in_days:7}),v(0)):h(r.error||"Failed to send invitations")}catch(e){h(e instanceof Error?e.message:"An error occurred while sending invitations"),console.error("Invitation error:",e)}finally{x(!1)}};return e?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(c.Zp,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"Invite Users"]}),(0,a.jsx)(c.BT,{children:"Send email invitations to new users to join the platform"})]}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:s,children:(0,a.jsx)(w.A,{className:"h-4 w-4"})})]})}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[u&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:u})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Recipients"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 inline mr-1"}),"Email Addresses *"]}),(0,a.jsx)("textarea",{required:!0,rows:4,value:n.emails,onChange:e=>f("emails",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email addresses separated by commas or new lines: user1@company.com user2@company.com, user3@company.com"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:j>0?`${j} email${j>1?"s":""} to be invited`:"Separate multiple emails with commas or new lines"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Role Assignment"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 inline mr-1"}),"Role Level *"]}),(0,a.jsxs)("select",{required:!0,value:n.role_level,onChange:e=>f("role_level",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"sub_client",children:"Sub Client"}),(0,a.jsx)("option",{value:"primary_client",children:"Primary Client"}),(0,a.jsx)("option",{value:"host",children:"Host Admin"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),(0,a.jsxs)("select",{required:!0,value:n.role,onChange:e=>f("role",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"viewer",children:"Viewer"}),(0,a.jsx)("option",{value:"user",children:"User"}),(0,a.jsx)("option",{value:"manager",children:"Manager"}),(0,a.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(C.A,{className:"h-4 w-4 inline mr-1"}),"Tenant *"]}),(0,a.jsxs)("select",{required:!0,value:n.tenant_id,onChange:e=>f("tenant_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Select Tenant"}),l.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.tenant_type,")"]},e.id))]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Invitation Settings"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expires In (Days)"}),(0,a.jsxs)("select",{value:n.expires_in_days,onChange:e=>f("expires_in_days",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:1,children:"1 Day"}),(0,a.jsx)("option",{value:3,children:"3 Days"}),(0,a.jsx)("option",{value:7,children:"7 Days"}),(0,a.jsx)("option",{value:14,children:"14 Days"}),(0,a.jsx)("option",{value:30,children:"30 Days"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Message"}),(0,a.jsx)("textarea",{rows:3,value:n.message,onChange:e=>f("message",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:(()=>{let e=l.find(e=>e.id===n.tenant_id);return`You have been invited to join ${e?.name||"our organization"} on the ETLA Platform. Please click the link below to accept your invitation and set up your account.`})()}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to use the default invitation message"})]})]}),j>0&&n.tenant_id&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4 inline mr-1"}),"Invitation Preview"]}),(0,a.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:j})," user",j>1?"s":""," will be invited as ",(0,a.jsx)("strong",{children:n.role})," (",n.role_level,") to ",(0,a.jsx)("strong",{children:l.find(e=>e.id===n.tenant_id)?.name})]}),(0,a.jsxs)("p",{className:"mt-1",children:["Invitations will expire in ",(0,a.jsxs)("strong",{children:[n.expires_in_days," day",n.expires_in_days>1?"s":""]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,a.jsx)(d.$,{type:"button",variant:"outline",onClick:s,disabled:o,children:"Cancel"}),(0,a.jsxs)(d.$,{type:"submit",disabled:o||0===j,children:[(0,a.jsx)(P.A,{className:"h-4 w-4 mr-2"}),o?"Sending...":`Send ${j} Invitation${j>1?"s":""}`]})]})]})})]})}):null}function E(){let{user:e,isAuthenticated:s,isDemoMode:t,tenantUser:_}=(0,l.h)(),{selectedTenant:w}=(0,n.Ku)(),[A,k]=(0,r.useState)([]),[C,P]=(0,r.useState)([]),[E,U]=(0,r.useState)([]),[R,$]=(0,r.useState)([]),[D,L]=(0,r.useState)(!0),[T,I]=(0,r.useState)(null),[M,z]=(0,r.useState)(""),[Z,B]=(0,r.useState)("all"),[F,W]=(0,r.useState)("all"),[O,G]=(0,r.useState)(!1),[H,J]=(0,r.useState)(!1),[K,V]=(0,r.useState)(!1),[Y,Q]=(0,r.useState)(!1),[X,ee]=(0,r.useState)(null),[es,et]=(0,r.useState)("overview"),ea=_?.role||e?.role,er="host_admin"===ea,el="client_admin"===ea,en=e?.email==="demo@company.com"||t,ei=er||el||en;console.log("\uD83D\uDD0D Access Control Permission Debug:",{user:e?.email,userRole:ea,tenantUserRole:_?.role,isAuthenticated:s,isDemoMode:t,canManageUsers:ei,isHostAdmin:er,isClientAdmin:el,isDemoUser:en});let ec=async()=>{L(!0),I(null);try{await Promise.all([ed(),eo(),em(),ex()])}catch(e){console.error("Error loading data:",e),I("Failed to load data. Please try again.")}finally{L(!1)}},ed=async()=>{try{let s=N.ND.from("profiles").select(`
          *,
          tenant_users!inner(
            role,
            role_level,
            is_active,
            tenant_id,
            is_primary_tenant,
            requires_password_change,
            permission_scope,
            can_invite_users,
            can_manage_sub_clients,
            tenants(name, code)
          )
        `).order("created_at",{ascending:!1});console.log("\uD83D\uDD0D Access Control Debug:",{isHostAdmin:er,isClientAdmin:el,isDemoUser:en,canManageUsers:ei,selectedTenant:w?.name,userRole:e?.role,tenantUserRole:_?.role,userEmail:e?.email,willFilter:!er&&w}),!er&&w?(console.log("\uD83D\uDEAB Applying tenant filter for tenant:",w.name),s=s.eq("tenant_users.tenant_id",w.id)):console.log("✅ No tenant filtering - showing all users");let{data:t,error:a}=await s;if(console.log("\uD83D\uDCCA Query Results:",{userCount:t?.length||0,users:t?.map(e=>({email:e.email,role:e.tenant_users?.[0]?.role}))||[]}),a)throw console.error("Error loading users:",a),a;let r=t?.map(e=>{let s=e.tenant_users[0]||{},t=s.tenants||{};return{id:e.id,email:e.email||"N/A",full_name:e.full_name||"Unknown",phone:e.phone,department:e.department,job_title:e.job_title,role:s.role||"user",role_level:s.role_level,tenant_id:s.tenant_id,tenant_name:t.name||"No Tenant",is_active:s.is_active??!0,status:e.status||"active",created_at:e.created_at,last_sign_in_at:e.last_sign_in_at,can_invite_users:s.can_invite_users||!1,can_manage_sub_clients:s.can_manage_sub_clients||!1,permission_scope:s.permission_scope||"own",requires_password_change:s.requires_password_change||!1,is_primary_tenant:s.is_primary_tenant||!1}})||[];k(r)}catch(e){throw console.error("Error loading users:",e),e}},eo=async()=>{try{let{data:e,error:s}=await N.ND.from("tenants").select("*").eq("is_active",!0).order("name");if(s)throw s;P(e||[])}catch(e){throw console.error("Error loading tenants:",e),e}},em=async()=>{try{let e=N.ND.from("user_invitations").select(`
          *,
          tenants(name),
          invited_by_profile:profiles!user_invitations_invited_by_fkey(full_name)
        `).order("created_at",{ascending:!1});!er&&w&&(e=e.eq("tenant_id",w.id));let{data:s,error:t}=await e;if(t)throw t;let a=s?.map(e=>({id:e.id,email:e.email,full_name:e.full_name,tenant_name:e.tenants?.name||"Unknown Tenant",role:e.role,status:e.status,created_at:e.created_at,expires_at:e.expires_at,invited_by_name:e.invited_by_profile?.full_name||"Unknown"}))||[];U(a)}catch(e){throw console.error("Error loading invitations:",e),e}},ex=async()=>{try{let s=N.ND.from("admin_notifications").select("*").order("created_at",{ascending:!1}).limit(50);!er&&e?.id&&(s=s.eq("admin_id",e.id));let{data:t,error:a}=await s;if(a)throw a;$(t||[])}catch(e){throw console.error("Error loading notifications:",e),e}},eu=A.filter(e=>{let s=e.full_name.toLowerCase().includes(M.toLowerCase())||e.email.toLowerCase().includes(M.toLowerCase()),t="all"===Z||e.role===Z,a="all"===F||e.status===F;return s&&t&&a}),eh={totalUsers:A.length,activeUsers:A.filter(e=>e.is_active&&"active"===e.status).length,pendingUsers:A.filter(e=>"pending_assignment"===e.status).length,pendingInvites:E.filter(e=>"pending"===e.status).length,unreadNotifications:R.filter(e=>!e.is_read).length},ep=A.reduce((e,s)=>(e[s.role]=(e[s.role]||0)+1,e),{});return(console.log("\uD83D\uDD0D Final Access Check:",{canManageUsers:ei,isHostAdmin:er,isClientAdmin:el,isDemoUser:en,userEmail:e?.email,userRole:ea,tenantUserRole:_?.role,isAuthenticated:s,isDemoMode:t}),ei)?(console.log("✅ Access granted - rendering Access Control page"),(0,a.jsxs)(i.A,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Access Control & Security"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Comprehensive user management, RBAC, and security controls"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)(d.$,{onClick:()=>J(!0),variant:"outline",className:"flex items-center space-x-2",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Invite User"})]}),(0,a.jsxs)(d.$,{onClick:()=>G(!0),className:"flex items-center space-x-2",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Create User"})]})]})]}),T&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(o.A,{className:"h-5 w-5 text-red-400"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,a.jsx)("p",{className:"text-sm text-red-700 mt-1",children:T}),(0,a.jsxs)(d.$,{onClick:ec,variant:"outline",size:"sm",className:"mt-2",children:[(0,a.jsx)(u,{className:"h-4 w-4 mr-2"}),"Retry"]})]})]})}),(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Overview",icon:h.A},{id:"users",label:"Users",icon:p.A},{id:"roles",label:"Roles & Permissions",icon:g.A},{id:"invites",label:"Invitations",icon:m.A},{id:"notifications",label:"Notifications",icon:o.A}].map(e=>(0,a.jsxs)("button",{onClick:()=>et(e.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${es===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,a.jsx)(e.icon,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.label}),"notifications"===e.id&&eh.unreadNotifications>0&&(0,a.jsx)("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1",children:eh.unreadNotifications})]},e.id))})}),"overview"===es&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(p.A,{className:"h-8 w-8 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:eh.totalUsers})]})]})})}),(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(j.A,{className:"h-8 w-8 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:eh.activeUsers})]})]})})}),(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(v.A,{className:"h-8 w-8 text-yellow-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Pending Assignment"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:eh.pendingUsers})]})]})})}),(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(m.A,{className:"h-8 w-8 text-purple-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Pending Invites"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:eh.pendingInvites})]})]})})}),(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(o.A,{className:"h-8 w-8 text-red-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Notifications"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:eh.unreadNotifications})]})]})})})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Role Distribution"}),(0,a.jsx)(c.BT,{children:"Current user distribution across roles and levels"})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(ep).map(([e,s])=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-medium capitalize",children:e.replace("_"," ")})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[s," users"]}),(0,a.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s/eh.totalUsers*100}%`}})})]})]},e))})})]})]}),"users"===es&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search users...",value:M,onChange:e=>z(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})}),(0,a.jsxs)("select",{value:Z,onChange:e=>B(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Roles"}),(0,a.jsx)("option",{value:"host_admin",children:"Host Admin"}),(0,a.jsx)("option",{value:"client_admin",children:"Client Admin"}),(0,a.jsx)("option",{value:"user",children:"User"})]}),(0,a.jsxs)("select",{value:F,onChange:e=>W(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"pending_assignment",children:"Pending Assignment"}),(0,a.jsx)("option",{value:"suspended",children:"Suspended"})]}),(0,a.jsx)(d.$,{onClick:ec,variant:"outline",disabled:D,children:(0,a.jsx)(u,{className:`h-4 w-4 ${D?"animate-spin":""}`})})]}),(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-0",children:D?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(u,{className:"h-8 w-8 animate-spin text-gray-400"})}):0===eu.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(p.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Users Found"}),(0,a.jsx)("p",{className:"text-gray-500",children:0===A.length?"No users have been created yet.":"No users match your search criteria."}),0===A.length&&(0,a.jsxs)(d.$,{onClick:()=>G(!0),className:"mt-4",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Create First User"]})]})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role & Tenant"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:eu.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.full_name.charAt(0).toUpperCase()})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.full_name,e.is_primary_tenant&&(0,a.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Primary"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),e.job_title&&(0,a.jsx)("div",{className:"text-xs text-gray-400",children:e.job_title})]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900 capitalize",children:e.role.replace("_"," ")}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.tenant_name}),e.role_level&&(0,a.jsx)("div",{className:"text-xs text-gray-400 capitalize",children:e.role_level.replace("_"," ")})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.is_active&&"active"===e.status?"bg-green-100 text-green-800":"pending_assignment"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:e.is_active&&"active"===e.status?"Active":"pending_assignment"===e.status?"Pending":"Inactive"}),e.requires_password_change&&(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Password Reset Required"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.last_sign_in_at?new Date(e.last_sign_in_at).toLocaleDateString():"Never"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.$,{onClick:()=>{ee(e),V(!0)},variant:"outline",size:"sm",children:(0,a.jsx)(b.A,{className:"h-4 w-4"})}),(0,a.jsx)(d.$,{onClick:()=>{ee(e),Q(!0)},variant:"outline",size:"sm",children:(0,a.jsx)(y.A,{className:"h-4 w-4"})})]})})]},e.id))})]})})})})]}),"invites"===es&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Pending Invitations"}),(0,a.jsx)(c.BT,{children:"Manage user invitations and track their status"})]}),(0,a.jsx)(c.Wu,{children:0===E.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(m.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Invitations"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No user invitations have been sent yet."})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invitee"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role & Tenant"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invited By"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.full_name||"N/A"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900 capitalize",children:e.role.replace("_"," ")}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.tenant_name})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"pending"===e.status?"bg-yellow-100 text-yellow-800":"accepted"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.invited_by_name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.expires_at).toLocaleDateString()})]},e.id))})]})})})]})})]}),O&&(0,a.jsx)(S,{isOpen:O,onClose:()=>G(!1),onSuccess:()=>{ec(),G(!1)},tenants:C}),H&&(0,a.jsx)(q,{isOpen:H,onClose:()=>J(!1),onSuccess:()=>{ec(),J(!1)},tenants:C})]})):(console.log("❌ Access denied - canManageUsers is false"),(0,a.jsx)(i.A,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-500",children:"You don't have permission to access user management."})]})})}))}},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32773:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19377).A)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},33873:e=>{"use strict";e.exports=require("path")},37907:(e,s,t)=>{Promise.resolve().then(t.bind(t,27320))},42633:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19377).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},49987:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19377).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},53106:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19377).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},78520:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(19377).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},84763:(e,s,t)=>{Promise.resolve().then(t.bind(t,16973))}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[4447,197,1147,3626,897,2001],()=>t(23323));module.exports=a})();