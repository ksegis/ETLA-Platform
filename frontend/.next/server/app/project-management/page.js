(()=>{var e={};e.id=920,e.ids=[920],e.modules={453:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9377).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},572:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/ubuntu/ETLA-Platform/frontend/src/app/project-management/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/ETLA-Platform/frontend/src/app/project-management/page.tsx","default")},777:(e,s,t)=>{Promise.resolve().then(t.bind(t,572))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},1787:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9377).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1997:e=>{"use strict";e.exports=require("punycode")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},5396:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var r=t(687),a=t(3210),l=t(6189),i=t(411),n=t(8520),c=t(1787),d=t(3435),o=t(9987),x=t(3682),u=t(9362),m=t(9235),h=t(761),p=t(9145),j=t(9720),g=t(6073),v=t(983),f=t(453),y=t(7130),N=t(6228);let b=(0,t(9377).A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var w=t(2643),k=t(8749),C=t(351),A=t(4870),q=t(6075);function _({isOpen:e,onClose:s,workRequest:t,onApprovalComplete:l}){let[c,d]=(0,a.useState)(null),[x,m]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[j,g]=(0,a.useState)(!1);if(!e||!t)return null;let v=async()=>{if(c)try{let e;switch(g(!0),c){case"review":e=await q.K.setWorkRequestUnderReview(t.id);break;case"approve":e=await q.K.approveWorkRequest(t.id,h);break;case"decline":if(!x.trim())return void alert("Please provide a reason for declining");e=await q.K.declineWorkRequest(t.id,x.trim());break;default:return}e.success?(console.log(`✅ Work request ${c} successful`),l(),s(),f()):(console.error(`❌ Work request ${c} failed:`,e.error),alert(`Failed to ${c} work request: ${e.error}`))}catch(e){console.error(`❌ Error during ${c}:`,e),alert(`Error during ${c}: ${e}`)}finally{g(!1)}},f=()=>{d(null),m(""),p(""),g(!1)};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)(k.Zp,{children:[(0,r.jsxs)(k.aR,{children:[(0,r.jsxs)(k.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(u.A,{className:"h-5 w-5 text-blue-500"}),"Work Request Approval"]}),(0,r.jsxs)(k.BT,{children:['Review and take action on work request: "',t.title,'"']})]}),(0,r.jsxs)(k.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:"Request Details"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Title:"})," ",t.title]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Description:"})," ",t.description]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Priority:"}),(0,r.jsx)("span",{className:`ml-2 px-2 py-1 rounded text-xs ${"urgent"===t.priority?"bg-red-100 text-red-800":"high"===t.priority?"bg-orange-100 text-orange-800":"medium"===t.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:t.priority})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Requested By:"})," ",t.requested_by_name||t.requested_by]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Customer:"})," ",t.customer_name||"Unknown"]}),t.estimated_cost&&(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Estimated Cost:"})," $",t.estimated_cost.toLocaleString()]}),t.estimated_hours&&(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Estimated Hours:"})," ",t.estimated_hours]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold mb-3",children:"Choose Action"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,r.jsxs)(w.$,{onClick:()=>d("review"),variant:"review"===c?"default":"outline",className:"flex items-center gap-2 justify-start p-4 h-auto",children:[(0,r.jsx)(o.A,{className:"h-5 w-5 text-yellow-500"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"font-medium",children:"Set Under Review"}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Mark for detailed review and analysis"})]})]}),(0,r.jsxs)(w.$,{onClick:()=>d("approve"),variant:"approve"===c?"default":"outline",className:"flex items-center gap-2 justify-start p-4 h-auto",children:[(0,r.jsx)(u.A,{className:"h-5 w-5 text-green-500"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"font-medium",children:"Approve & Create Project"}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Approve request and automatically create project charter"})]})]}),(0,r.jsxs)(w.$,{onClick:()=>d("decline"),variant:"decline"===c?"default":"outline",className:"flex items-center gap-2 justify-start p-4 h-auto",children:[(0,r.jsx)(A.A,{className:"h-5 w-5 text-red-500"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"font-medium",children:"Decline Request"}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Reject the request with explanation"})]})]})]})]}),"approve"===c&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Approver Comments (Optional)"}),(0,r.jsx)("textarea",{value:h,onChange:e=>p(e.target.value),placeholder:"Add any comments about the approval...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),"decline"===c&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Decline Reason *"}),(0,r.jsx)("textarea",{value:x,onChange:e=>m(e.target.value),placeholder:"Please explain why this request is being declined...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,required:!0})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)(w.$,{onClick:v,disabled:!c||j||"decline"===c&&!x.trim(),className:`flex-1 ${(()=>{switch(c){case"approve":return"bg-green-600 hover:bg-green-700";case"decline":return"bg-red-600 hover:bg-red-700";case"review":return"bg-yellow-600 hover:bg-yellow-700";default:return"bg-gray-400"}})()}`,children:(()=>{if(j)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]});switch(c){case"review":return"Set Under Review";case"approve":return"Approve & Create Project";case"decline":return"Decline Request";default:return"Select Action"}})()}),(0,r.jsx)(w.$,{onClick:()=>{f(),s()},variant:"outline",disabled:j,children:"Cancel"})]}),c&&(0,r.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(n.A,{className:"h-4 w-4 text-blue-500 mt-0.5"}),(0,r.jsxs)("div",{className:"text-sm",children:["review"===c&&(0,r.jsx)("span",{children:'This will mark the request as "Under Review" for detailed analysis.'}),"approve"===c&&(0,r.jsx)("span",{children:'This will approve the request and automatically create a project charter. The request status will change to "Converted to Project".'}),"decline"===c&&(0,r.jsx)("span",{children:'This will decline the request with the provided reason. The request status will change to "Declined".'})]})]})})]})]})})})}var R=t(7755);function $({isOpen:e,onClose:s,workRequestId:t,workRequestTitle:l,onCustomerFixed:d}){let[o,x]=(0,a.useState)("choose"),[u,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)([]),[j,g]=(0,a.useState)(""),[v,f]=(0,a.useState)(""),[y,N]=(0,a.useState)(""),[b,C]=(0,a.useState)(""),[A,_]=(0,a.useState)(""),$=async()=>{if(!j.trim())return void alert("Customer name is required");try{m(!0);let e=await q.K.createMissingCustomer(j.trim(),v.trim());if(!e||!e.success||!e.customerId)return void alert(e?.error||"Failed to create customer");let r=await q.K.linkWorkRequestToCustomer(t,e.customerId);if(!r||!r.success)return void alert(r?.error||"Failed to link work request");console.log("✅ Customer created and linked successfully"),d(),s()}catch(e){console.error("Error creating customer:",e),alert("Failed to create customer")}finally{m(!1)}},P=async()=>{if(!A)return void alert("Please select a customer");try{m(!0);let e=await q.K.linkWorkRequestToCustomer(t,A);if(!e||!e.success)return void alert(e?.error||"Failed to link work request");console.log("✅ Work request linked to existing customer successfully"),d(),s()}catch(e){console.error("Error linking customer:",e),alert("Failed to link customer")}finally{m(!1)}},S=()=>{g(""),f(""),N(""),C(""),_(""),x("choose")};return e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)(k.Zp,{className:"w-full max-w-md mx-4",children:[(0,r.jsxs)(k.aR,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(n.A,{className:"h-5 w-5 text-amber-500"}),(0,r.jsx)(k.ZB,{children:"Missing Customer"})]}),(0,r.jsxs)(k.BT,{children:['Work request "',l,'" needs a customer assigned']})]}),(0,r.jsxs)(k.Wu,{className:"space-y-4",children:["choose"===o&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"How would you like to resolve this?"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(w.$,{onClick:()=>x("create"),className:"w-full justify-start",variant:"outline",children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Create New Customer"]}),(0,r.jsxs)(w.$,{onClick:()=>x("link"),className:"w-full justify-start",variant:"outline",children:[(0,r.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"Link to Existing Customer"]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(w.$,{onClick:()=>{S(),s()},variant:"ghost",children:"Cancel"})})]}),"create"===o&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Customer Name *"}),(0,r.jsx)("input",{type:"text",value:j,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border rounded-md",placeholder:"Enter customer name"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Email"}),(0,r.jsx)("input",{type:"email",value:v,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border rounded-md",placeholder:"Enter email address"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Phone"}),(0,r.jsx)("input",{type:"tel",value:y,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border rounded-md",placeholder:"Enter phone number"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Address"}),(0,r.jsx)("textarea",{value:b,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border rounded-md",placeholder:"Enter address",rows:2})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)(w.$,{onClick:()=>x("choose"),variant:"ghost",children:"Back"}),(0,r.jsxs)(w.$,{onClick:$,disabled:u||!j.trim(),children:[u&&(0,r.jsx)(i.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Create & Link"]})]})]}),"link"===o&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Select Customer"}),u?(0,r.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,r.jsx)(i.A,{className:"h-4 w-4 animate-spin mr-2"}),"Loading customers..."]}):(0,r.jsxs)("select",{value:A,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 border rounded-md",children:[(0,r.jsx)("option",{value:"",children:"Choose a customer..."}),h.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)(w.$,{onClick:()=>x("choose"),variant:"ghost",children:"Back"}),(0,r.jsxs)(w.$,{onClick:P,disabled:u||!A,children:[u&&(0,r.jsx)(i.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Link Customer"]})]})]})]})]})}):null}var P=t(3732);function S(){let e=(0,l.useRouter)(),s=(0,P.As)(),[t,A]=(0,a.useState)({workRequests:[],projects:[],risks:[]}),[R,S]=(0,a.useState)(!0),[E,T]=(0,a.useState)(null),[W,L]=(0,a.useState)("work-requests"),[B,M]=(0,a.useState)(""),[Z,z]=(0,a.useState)("all"),[D,F]=(0,a.useState)(!1),[K,I]=(0,a.useState)(null),[U,O]=(0,a.useState)(!1),[G,H]=(0,a.useState)(null),V=async()=>{try{S(!0),T(null),console.log("\uD83D\uDCCA Loading dashboard data with stable auth:",{userId:s.user?.id,tenantId:s.tenant?.id,isStable:s.isStable});let[e,t,r]=await Promise.all([q.K.getWorkRequests(),q.K.getProjects(),q.K.getRisks()]);A({workRequests:e,projects:t,risks:r}),console.log("✅ Dashboard data loaded successfully:",{workRequests:e.length,projects:t.length,risks:r.length})}catch(e){console.error("❌ Error loading dashboard data:",e),T("Failed to load dashboard data")}finally{S(!1)}},X=e=>{let s=e.approval_status||e.status,t="submitted"===s||"under_review"===s;return console.log(`🔍 Approval check for "${e.title}": {
      id: "${e.id}",
      status: "${e.status}", 
      approval_status: ${e.approval_status||"undefined"},
      effectiveStatus: "${s}",
      canApprove: ${t}
    }`),t},J=e=>{console.log("\uD83D\uDD0D Opening approval modal for request:",e.id),I(e),F(!0)},Q=e=>{console.log("\uD83D\uDD27 Opening missing customer modal for request:",e.id),H(e),O(!0)},Y=()=>t.workRequests.filter(e=>{let s=e.title.toLowerCase().includes(B.toLowerCase())||e.customer_name?.toLowerCase().includes(B.toLowerCase());if("all"===Z)return s;let t=e.approval_status||e.status;return s&&t===Z}),ee=()=>t.projects.filter(e=>{let s=e.title.toLowerCase().includes(B.toLowerCase());return"all"===Z?s:s&&e.status===Z}),es=()=>t.risks.filter(e=>{let s=e.title.toLowerCase().includes(B.toLowerCase());return"all"===Z?s:s&&e.status===Z}),et=(()=>{let e=t.workRequests;return{total:e.length,pending:e.filter(e=>{let s=e.approval_status||e.status;return"submitted"===s||"under_review"===s}).length,active:e.filter(e=>{let s=e.approval_status||e.status;return"approved"===s||"in_progress"===s||"converted_to_project"===s}).length,completed:e.filter(e=>"completed"===(e.approval_status||e.status)).length}})(),er=e=>{switch(e){case"submitted":case"in_progress":return"bg-blue-100 text-blue-800";case"under_review":return"bg-yellow-100 text-yellow-800";case"approved":case"converted_to_project":case"completed":return"bg-green-100 text-green-800";case"declined":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return R?(0,r.jsx)(C.A,{children:(0,r.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,r.jsx)(i.A,{className:"h-8 w-8 animate-spin"}),(0,r.jsx)("span",{className:"ml-2",children:"Loading dashboard data..."})]})}):E?(0,r.jsx)(C.A,{children:(0,r.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,r.jsx)(n.A,{className:"h-8 w-8 text-red-500"}),(0,r.jsx)("span",{className:"ml-2 text-red-600",children:E}),(0,r.jsx)(w.$,{onClick:V,className:"ml-4",children:"Retry"})]})}):(0,r.jsxs)(C.A,{children:[(0,r.jsxs)("div",{className:"p-6 lg:p-8",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Project Management"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"PMBOK-compliant project management dashboard"})]}),(0,r.jsxs)(w.$,{onClick:()=>e.push("/work-requests/new"),className:"flex items-center gap-2",children:[(0,r.jsx)(c.A,{className:"h-4 w-4"}),"New Work Request"]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)(k.Zp,{children:(0,r.jsx)(k.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Requests"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:et.total})]}),(0,r.jsx)(d.A,{className:"h-8 w-8 text-blue-500"})]})})}),(0,r.jsx)(k.Zp,{children:(0,r.jsx)(k.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:et.pending})]}),(0,r.jsx)(o.A,{className:"h-8 w-8 text-yellow-500"})]})})}),(0,r.jsx)(k.Zp,{children:(0,r.jsx)(k.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Projects"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:et.active})]}),(0,r.jsx)(x.A,{className:"h-8 w-8 text-green-500"})]})})}),(0,r.jsx)(k.Zp,{children:(0,r.jsx)(k.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:et.completed})]}),(0,r.jsx)(u.A,{className:"h-8 w-8 text-blue-500"})]})})})]}),(0,r.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,r.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"work-requests",label:"Work Requests",icon:d.A},{id:"projects",label:"Projects",icon:m.A},{id:"charter",label:"Charter",icon:d.A},{id:"wbs",label:"WBS",icon:m.A},{id:"schedule",label:"Schedule",icon:h.A},{id:"evm",label:"EVM",icon:p.A},{id:"risks",label:"Risks",icon:j.A},{id:"stakeholders",label:"Stakeholders",icon:g.A},{id:"compliance",label:"Compliance",icon:u.A}].map(e=>{let s=e.icon;return(0,r.jsxs)("button",{onClick:()=>L(e.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${W===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,r.jsx)(s,{className:"h-4 w-4"}),e.label]},e.id)})})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(v.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Search...",value:B,onChange:e=>M(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(f.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,r.jsxs)("select",{value:Z,onChange:e=>z(e.target.value),className:"pl-10 pr-8 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"All Status"}),(0,r.jsx)("option",{value:"submitted",children:"Submitted"}),(0,r.jsx)("option",{value:"under_review",children:"Under Review"}),(0,r.jsx)("option",{value:"approved",children:"Approved"}),(0,r.jsx)("option",{value:"declined",children:"Declined"}),(0,r.jsx)("option",{value:"converted_to_project",children:"Converted to Project"}),(0,r.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,r.jsx)("option",{value:"completed",children:"Completed"})]})]})]}),"work-requests"===W&&(0,r.jsxs)(k.Zp,{children:[(0,r.jsxs)(k.aR,{children:[(0,r.jsx)(k.ZB,{children:"Work Requests"}),(0,r.jsx)(k.BT,{children:"Manage and review work requests"})]}),(0,r.jsx)(k.Wu,{children:(0,r.jsxs)("div",{className:"overflow-x-auto",children:[(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Title"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Customer"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Priority"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Status"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Created"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:Y().map(s=>{console.log(`🔍 RENDERING ACTIONS for request: ${s.id} ${s.title}`);let t=s.approval_status||s.status,a="Missing Customer"===s.customer_name;return(0,r.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"py-3 px-4",children:[(0,r.jsx)("div",{className:"font-medium",children:s.title}),s.description&&(0,r.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:s.description})]}),(0,r.jsxs)("td",{className:"py-3 px-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[s.customer_name||"Unknown",a&&(0,r.jsx)(w.$,{onClick:()=>Q(s),size:"sm",variant:"outline",className:"text-orange-600 border-orange-300 hover:bg-orange-50",children:"Fix"})]}),a&&(0,r.jsx)("div",{className:"text-xs text-orange-600 mt-1",children:"⚠️ Customer data missing"})]}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"urgent"===s.priority?"bg-red-100 text-red-800":"high"===s.priority?"bg-orange-100 text-orange-800":"medium"===s.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:s.priority})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${er(t)}`,children:t.replace("_"," ")})}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(w.$,{onClick:()=>e.push(`/work-requests/${s.id}`),size:"sm",variant:"outline",children:(0,r.jsx)(y.A,{className:"h-4 w-4"})}),(0,r.jsx)(w.$,{onClick:()=>alert("Edit functionality coming soon"),size:"sm",variant:"outline",children:(0,r.jsx)(N.A,{className:"h-4 w-4"})}),X(s)&&(0,r.jsx)(w.$,{onClick:()=>J(s),size:"sm",className:"bg-green-600 hover:bg-green-700",children:(0,r.jsx)(b,{className:"h-4 w-4"})})]})})]},s.id)})})]}),0===Y().length&&(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No work requests found matching your criteria."})]})})]}),"projects"===W&&(0,r.jsxs)(k.Zp,{children:[(0,r.jsxs)(k.aR,{children:[(0,r.jsx)(k.ZB,{children:"Project Charters"}),(0,r.jsx)(k.BT,{children:"Active project charters and their status"})]}),(0,r.jsx)(k.Wu,{children:(0,r.jsxs)("div",{className:"overflow-x-auto",children:[(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Project Name"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Manager"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Status"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Budget"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:ee().map(e=>(0,r.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"py-3 px-4",children:[(0,r.jsx)("div",{className:"font-medium",children:e.title}),(0,r.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.project_manager}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${er(e.status)}`,children:e.status.replace("_"," ")})}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.budget?`$${e.budget.total_budget.toLocaleString()}`:"N/A"}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(w.$,{size:"sm",variant:"outline",children:(0,r.jsx)(y.A,{className:"h-4 w-4"})}),(0,r.jsx)(w.$,{size:"sm",variant:"outline",children:(0,r.jsx)(N.A,{className:"h-4 w-4"})})]})})]},e.id))})]}),0===ee().length&&(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No projects found matching your criteria."})]})})]}),"risks"===W&&(0,r.jsxs)(k.Zp,{children:[(0,r.jsxs)(k.aR,{children:[(0,r.jsx)(k.ZB,{children:"Risk Register"}),(0,r.jsx)(k.BT,{children:"Project risks and mitigation strategies"})]}),(0,r.jsx)(k.Wu,{children:(0,r.jsxs)("div",{className:"overflow-x-auto",children:[(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Risk"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Category"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Probability"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Impact"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Score"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Status"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:es().map(e=>(0,r.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"py-3 px-4",children:[(0,r.jsx)("div",{className:"font-medium",children:e.title}),(0,r.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.category}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.probability}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.impact}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.risk_score>=15?"bg-red-100 text-red-800":e.risk_score>=10?"bg-orange-100 text-orange-800":e.risk_score>=5?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:e.risk_score})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${er(e.status)}`,children:e.status.replace("_"," ")})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(w.$,{size:"sm",variant:"outline",children:(0,r.jsx)(y.A,{className:"h-4 w-4"})}),(0,r.jsx)(w.$,{size:"sm",variant:"outline",children:(0,r.jsx)(N.A,{className:"h-4 w-4"})})]})})]},e.id))})]}),0===es().length&&(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No risks found matching your criteria."})]})})]}),!["work-requests","projects","risks"].includes(W)&&(0,r.jsxs)(k.Zp,{children:[(0,r.jsxs)(k.aR,{children:[(0,r.jsx)(k.ZB,{children:W.charAt(0).toUpperCase()+W.slice(1).replace("-"," ")}),(0,r.jsx)(k.BT,{children:"This section is coming soon"})]}),(0,r.jsx)(k.Wu,{children:(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[W.charAt(0).toUpperCase()+W.slice(1).replace("-"," ")," functionality will be available in a future update."]})})]})]}),(0,r.jsx)(_,{isOpen:D,onClose:()=>F(!1),workRequest:K,onApprovalComplete:()=>{console.log("✅ Approval completed, refreshing data"),V()}}),(0,r.jsx)($,{isOpen:U,onClose:()=>O(!1),workRequestId:G?.id||"",workRequestTitle:G?.title||"",onCustomerFixed:()=>{console.log("✅ Customer fixed, refreshing data"),V()}})]})}},5591:e=>{"use strict";e.exports=require("https")},7755:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9377).A)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},7910:e=>{"use strict";e.exports=require("stream")},8399:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d});var r=t(5239),a=t(8088),l=t(8170),i=t.n(l),n=t(893),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d={children:["",{children:["project-management",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,572)),"/home/ubuntu/ETLA-Platform/frontend/src/app/project-management/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4431)),"/home/ubuntu/ETLA-Platform/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/home/ubuntu/ETLA-Platform/frontend/src/app/project-management/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/project-management/page",pathname:"/project-management",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9246:(e,s,t)=>{Promise.resolve().then(t.bind(t,5396))},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[197,147,805,906,149],()=>t(8399));module.exports=r})();