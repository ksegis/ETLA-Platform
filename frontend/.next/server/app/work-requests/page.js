(()=>{var e={};e.id=415,e.ids=[415],e.modules={651:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var r=t(687),l=t(3210),n=t(9987),a=t(8520),i=t(9362),o=t(4870),d=t(1787),c=t(983),u=t(7130),x=t(6228),m=t(9082),h=t(2643),p=t(1907),g=t(8749),b=t(6257),f=t(6391),j=t(3732),v=t(1523);let y={draft:{icon:n.A,color:"text-gray-600",bg:"bg-gray-100",label:"Draft"},submitted:{icon:n.A,color:"text-blue-600",bg:"bg-blue-100",label:"Submitted"},under_review:{icon:a.A,color:"text-yellow-600",bg:"bg-yellow-100",label:"Under Review"},approved:{icon:i.A,color:"text-green-600",bg:"bg-green-100",label:"Approved"},declined:{icon:o.A,color:"text-red-600",bg:"bg-red-100",label:"Declined"},in_progress:{icon:n.A,color:"text-indigo-600",bg:"bg-indigo-100",label:"In Progress"},completed:{icon:i.A,color:"text-green-600",bg:"bg-green-100",label:"Completed"},cancelled:{icon:o.A,color:"text-gray-600",bg:"bg-gray-100",label:"Cancelled"}},N={low:{color:"text-gray-600",bg:"bg-gray-100",label:"Low"},medium:{color:"text-yellow-600",bg:"bg-yellow-100",label:"Medium"},high:{color:"text-orange-600",bg:"bg-orange-100",label:"High"},critical:{color:"text-red-600",bg:"bg-red-100",label:"Critical"}};function w(){let[e,s]=(0,l.useState)([]),[t,o]=(0,l.useState)([]),[w,A]=(0,l.useState)(!0),[k,q]=(0,l.useState)(null),[_,C]=(0,l.useState)(""),[P,D]=(0,l.useState)(""),[E,S]=(0,l.useState)(""),[R,L]=(0,l.useState)({total:0,submitted:0,under_review:0,approved:0,in_progress:0,completed:0}),{user:T}=(0,j.h)(),{selectedTenant:M}=(0,v.K)(),$=async()=>{if(!M?.id){console.log("No tenant selected, skipping load"),A(!1);return}try{A(!0),q(null),console.log("Loading work requests for tenant:",M.id,M.name);let{data:e,error:t}=await f.ND.from("work_requests").select("*").eq("tenant_id",M.id).order("created_at",{ascending:!1});if(t){console.error("Database query error:",t),console.error("Error details:",JSON.stringify(t,null,2)),console.error("Query was for tenant_id:",M.id),q(`Failed to load work requests: ${t.message||t.details||"Unknown error"}`);return}console.log("Loaded work requests:",e),s(e||[]),o(e||[]);let r={total:e?.length||0,submitted:e?.filter(e=>"submitted"===e.status).length||0,under_review:e?.filter(e=>"under_review"===e.status).length||0,approved:e?.filter(e=>"approved"===e.status).length||0,in_progress:e?.filter(e=>"in_progress"===e.status).length||0,completed:e?.filter(e=>"completed"===e.status).length||0};L(r)}catch(e){console.error("Error loading work requests:",e),q("Failed to load work requests")}finally{A(!1)}},W=e=>new Date(e).toLocaleDateString(),Z=e=>e.customer_id?`Customer ID: ${e.customer_id}`:"No Customer";return M?(0,r.jsx)(b.A,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded-md",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(i.A,{className:"h-5 w-5 text-green-400"})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsxs)("p",{className:"text-sm text-green-700",children:[(0,r.jsx)("strong",{children:"âœ… REAL DATABASE DATA"})," - This page now shows actual work requests from your Supabase database, not mock data.",e.length>0&&(0,r.jsxs)("span",{className:"ml-2",children:["Found ",e.length," real work requests in tenant: ",M?.name]})]})})]})}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-green-900",children:"\uD83D\uDD25 REAL Work Requests (Database Connected)"}),(0,r.jsx)("p",{className:"text-green-700",children:"Manage and track your work requests - NOW WITH REAL DATA!"})]}),(0,r.jsxs)(h.$,{onClick:()=>console.log("Create new request"),className:"bg-green-600 hover:bg-green-700",children:[(0,r.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"New Request"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[(0,r.jsx)(g.Zp,{className:"border-green-200 bg-green-50",children:(0,r.jsx)(g.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Total (REAL)"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-900",children:R.total})]}),(0,r.jsx)(n.A,{className:"h-8 w-8 text-green-500"})]})})}),(0,r.jsx)(g.Zp,{className:"border-blue-200 bg-blue-50",children:(0,r.jsx)(g.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-700",children:"Submitted (DB)"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:R.submitted})]}),(0,r.jsx)(n.A,{className:"h-8 w-8 text-blue-500"})]})})}),(0,r.jsx)(g.Zp,{className:"border-yellow-200 bg-yellow-50",children:(0,r.jsx)(g.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-yellow-700",children:"Under Review (DB)"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-yellow-900",children:R.under_review})]}),(0,r.jsx)(a.A,{className:"h-8 w-8 text-yellow-500"})]})})}),(0,r.jsx)(g.Zp,{className:"border-green-200 bg-green-50",children:(0,r.jsx)(g.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Approved (DB)"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-900",children:R.approved})]}),(0,r.jsx)(i.A,{className:"h-8 w-8 text-green-500"})]})})}),(0,r.jsx)(g.Zp,{className:"border-indigo-200 bg-indigo-50",children:(0,r.jsx)(g.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-indigo-700",children:"In Progress (DB)"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-indigo-900",children:R.in_progress})]}),(0,r.jsx)(n.A,{className:"h-8 w-8 text-indigo-500"})]})})}),(0,r.jsx)(g.Zp,{className:"border-green-200 bg-green-50",children:(0,r.jsx)(g.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Completed (DB)"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-900",children:R.completed})]}),(0,r.jsx)(i.A,{className:"h-8 w-8 text-green-500"})]})})})]}),(0,r.jsx)(g.Zp,{children:(0,r.jsx)(g.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,r.jsx)(p.p,{placeholder:"Search requests...",value:_,onChange:e=>C(e.target.value),className:"pl-10"})]})}),(0,r.jsxs)("select",{value:P,onChange:e=>D(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"All Status"}),(0,r.jsx)("option",{value:"submitted",children:"Submitted"}),(0,r.jsx)("option",{value:"under_review",children:"Under Review"}),(0,r.jsx)("option",{value:"approved",children:"Approved"}),(0,r.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,r.jsx)("option",{value:"completed",children:"Completed"})]}),(0,r.jsxs)("select",{value:E,onChange:e=>S(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"All Priority"}),(0,r.jsx)("option",{value:"low",children:"Low"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"high",children:"High"}),(0,r.jsx)("option",{value:"critical",children:"Critical"})]})]})})}),(0,r.jsxs)(g.Zp,{className:"border-green-200",children:[(0,r.jsxs)(g.aR,{className:"bg-green-50",children:[(0,r.jsx)(g.ZB,{className:"text-green-900",children:"\uD83D\uDD25 REAL Work Requests from Database"}),(0,r.jsxs)(g.BT,{className:"text-green-700",children:[t.length," of ",e.length," requests from Supabase database",M&&(0,r.jsxs)("span",{className:"ml-2",children:["| Tenant: ",M.name]})]})]}),(0,r.jsx)(g.Wu,{children:w?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading work requests..."})]}):k?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-red-600 mb-4",children:k}),(0,r.jsx)(h.$,{onClick:$,children:"Try Again"})]}):0===t.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No work requests found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:0===e.length?"Get started by creating your first work request.":"Try adjusting your search or filter criteria."}),0===e.length&&(0,r.jsxs)(h.$,{onClick:()=>console.log("Create first request"),children:[(0,r.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Create First Request"]})]}):(0,r.jsx)("div",{className:"space-y-4",children:t.map(e=>{let s=y[e.status]?.icon||n.A,t=y[e.status]||y.submitted,l=N[e.priority]||N.medium;return(0,r.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,r.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.bg} ${t.color}`,children:[(0,r.jsx)(s,{className:"w-3 h-3 mr-1"}),t.label]}),(0,r.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${l.bg} ${l.color}`,children:l.label})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,r.jsxs)("span",{children:["Customer: ",Z(e)]}),(0,r.jsxs)("span",{children:["Created: ",W(e.created_at)]}),e.category&&(0,r.jsxs)("span",{children:["Category: ",e.category]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,r.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>console.log("View",e.id),children:(0,r.jsx)(u.A,{className:"h-4 w-4"})}),(0,r.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>console.log("Edit",e.id),children:(0,r.jsx)(x.A,{className:"h-4 w-4"})}),(0,r.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>console.log("Delete",e.id),children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]})]})},e.id)})})})]})]})}):(0,r.jsx)(b.A,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Please select a tenant to view work requests."})})})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1037:(e,s,t)=>{Promise.resolve().then(t.bind(t,1641))},1630:e=>{"use strict";e.exports=require("http")},1641:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/ubuntu/ETLA-Platform/frontend/src/app/work-requests/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/ETLA-Platform/frontend/src/app/work-requests/page.tsx","default")},1787:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9377).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1907:(e,s,t)=>{"use strict";t.d(s,{p:()=>a});var r=t(687),l=t(3210),n=t(4780);let a=l.forwardRef(({className:e,type:s,...t},l)=>(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...t}));a.displayName="Input"},1997:e=>{"use strict";e.exports=require("punycode")},2515:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=t(5239),l=t(8088),n=t(8170),a=t.n(n),i=t(893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let d={children:["",{children:["work-requests",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1641)),"/home/ubuntu/ETLA-Platform/frontend/src/app/work-requests/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4431)),"/home/ubuntu/ETLA-Platform/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/home/ubuntu/ETLA-Platform/frontend/src/app/work-requests/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/work-requests/page",pathname:"/work-requests",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2643:(e,s,t)=>{"use strict";t.d(s,{$:()=>a});var r=t(687),l=t(3210),n=t(4780);let a=l.forwardRef(({className:e,variant:s="default",size:t="default",...l},a)=>(0,r.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"default"===s,"bg-red-600 text-white hover:bg-red-700":"destructive"===s,"border border-gray-300 bg-white hover:bg-gray-50":"outline"===s,"bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===s,"hover:bg-gray-100":"ghost"===s,"text-blue-600 underline-offset-4 hover:underline":"link"===s},{"h-10 px-4 py-2":"default"===t,"h-9 rounded-md px-3":"sm"===t,"h-11 rounded-md px-8":"lg"===t,"h-10 w-10":"icon"===t},e),ref:a,...l}));a.displayName="Button"},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},4870:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9377).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},5591:e=>{"use strict";e.exports=require("https")},6228:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9377).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},7910:e=>{"use strict";e.exports=require("stream")},8520:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9377).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9082:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9377).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9597:(e,s,t)=>{Promise.resolve().then(t.bind(t,651))},9987:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(9377).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[197,147,897,165],()=>t(2515));module.exports=r})();