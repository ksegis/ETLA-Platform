exports.id=897,exports.ids=[897],exports.modules={13732:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>d,h:()=>_});var n=r(60687),a=r(43210),s=r(16391),i=r(51635);class o extends Error{constructor(e,t,r,n){super(e),this.feature=t,this.permission=r,this.userRole=n,this.name="ServiceAuthError"}}let l={host_admin:["*"],program_manager:[`${i.Gv.PROJECT_MANAGEMENT}:${i.Jj.MANAGE}`,`${i.Gv.WORK_REQUESTS}:${i.Jj.MANAGE}`,`${i.Gv.PROJECT_CHARTER}:${i.Jj.MANAGE}`,`${i.Gv.RISK_MANAGEMENT}:${i.Jj.MANAGE}`,`${i.Gv.RESOURCE_MANAGEMENT}:${i.Jj.MANAGE}`,`${i.Gv.REPORTING}:${i.Jj.VIEW}`,`${i.Gv.DASHBOARDS}:${i.Jj.VIEW}`,`${i.Gv.ANALYTICS}:${i.Jj.VIEW}`,`${i.Gv.USER_MANAGEMENT}:${i.Jj.VIEW}`,`${i.Gv.MIGRATION_WORKBENCH}:${i.Jj.VIEW}`,`${i.Gv.DATA_VALIDATION}:${i.Jj.VIEW}`],client_admin:[`${i.Gv.USER_MANAGEMENT}:${i.Jj.MANAGE}`,`${i.Gv.ACCESS_CONTROL}:${i.Jj.VIEW}`,`${i.Gv.PROJECT_MANAGEMENT}:${i.Jj.MANAGE}`,`${i.Gv.WORK_REQUESTS}:${i.Jj.MANAGE}`,`${i.Gv.REPORTING}:${i.Jj.VIEW}`,`${i.Gv.DASHBOARDS}:${i.Jj.VIEW}`,`${i.Gv.BENEFITS_MANAGEMENT}:${i.Jj.MANAGE}`,`${i.Gv.EMPLOYEE_RECORDS}:${i.Jj.MANAGE}`,`${i.Gv.FILE_UPLOAD}:${i.Jj.CREATE}`,`${i.Gv.DATA_VALIDATION}:${i.Jj.VIEW}`,`${i.Gv.MIGRATION_WORKBENCH}:${i.Jj.VIEW}`],client_user:[`${i.Gv.WORK_REQUESTS}:${i.Jj.CREATE}`,`${i.Gv.WORK_REQUESTS}:${i.Jj.VIEW}`,`${i.Gv.WORK_REQUESTS}:${i.Jj.UPDATE}`,`${i.Gv.PROJECT_MANAGEMENT}:${i.Jj.VIEW}`,`${i.Gv.REPORTING}:${i.Jj.VIEW}`,`${i.Gv.DASHBOARDS}:${i.Jj.VIEW}`,`${i.Gv.BENEFITS_MANAGEMENT}:${i.Jj.VIEW}`,`${i.Gv.FILE_UPLOAD}:${i.Jj.CREATE}`]},c=(0,a.createContext)(void 0);function d({children:e}){let[t,r]=(0,a.useState)(null),[i,o]=(0,a.useState)(null),[l,d]=(0,a.useState)(!0),[_,u]=(0,a.useState)(!1),[m,E]=(0,a.useState)(null),[p,A]=(0,a.useState)(null),f=!process.env.NEXT_PUBLIC_SUPABASE_URL||"https://demo.supabase.co"===process.env.NEXT_PUBLIC_SUPABASE_URL||process.env.NEXT_PUBLIC_SUPABASE_URL.includes("placeholder")||process.env.NEXT_PUBLIC_SUPABASE_URL.includes("your-project")||"https://your-project.supabase.co"===process.env.NEXT_PUBLIC_SUPABASE_URL,h=!!t||!!i||f,v=t?.id||p?.user_id||null,T=m?.id||null,g=p?.role||null,S=()=>{},N=async(e,t)=>{try{let{error:r}=await s.ND.auth.signInWithPassword({email:e,password:t});return{error:r}}catch(e){return console.error("❌ AuthProvider: Sign in error:",e),{error:e}}},R=async(e,t)=>{try{let{error:r}=await s.ND.auth.signUp({email:e,password:t});return{error:r}}catch(e){return console.error("❌ AuthProvider: Sign up error:",e),{error:e}}},M=async()=>{console.log("\uD83D\uDD10 AuthProvider: Signing out");try{await s.ND.auth.signOut(),r(null),o(null),A({id:"demo-tenant-user-id",tenant_id:"demo-tenant-id",user_id:"b224935f-732f-4b09-a4a0-16492c5ae563",role:"host_admin",is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),d(!1),u(!0),S()}catch(e){console.error("❌ AuthProvider: Error during sign out:",e)}},I=async()=>{console.log("\uD83D\uDD04 AuthProvider: Refreshing tenant information")},O=async()=>{console.log("\uD83D\uDD04 AuthProvider: Refreshing session");try{let{data:{session:e},error:t}=await s.ND.auth.refreshSession();t?console.error("❌ AuthProvider: Error refreshing session:",t):(o(e),e?.user&&r(e.user))}catch(e){console.error("❌ AuthProvider: Unexpected error refreshing session:",e)}};return(0,n.jsx)(c.Provider,{value:{user:t,tenant:m,tenantUser:p,session:i,loading:l,signIn:N,signUp:R,signOut:M,refreshTenant:I,refreshSession:O,isStable:_,isAuthenticated:h,isDemoMode:f,currentUserId:v,currentTenantId:T,currentUserRole:g},children:e})}function _(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},16391:(e,t,r)=>{"use strict";r.d(t,{Lr:()=>S,ND:()=>g});var n=r(49285);let a=process.env.NEXT_PUBLIC_SUPABASE_URL,s=process.env.NEXT_PUBLIC_SUPABASE_ANON_TOKEN,i="https://demo.supabase.co"===a||"demo_anon_key"===s||!a&&!s,o=[{id:"b224935f-732f-4b09-a4a0-16492c5ae563",email:"demo@company.com",full_name:"Demo Host Admin",phone:"+1-555-0101",department:"IT Administration",job_title:"System Administrator",status:"active",created_at:"2024-01-01T00:00:00Z",last_sign_in_at:"2024-12-01T10:00:00Z",tenant_users:[{role:"host_admin",role_level:"senior",is_active:!0,tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",is_primary_tenant:!0,requires_password_change:!1,permission_scope:"all",can_invite_users:!0,can_manage_sub_clients:!0,tenants:{name:"Demo Company",code:"DEMO"}}]},{id:"user2-id",email:"client.admin@company.com",full_name:"Client Admin User",phone:"+1-555-0102",department:"Operations",job_title:"Operations Manager",status:"active",created_at:"2024-01-02T00:00:00Z",last_sign_in_at:"2024-11-30T15:30:00Z",tenant_users:[{role:"client_admin",role_level:"standard",is_active:!0,tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",is_primary_tenant:!0,requires_password_change:!1,permission_scope:"tenant",can_invite_users:!0,can_manage_sub_clients:!1,tenants:{name:"Demo Company",code:"DEMO"}}]},{id:"user3-id",email:"user@company.com",full_name:"Regular User",phone:"+1-555-0103",department:"Finance",job_title:"Financial Analyst",status:"active",created_at:"2024-01-03T00:00:00Z",last_sign_in_at:"2024-11-29T09:15:00Z",tenant_users:[{role:"user",role_level:"standard",is_active:!0,tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",is_primary_tenant:!0,requires_password_change:!1,permission_scope:"own",can_invite_users:!1,can_manage_sub_clients:!1,tenants:{name:"Demo Company",code:"DEMO"}}]},{id:"user4-id",email:"manager@company.com",full_name:"Project Manager",phone:"+1-555-0104",department:"Project Management",job_title:"Senior Project Manager",status:"active",created_at:"2024-01-04T00:00:00Z",last_sign_in_at:"2024-12-01T08:45:00Z",tenant_users:[{role:"project_manager",role_level:"senior",is_active:!0,tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",is_primary_tenant:!0,requires_password_change:!1,permission_scope:"department",can_invite_users:!0,can_manage_sub_clients:!1,tenants:{name:"Demo Company",code:"DEMO"}}]},{id:"user5-id",email:"analyst@company.com",full_name:"Data Analyst",phone:"+1-555-0105",department:"Analytics",job_title:"Senior Data Analyst",status:"active",created_at:"2024-01-05T00:00:00Z",last_sign_in_at:"2024-11-28T14:20:00Z",tenant_users:[{role:"analyst",role_level:"senior",is_active:!0,tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",is_primary_tenant:!0,requires_password_change:!1,permission_scope:"department",can_invite_users:!1,can_manage_sub_clients:!1,tenants:{name:"Demo Company",code:"DEMO"}}]}],l=[{id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",name:"Demo Company",code:"DEMO",status:"active",tenant_type:"enterprise",is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"}],c=[{id:"invite1-id",email:"newuser@company.com",full_name:"New User",role:"user",status:"pending",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",created_at:"2024-11-25T00:00:00Z",expires_at:"2024-12-25T00:00:00Z",invited_by:"b224935f-732f-4b09-a4a0-16492c5ae563",tenants:{name:"Demo Company"},invited_by_profile:{full_name:"Demo Host Admin"}}],d=[{id:"notif1-id",type:"user_invitation",title:"New User Invitation",message:"A new user invitation has been sent to newuser@company.com",user_id:"b224935f-732f-4b09-a4a0-16492c5ae563",is_read:!1,created_at:"2024-11-25T00:00:00Z",data:{email:"newuser@company.com"}}],_=[{id:"emp1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",first_name:"John",last_name:"Smith",email:"john.smith@company.com",employment_status:"active",home_department:"Engineering",flsa_status:"exempt",union_status:"non_union",eeo_categories:"Professional",job_title:"Senior Software Engineer",created_at:"2024-01-01T00:00:00Z"},{id:"emp2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",first_name:"Sarah",last_name:"Johnson",email:"sarah.johnson@company.com",employment_status:"active",home_department:"Marketing",flsa_status:"non-exempt",union_status:"non_union",eeo_categories:"Professional",job_title:"Marketing Manager",created_at:"2024-01-15T00:00:00Z"},{id:"emp3",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",first_name:"Mike",last_name:"Davis",email:"mike.davis@company.com",employment_status:"active",home_department:"Sales",flsa_status:"exempt",union_status:"non_union",eeo_categories:"Sales",job_title:"Sales Director",created_at:"2024-02-01T00:00:00Z"}],u=[{id:"pay1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",user_id:"emp1",pay_date:"2024-11-30",gross_pay:8500,net_pay:6200,federal_tax_withheld:1200,state_tax_withheld:400,department:"Engineering",regular_hours:80,overtime_hours:5},{id:"pay2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",user_id:"emp2",pay_date:"2024-11-30",gross_pay:6500,net_pay:4800,federal_tax_withheld:900,state_tax_withheld:300,department:"Marketing",regular_hours:80,overtime_hours:2},{id:"pay3",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",user_id:"emp3",pay_date:"2024-11-30",gross_pay:9500,net_pay:6900,federal_tax_withheld:1400,state_tax_withheld:500,department:"Sales",regular_hours:80,overtime_hours:8}],m=[{id:"time1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",user_id:"emp1",total_hours:85,regular_hours:80,overtime_hours:5,holiday_hours:0,approval_status:"approved",department:"Engineering",week_ending:"2024-11-30"},{id:"time2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",user_id:"emp2",total_hours:82,regular_hours:80,overtime_hours:2,holiday_hours:0,approval_status:"approved",department:"Marketing",week_ending:"2024-11-30"},{id:"time3",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",user_id:"emp3",total_hours:88,regular_hours:80,overtime_hours:8,holiday_hours:0,approval_status:"pending",department:"Sales",week_ending:"2024-11-30"}],E=[{id:"job1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",title:"Senior Software Engineer",department:"Engineering",flsa_classification:"exempt",pay_range_min:12e4,pay_range_max:16e4,employee_count:5},{id:"job2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",title:"Marketing Manager",department:"Marketing",flsa_classification:"non-exempt",pay_range_min:7e4,pay_range_max:9e4,employee_count:3},{id:"job3",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",title:"Sales Director",department:"Sales",flsa_classification:"exempt",pay_range_min:1e5,pay_range_max:14e4,employee_count:2}],p=Array.from({length:50},(e,t)=>{let r=["W-2","1099-MISC","1099-NEC"],n=["completed","pending","filed","under_review"],a=["2024","2023","2022","2021"],s=["emp1","emp2","emp3","emp4","emp5"],i=45e3+1e3*t,o=.18+t%5*.02;return{id:`tax${t+1}`,tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",employee_id:s[t%s.length],employee_code:`EMP${String(t+1).padStart(3,"0")}`,form_type:r[t%r.length],tax_year:a[t%a.length],status:n[t%n.length],filing_status:t%2==0?"single":"married",total_wages:i,federal_tax:Math.round(i*o),state_tax:Math.round(.6*o*i),total_taxes_withheld:Math.round(1.6*o*i),created_at:`2024-${String(t%12+1).padStart(2,"0")}-${String(t%28+1).padStart(2,"0")}T00:00:00Z`}}),A=[{id:"ben1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",deduction_type:"Health Insurance",employee_contribution:150,employer_contribution:400,frequency:"monthly",is_garnishment:!1},{id:"ben2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",deduction_type:"401k",employee_contribution:500,employer_contribution:250,frequency:"monthly",is_garnishment:!1}],f=[{id:"comp1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",compliance_type:"OSHA",status:"current",due_date:"2024-12-31",is_overdue:!1},{id:"comp2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",compliance_type:"EEO-1",status:"pending",due_date:"2024-12-15",is_overdue:!1}],h=[{id:"wr1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",title:"Website Redesign Project",description:"Complete redesign of company website with modern UI/UX",category:"Web Development",priority:"high",urgency:"medium",status:"in_progress",customer_id:"cust1",assigned_to:"emp1",estimated_hours:120,actual_hours:45,budget:15e3,created_at:"2024-11-01T00:00:00Z"},{id:"wr2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",title:"Marketing Campaign Analysis",description:"Analyze Q4 marketing campaign performance and ROI",category:"Marketing",priority:"medium",urgency:"low",status:"completed",customer_id:"cust2",assigned_to:"emp2",estimated_hours:40,actual_hours:38,budget:5e3,created_at:"2024-10-15T00:00:00Z"}],v=[{id:"proj1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",work_request_id:"wr1",title:"Website Redesign Implementation",description:"Implementation phase of the website redesign project",status:"in_progress",priority:"high",assigned_team_lead:"emp1",estimated_hours:120,actual_hours:45,budget:15e3,start_date:"2024-11-01",end_date:"2024-12-31",completion_percentage:40,created_at:"2024-11-01T00:00:00Z"},{id:"proj2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",work_request_id:"wr2",title:"Q4 Marketing Analysis",description:"Complete analysis of Q4 marketing campaigns",status:"completed",priority:"medium",assigned_team_lead:"emp2",estimated_hours:40,actual_hours:38,budget:5e3,start_date:"2024-10-15",end_date:"2024-11-15",completion_percentage:100,created_at:"2024-10-15T00:00:00Z"}],T=e=>{switch(e){case"profiles":return o;case"tenants":return l;case"user_invitations":return c;case"admin_notifications":return d;case"employee_comprehensive_report":return _;case"pay_statements_comprehensive_report":return u;case"timecards_comprehensive_report":case"timecards":return m;case"jobs_comprehensive_report":return E;case"tax_records_comprehensive_report":case"tax_records":return p;case"benefits_deductions_comprehensive_report":return A;case"compliance_records_comprehensive_report":return f;case"work_requests":return h;case"projects":return v;default:return[]}},g=i?{from:e=>({select:t=>({eq:(t,r)=>({order:(t,r)=>({limit:t=>Promise.resolve({data:T(e),error:null}),then:t=>t({data:T(e),error:null})}),then:t=>t({data:T(e),error:null})}),in:(t,r)=>({order:(t,r)=>({limit:t=>Promise.resolve({data:T(e),error:null}),then:t=>t({data:T(e),error:null})}),then:t=>t({data:T(e),error:null})}),or:t=>({order:(t,r)=>({limit:t=>Promise.resolve({data:T(e),error:null}),then:t=>t({data:T(e),error:null})}),then:t=>t({data:T(e),error:null})}),order:(t,r)=>({then:t=>t({data:T(e),error:null})}),then:t=>t({data:T(e),error:null})}),insert:e=>Promise.resolve({data:e,error:null}),update:e=>({eq:(t,r)=>Promise.resolve({data:e,error:null})}),delete:()=>({eq:(e,t)=>Promise.resolve({data:null,error:null})})}),auth:{getSession:()=>Promise.resolve({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})}}:(0,n.UU)(a,s),S={createUser:async e=>{try{let{data:t,error:r}=await g.auth.admin.createUser({email:e.email,password:e.password,email_confirm:!0,user_metadata:{full_name:e.full_name,role:e.role,role_level:e.role_level}});if(r)return{success:!1,error:r.message};if(!t.user)return{success:!1,error:"Failed to create user account"};let{error:n}=await g.from("profiles").insert({id:t.user.id,email:e.email,full_name:e.full_name,phone:e.phone,department:e.department,job_title:e.job_title,role:e.role,role_level:e.role_level,tenant_id:e.tenant_id,is_active:!0,can_invite_users:e.can_invite_users,can_manage_sub_clients:e.can_manage_sub_clients,permission_scope:e.permission_scope,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(n)return await g.auth.admin.deleteUser(t.user.id),{success:!1,error:`Profile creation failed: ${n.message}`};let{error:a}=await g.from("tenant_users").insert({tenant_id:e.tenant_id,user_id:t.user.id,role:e.role,role_level:e.role_level,can_invite_users:e.can_invite_users,can_manage_sub_clients:e.can_manage_sub_clients,permission_scope:e.permission_scope,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(a)return await g.auth.admin.deleteUser(t.user.id),await g.from("profiles").delete().eq("id",t.user.id),{success:!1,error:`Tenant assignment failed: ${a.message}`};return{success:!0,data:t.user}}catch(e){return{success:!1,error:e.message||"Failed to create user"}}},inviteUsers:async e=>{try{let t=[];for(let r of e.emails){let{data:n,error:a}=await g.from("user_invitations").insert({email:r,role:e.role,role_level:e.role_level,tenant_id:e.tenant_id,message:e.message,expires_at:new Date(Date.now()+24*e.expires_in_days*36e5).toISOString(),created_at:new Date().toISOString()}).select().single();if(a){console.error(`Failed to create invitation for ${r}:`,a);continue}let{error:s}=await g.auth.admin.inviteUserByEmail(r,{redirectTo:`${window.location.origin}/accept-invitation?token=${n.id}`,data:{role:e.role,role_level:e.role_level,tenant_id:e.tenant_id,invitation_id:n.id}});s?(console.error(`Failed to send invitation email to ${r}:`,s),await g.from("user_invitations").update({status:"failed"}).eq("id",n.id)):t.push(n)}return{success:!0,data:{sent:t.length,total:e.emails.length}}}catch(e){return{success:!1,error:e.message||"Failed to send invitations"}}},updateUser:async(e,t)=>{try{let{error:r}=await g.from("profiles").update({...t,updated_at:new Date().toISOString()}).eq("id",e);if(r)return{success:!1,error:r.message};return{success:!0}}catch(e){return{success:!1,error:e.message||"Failed to update user"}}},deactivateUser:async e=>{try{let{error:t}=await g.from("profiles").update({is_active:!1,updated_at:new Date().toISOString()}).eq("id",e);if(t)return{success:!1,error:t.message};return{success:!0}}catch(e){return{success:!1,error:e.message||"Failed to deactivate user"}}},activateUser:async e=>{try{let{error:t}=await g.from("profiles").update({is_active:!0,updated_at:new Date().toISOString()}).eq("id",e);if(t)return{success:!1,error:t.message};return{success:!0}}catch(e){return{success:!1,error:e.message||"Failed to activate user"}}},resetUserPassword:async(e,t)=>{try{if(t){let{error:r}=await g.auth.admin.updateUserById(e,{password:t});if(r)return{success:!1,error:r.message};return{success:!0}}{let{error:t}=await g.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});if(t)return{success:!1,error:t.message};return{success:!0}}}catch(e){return{success:!1,error:e.message||"Failed to reset password"}}},previewUserCleanup:async e=>{try{let t=0,r=0,n=0;if(e.deleteInactiveUsers){let r=new Date(Date.now()-24*e.inactiveDays*36e5).toISOString(),{count:n}=await g.from("profiles").select("*",{count:"exact",head:!0}).lt("last_login",r).eq("is_active",!0);t=n||0}if(e.deleteUnconfirmedUsers){let t=new Date(Date.now()-24*e.unconfirmedDays*36e5).toISOString(),{count:n}=await g.from("auth.users").select("*",{count:"exact",head:!0}).is("email_confirmed_at",null).lt("created_at",t);r=n||0}if(e.deleteExpiredInvites){let{count:e}=await g.from("user_invitations").select("*",{count:"exact",head:!0}).lt("expires_at",new Date().toISOString()).neq("status","accepted");n=e||0}let a=t+r+n;return{success:!0,data:{inactiveUsers:t,unconfirmedUsers:r,expiredInvites:n,totalToDelete:a}}}catch(e){return{success:!1,error:e.message||"Failed to preview cleanup"}}},executeUserCleanup:async e=>{try{let t=0;if(e.deleteInactiveUsers){let r=new Date(Date.now()-24*e.inactiveDays*36e5).toISOString(),{data:n}=await g.from("profiles").select("id").lt("last_login",r).eq("is_active",!0);if(n&&n.length>0){for(let e of n)await g.auth.admin.deleteUser(e.id);t+=n.length}}if(e.deleteUnconfirmedUsers&&(new Date(Date.now()-24*e.unconfirmedDays*36e5).toISOString(),console.log("Unconfirmed users cleanup would be executed here")),e.deleteExpiredInvites){let{error:e}=await g.from("user_invitations").delete().lt("expires_at",new Date().toISOString()).neq("status","accepted");e&&console.error("Failed to delete expired invites:",e)}return{success:!0,data:{deletedCount:t}}}catch(e){return{success:!1,error:e.message||"Failed to execute cleanup"}}}}},29131:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>a});var n=r(12907);let a=(0,n.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/ETLA-Platform/frontend/src/contexts/AuthContext.tsx","AuthProvider");(0,n.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/ETLA-Platform/frontend/src/contexts/AuthContext.tsx","useAuth"),(0,n.registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/ubuntu/ETLA-Platform/frontend/src/contexts/AuthContext.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/ETLA-Platform/frontend/src/contexts/AuthContext.tsx","default")},34445:(e,t,r)=>{Promise.resolve().then(r.bind(r,29131)),Promise.resolve().then(r.bind(r,39905))},38708:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},39905:(e,t,r)=>{"use strict";r.d(t,{TenantProvider:()=>a});var n=r(12907);let a=(0,n.registerClientReference)(function(){throw Error("Attempted to call TenantProvider() from the server but TenantProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/ETLA-Platform/frontend/src/contexts/TenantContext.tsx","TenantProvider");(0,n.registerClientReference)(function(){throw Error("Attempted to call useTenant() from the server but useTenant is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/ETLA-Platform/frontend/src/contexts/TenantContext.tsx","useTenant"),(0,n.registerClientReference)(function(){throw Error("Attempted to call useCurrentTenantId() from the server but useCurrentTenantId is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/ETLA-Platform/frontend/src/contexts/TenantContext.tsx","useCurrentTenantId"),(0,n.registerClientReference)(function(){throw Error("Attempted to call useAccessibleTenantIds() from the server but useAccessibleTenantIds is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/ETLA-Platform/frontend/src/contexts/TenantContext.tsx","useAccessibleTenantIds"),(0,n.registerClientReference)(function(){throw Error("Attempted to call useMultiTenantMode() from the server but useMultiTenantMode is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/ubuntu/ETLA-Platform/frontend/src/contexts/TenantContext.tsx","useMultiTenantMode")},51635:(e,t,r)=>{"use strict";r.d(t,{Gv:()=>s,Jj:()=>i,Sk:()=>l}),r(60687);var n=r(13732),a=r(43210);let s={MIGRATION_WORKBENCH:"migration-workbench",FILE_UPLOAD:"file-upload",DATA_VALIDATION:"data-validation",EMPLOYEE_DATA_PROCESSING:"employee-data-processing",PROJECT_MANAGEMENT:"project-management",WORK_REQUESTS:"work-requests",PROJECT_CHARTER:"project-charter",RISK_MANAGEMENT:"risk-management",RESOURCE_MANAGEMENT:"resource-management",REPORTING:"reporting",DASHBOARDS:"dashboards",ANALYTICS:"analytics",HISTORICAL_DATA:"historical-data",USER_MANAGEMENT:"user-management",ACCESS_CONTROL:"access-control",TENANT_MANAGEMENT:"tenant-management",SYSTEM_SETTINGS:"system-settings",AUDIT_LOGS:"audit-logs",BENEFITS_MANAGEMENT:"benefits-management",PAYROLL_PROCESSING:"payroll-processing",EMPLOYEE_RECORDS:"employee-records"},i={VIEW:"view",CREATE:"create",UPDATE:"update",DELETE:"delete",MANAGE:"manage",APPROVE:"approve",EXPORT:"export",IMPORT:"import"},o={TENANT:"tenant"};function l(){let{user:e,tenantUser:t,isAuthenticated:r,isDemoMode:l}=(0,n.h)(),[c,d]=(0,a.useState)([]),[_,u]=(0,a.useState)(!0),m=(e,n,a=o.TENANT)=>!!l||!!r&&!!t&&("host_admin"===t.role||c.some(t=>t.feature===e&&t.permission===n)),E=e=>!!l||!!r&&!!t&&("host_admin"===t.role||c.some(t=>t.feature===e)),p=e=>m(e,i.CREATE)||m(e,i.MANAGE),A=e=>m(e,i.UPDATE)||m(e,i.MANAGE),f=e=>m(e,i.DELETE)||m(e,i.MANAGE),h=e=>m(e,i.VIEW)||m(e,i.MANAGE)||p(e)||A(e),v=e=>m(e,i.MANAGE),T=e=>m(e,i.APPROVE)||m(e,i.MANAGE),g=e=>m(e,i.EXPORT)||m(e,i.MANAGE),S=()=>!!r&&!!t&&["host_admin","client_admin"].includes(t.role),N=()=>!!r&&!!t&&"host_admin"===t.role,R=()=>m(s.USER_MANAGEMENT,i.MANAGE),M=()=>E(s.ACCESS_CONTROL)||E(s.USER_MANAGEMENT)||E(s.SYSTEM_SETTINGS);return{hasPermission:m,canAccessFeature:E,getPermissionLevel:e=>l?[i.MANAGE]:r&&t?"host_admin"===t.role?[i.MANAGE]:c.filter(t=>t.feature===e).map(e=>e.permission):[],canCreate:p,canUpdate:A,canDelete:f,canView:h,canManage:v,canApprove:T,canExport:g,canImport:e=>m(e,i.IMPORT)||m(e,i.MANAGE),getAccessibleFeatures:()=>l?Object.values(s):r&&t?"host_admin"===t.role?Object.values(s):Array.from(new Set(c.map(e=>e.feature))):[],getUserPermissions:()=>({workRequests:{view:h(s.WORK_REQUESTS),create:p(s.WORK_REQUESTS),update:A(s.WORK_REQUESTS),approve:T(s.WORK_REQUESTS)},projects:{view:h(s.PROJECT_MANAGEMENT),create:p(s.PROJECT_MANAGEMENT),update:A(s.PROJECT_MANAGEMENT),delete:f(s.PROJECT_MANAGEMENT)},risks:{view:h(s.RISK_MANAGEMENT),manage:v(s.RISK_MANAGEMENT)},users:{view:h(s.USER_MANAGEMENT),manage:R()},reports:{view:h(s.REPORTING),export:g(s.REPORTING)},admin:{access:M(),isAdmin:S(),isHostAdmin:N()}}),isAdmin:S,isHostAdmin:N,canManageUsers:R,canAccessAdmin:M,userPermissions:c,isLoading:_,isDemoMode:l,isAuthenticated:r,currentRole:t?.role,currentUserId:e?.id,currentTenantId:t?.tenant_id}}s.USER_MANAGEMENT,i.MANAGE,s.ACCESS_CONTROL,i.MANAGE,s.TENANT_MANAGEMENT,i.MANAGE,s.SYSTEM_SETTINGS,i.MANAGE,s.AUDIT_LOGS,i.VIEW,s.PROJECT_MANAGEMENT,i.MANAGE,s.WORK_REQUESTS,i.MANAGE,s.REPORTING,i.MANAGE,s.MIGRATION_WORKBENCH,i.MANAGE,s.BENEFITS_MANAGEMENT,i.MANAGE,s.PROJECT_MANAGEMENT,i.MANAGE,s.WORK_REQUESTS,i.MANAGE,s.PROJECT_CHARTER,i.MANAGE,s.RISK_MANAGEMENT,i.MANAGE,s.RESOURCE_MANAGEMENT,i.MANAGE,s.REPORTING,i.VIEW,s.DASHBOARDS,i.VIEW,s.ANALYTICS,i.VIEW,s.USER_MANAGEMENT,i.VIEW,s.MIGRATION_WORKBENCH,i.VIEW,s.DATA_VALIDATION,i.VIEW,s.USER_MANAGEMENT,i.MANAGE,s.ACCESS_CONTROL,i.VIEW,s.PROJECT_MANAGEMENT,i.MANAGE,s.WORK_REQUESTS,i.MANAGE,s.REPORTING,i.VIEW,s.DASHBOARDS,i.VIEW,s.BENEFITS_MANAGEMENT,i.MANAGE,s.EMPLOYEE_RECORDS,i.MANAGE,s.FILE_UPLOAD,i.CREATE,s.DATA_VALIDATION,i.VIEW,s.MIGRATION_WORKBENCH,i.VIEW,s.WORK_REQUESTS,i.CREATE,s.WORK_REQUESTS,i.VIEW,s.WORK_REQUESTS,i.UPDATE,s.PROJECT_MANAGEMENT,i.VIEW,s.REPORTING,i.VIEW,s.DASHBOARDS,i.VIEW,s.BENEFITS_MANAGEMENT,i.VIEW,s.FILE_UPLOAD,i.CREATE,s.ACCESS_CONTROL,i.VIEW,s.USER_MANAGEMENT,i.VIEW,s.WORK_REQUESTS,i.CREATE,s.WORK_REQUESTS,i.VIEW,s.WORK_REQUESTS,i.UPDATE,s.PROJECT_MANAGEMENT,i.VIEW,s.REPORTING,i.VIEW,s.DASHBOARDS,i.VIEW,s.BENEFITS_MANAGEMENT,i.VIEW,s.FILE_UPLOAD,i.CREATE,s.ACCESS_CONTROL,i.VIEW,s.USER_MANAGEMENT,i.VIEW},61135:()=>{},61523:(e,t,r)=>{"use strict";r.d(t,{Ku:()=>c,TenantProvider:()=>l,un:()=>_,wz:()=>d});var n=r(60687),a=r(43210),s=r(16391),i=r(13732);let o=(0,a.createContext)(void 0);function l({children:e}){let{user:t,tenantUser:r,isAuthenticated:l,isDemoMode:c}=(0,i.h)(),[d,_]=(0,a.useState)(null),[u,m]=(0,a.useState)([]),[E,p]=(0,a.useState)(!0),A={id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",name:"Demo Company",domain:"demo.company.com",status:"active",subscription_plan:"professional",subscription_start_date:new Date().toISOString(),max_users:25,current_users:5,settings:{},tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},f=async()=>{if(c){m([A]),_(A),p(!1);return}if(!l||!t){m([]),_(null),p(!1);return}try{if(r?.role==="host_admin"){let{data:e,error:t}=await s.ND.from("tenants").select("*").order("name");if(t)throw t;m(e||[]);let r=e?.[0]||null;_(r)}else{let{data:e,error:n}=await s.ND.from("tenant_users").select("tenant_id").eq("user_id",t.id).eq("is_active",!0);if(n)throw n;if(e&&e.length>0){let t=e.map(e=>e.tenant_id),{data:n,error:a}=await s.ND.from("tenants").select("*").in("id",t).order("name");if(a)throw a;m(n||[]);let i=n?.find(e=>e.id===r?.tenant_id)||n?.[0]||null;_(i)}else m([]),_(null)}}catch(e){console.error("Error loading tenants:",e),m([]),_(null)}finally{p(!1)}};return(0,n.jsx)(o.Provider,{value:{selectedTenant:d,setSelectedTenant:_,availableTenants:u,isLoading:E,loadAvailableTenants:f,canSelectTenant:()=>!c&&(r?.role==="host_admin"||r?.role==="program_manager"),getAllAccessibleTenantIds:()=>c?[A.id]:u.map(e=>e.id),isMultiTenant:()=>u.length>1,isDemoMode:c},children:e})}function c(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useTenant must be used within a TenantProvider");return e}function d(){let{getAllAccessibleTenantIds:e}=c();return e()}function _(){let{isMultiTenant:e,selectedTenant:t,availableTenants:r}=c();return{isMultiTenant:e(),selectedTenant:t,availableTenants:r}}},74765:(e,t,r)=>{Promise.resolve().then(r.bind(r,13732)),Promise.resolve().then(r.bind(r,61523))},91444:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},94431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>i});var n=r(37413),a=r(29131),s=r(39905);r(61135);let i={title:"HelixBridge - Enterprise Workforce Management",description:"Connecting Enterprise Operations Through Intelligent Workforce Management",icons:{icon:"/helix-icon.png",shortcut:"/helix-icon.png",apple:"/helix-icon.png"}};function o({children:e}){return(0,n.jsx)("html",{lang:"en",children:(0,n.jsx)("body",{children:(0,n.jsx)(a.AuthProvider,{children:(0,n.jsx)(s.TenantProvider,{children:e})})})})}}};