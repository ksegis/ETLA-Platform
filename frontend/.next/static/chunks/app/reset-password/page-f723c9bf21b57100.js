(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4700],{614:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(7140).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},1644:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(7140).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2550:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(7140).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},3741:(e,s,r)=>{"use strict";r.d(s,{$:()=>i});var a=r(5155),t=r(2115),l=r(9434);let i=t.forwardRef((e,s)=>{let{className:r,variant:t="default",size:i="default",...n}=e;return(0,a.jsx)("button",{className:(0,l.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"default"===t,"bg-red-600 text-white hover:bg-red-700":"destructive"===t,"border border-gray-300 bg-white hover:bg-gray-50":"outline"===t,"bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===t,"hover:bg-gray-100":"ghost"===t,"text-blue-600 underline-offset-4 hover:underline":"link"===t},{"h-10 px-4 py-2":"default"===i,"h-9 rounded-md px-3":"sm"===i,"h-11 rounded-md px-8":"lg"===i,"h-10 w-10":"icon"===i},r),ref:s,...n})});i.displayName="Button"},4622:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>g});var a=r(5155),t=r(2115),l=r(5695),i=r(7703),n=r(3741),d=r(8156),c=r(614),o=r(1644),u=r(2550),m=r(6060),x=r(9076),h=r(2099);function f(){let e=(0,l.useRouter)(),s=(0,l.useSearchParams)(),[r,f]=(0,t.useState)(!1),[p,g]=(0,t.useState)(!1),[w,y]=(0,t.useState)({password:"",confirmPassword:"",isLoading:!1,error:null,success:!1,isValidSession:!1,isCheckingSession:!0});(0,t.useEffect)(()=>{(async()=>{try{var e,r;let{data:{session:a},error:t}=await h.ND.auth.getSession();if(t){console.error("Session error:",t),y(e=>({...e,isValidSession:!1,isCheckingSession:!1,error:"Invalid or expired reset link. Please request a new password reset."}));return}(null==a||null==(e=a.user)?void 0:e.aud)==="authenticated"&&("recovery"===s.get("type")||s.get("token_hash")||(null==a||null==(r=a.user)?void 0:r.recovery_sent_at))&&(null==a?void 0:a.user)?y(e=>({...e,isValidSession:!0,isCheckingSession:!1})):y(e=>({...e,isValidSession:!1,isCheckingSession:!1,error:"Invalid or expired reset link. Please request a new password reset."}))}catch(e){console.error("Recovery session check failed:",e),y(e=>({...e,isValidSession:!1,isCheckingSession:!1,error:"Failed to validate reset link. Please try again."}))}})()},[s]);let j=e=>e.length<8?"Password must be at least 8 characters long":/(?=.*[a-z])/.test(e)?/(?=.*[A-Z])/.test(e)?/(?=.*\d)/.test(e)?/(?=.*[!@#$%^&*])/.test(e)?null:"Password must contain at least one special character (!@#$%^&*)":"Password must contain at least one number":"Password must contain at least one uppercase letter":"Password must contain at least one lowercase letter",b=e=>{y(s=>({...s,password:e,error:null}))},N=e=>{y(s=>({...s,confirmPassword:e,error:null}))},v=async s=>{s.preventDefault();let r=j(w.password);if(r)return void y(e=>({...e,error:r}));if(w.password!==w.confirmPassword)return void y(e=>({...e,error:"Passwords do not match"}));y(e=>({...e,isLoading:!0,error:null}));try{let{error:s}=await h.ND.auth.updateUser({password:w.password});if(s)return void y(e=>({...e,isLoading:!1,error:s.message}));y(e=>({...e,isLoading:!1,success:!0})),setTimeout(async()=>{await h.ND.auth.signOut(),e.push("/login?message=Password updated successfully. Please sign in with your new password.")},2e3)}catch(e){y(s=>({...s,isLoading:!1,error:e.message||"Failed to update password. Please try again."}))}};return w.isCheckingSession?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsx)(i.Zp,{className:"w-full max-w-md",children:(0,a.jsx)(i.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600",children:"Validating reset link..."})]})})})}):w.isValidSession?w.success?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsxs)(i.Zp,{className:"w-full max-w-md",children:[(0,a.jsxs)(i.aR,{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(u.A,{className:"h-6 w-6 text-green-600"})}),(0,a.jsx)(i.ZB,{className:"text-xl text-gray-900",children:"Password Updated!"}),(0,a.jsx)(i.BT,{className:"text-gray-600",children:"Your password has been successfully updated. You will be redirected to sign in shortly."})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600",children:"Redirecting..."})]})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsxs)(i.Zp,{className:"w-full max-w-md",children:[(0,a.jsxs)(i.aR,{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(c.A,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsx)(i.ZB,{className:"text-xl text-gray-900",children:"Reset Your Password"}),(0,a.jsx)(i.BT,{className:"text-gray-600",children:"Enter your new password below"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[w.error&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 text-red-600 mr-2"}),(0,a.jsx)("p",{className:"text-sm text-red-600",children:w.error})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:"password",type:r?"text":"password",value:w.password,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10",placeholder:"Enter your new password",required:!0,disabled:w.isLoading}),(0,a.jsx)("button",{type:"button",onClick:()=>f(!r),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:w.isLoading,children:r?(0,a.jsx)(m.A,{className:"h-4 w-4 text-gray-400"}):(0,a.jsx)(x.A,{className:"h-4 w-4 text-gray-400"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:"confirmPassword",type:p?"text":"password",value:w.confirmPassword,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10",placeholder:"Confirm your new password",required:!0,disabled:w.isLoading}),(0,a.jsx)("button",{type:"button",onClick:()=>g(!p),className:"absolute inset-y-0 right-0 pr-3 flex items-center",disabled:w.isLoading,children:p?(0,a.jsx)(m.A,{className:"h-4 w-4 text-gray-400"}):(0,a.jsx)(x.A,{className:"h-4 w-4 text-gray-400"})})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,a.jsx)("p",{children:"Password requirements:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,a.jsx)("li",{children:"At least 8 characters long"}),(0,a.jsx)("li",{children:"Contains uppercase and lowercase letters"}),(0,a.jsx)("li",{children:"Contains at least one number"}),(0,a.jsx)("li",{children:"Contains at least one special character (!@#$%^&*)"})]})]}),(0,a.jsx)(n.$,{type:"submit",className:"w-full",disabled:w.isLoading||!w.password||!w.confirmPassword,children:w.isLoading?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating password..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Update Password"]})}),(0,a.jsxs)(n.$,{type:"button",variant:"outline",onClick:()=>e.push("/login"),className:"w-full",disabled:w.isLoading,children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Back to Sign In"]})]})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsxs)(i.Zp,{className:"w-full max-w-md",children:[(0,a.jsxs)(i.aR,{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(d.A,{className:"h-6 w-6 text-red-600"})}),(0,a.jsx)(i.ZB,{className:"text-xl text-gray-900",children:"Invalid Reset Link"}),(0,a.jsx)(i.BT,{className:"text-gray-600",children:w.error||"This password reset link is invalid or has expired."})]}),(0,a.jsxs)(i.Wu,{className:"space-y-4",children:[(0,a.jsxs)(n.$,{onClick:()=>{e.push("/login?tab=forgot&message=Please enter your email to request a new password reset.")},className:"w-full",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Request New Reset Link"]}),(0,a.jsxs)(n.$,{variant:"outline",onClick:()=>e.push("/login"),className:"w-full",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Back to Sign In"]})]})]})})}function p(){return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsx)(i.Zp,{className:"w-full max-w-md",children:(0,a.jsx)(i.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading..."})]})})})})}function g(){return(0,a.jsx)(t.Suspense,{fallback:(0,a.jsx)(p,{}),children:(0,a.jsx)(f,{})})}},5446:(e,s,r)=>{Promise.resolve().then(r.bind(r,4622))},5695:(e,s,r)=>{"use strict";var a=r(8999);r.o(a,"usePathname")&&r.d(s,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(s,{useSearchParams:function(){return a.useSearchParams}})},6060:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(7140).A)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},7140:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var a=r(2115),t={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var i=(e,s)=>{let r=(0,a.forwardRef)((r,i)=>{let{color:n="currentColor",size:d=24,strokeWidth:c=2,absoluteStrokeWidth:o,children:u,...m}=r;return(0,a.createElement)("svg",{ref:i,...t,width:d,height:d,stroke:n,strokeWidth:o?24*Number(c)/Number(d):c,className:"lucide lucide-".concat(l(e)),...m},[...s.map(e=>{let[s,r]=e;return(0,a.createElement)(s,r)}),...(Array.isArray(u)?u:[u])||[]])});return r.displayName="".concat(e),r}},7703:(e,s,r)=>{"use strict";r.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n});var a=r(5155),t=r(2115),l=r(9434);let i=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm",r),...t})});i.displayName="Card";let n=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...t})});n.displayName="CardHeader";let d=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...t})});d.displayName="CardTitle";let c=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-gray-500",r),...t})});c.displayName="CardDescription";let o=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",r),...t})});o.displayName="CardContent",t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",r),...t})}).displayName="CardFooter"},8156:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(7140).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9076:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(7140).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9434:(e,s,r)=>{"use strict";r.d(s,{cn:()=>l});var a=r(2596),t=r(9688);function l(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,t.QP)((0,a.$)(s))}}},e=>{var s=s=>e(e.s=s);e.O(0,[4277,2354,2099,8441,1684,7358],()=>s(5446)),_N_E=e.O()}]);