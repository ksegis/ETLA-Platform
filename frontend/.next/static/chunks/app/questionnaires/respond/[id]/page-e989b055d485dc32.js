(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1887],{1073:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1644:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2811:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]])},2814:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var r=s(5155),i=s(2115),a=s(9434);let l=i.forwardRef((e,t)=>{let{className:s,variant:i="default",...l}=e;return(0,r.jsx)("div",{ref:t,className:(0,a.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",{"border-transparent bg-blue-600 text-white hover:bg-blue-700":"default"===i,"border-transparent bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===i,"border-transparent bg-red-600 text-white hover:bg-red-700":"destructive"===i,"text-gray-950 border-gray-200 bg-white hover:bg-gray-50":"outline"===i},s),...l})});l.displayName="Badge"},3219:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},3741:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var r=s(5155),i=s(2115),a=s(9434);let l=i.forwardRef((e,t)=>{let{className:s,variant:i="default",size:l="default",...n}=e;return(0,r.jsx)("button",{className:(0,a.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"default"===i,"bg-red-600 text-white hover:bg-red-700":"destructive"===i,"border border-gray-300 bg-white hover:bg-gray-50":"outline"===i,"bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===i,"hover:bg-gray-100":"ghost"===i,"text-blue-600 underline-offset-4 hover:underline":"link"===i},{"h-10 px-4 py-2":"default"===l,"h-9 rounded-md px-3":"sm"===l,"h-11 rounded-md px-8":"lg"===l,"h-10 w-10":"icon"===l},s),ref:t,...n})});l.displayName="Button"},3915:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var r=s(5155),i=s(2115),a=s(9434);let l=i.forwardRef((e,t)=>{let{className:s,type:i,...l}=e;return(0,r.jsx)("input",{type:i,className:(0,a.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});l.displayName="Input"},4161:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},6477:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(5155),i=s(2115),a=s(7703),l=s(3741),n=s(2814),o=s(3915),d=s(858),c=s(3219),u=s(8156),m=s(2550),x=s(1073),h=s(477),g=s(7141),p=s(1644),f=s(2811),v=s(4161),y=s(5695);function b(){let e=(0,y.useParams)(),t=(0,y.useRouter)(),s=e.id,[b,j]=(0,i.useState)(null),[N,w]=(0,i.useState)([]),[k,_]=(0,i.useState)(0),[q,A]=(0,i.useState)(!0),[S,C]=(0,i.useState)(!1),[E,R]=(0,i.useState)(!1),[M,T]=(0,i.useState)({}),[P,W]=(0,i.useState)(null),[H]=(0,i.useState)(new Date);(0,i.useEffect)(()=>{let e={id:s,title:"Employee Satisfaction Survey 2024",description:"Help us understand your experience and improve our workplace culture. Your responses are confidential and will be used to make positive changes.",category:"HR & Culture",target_audience:"All Employees",tags:["satisfaction","culture","feedback"],status:"active",questions:[{id:"q1",type:"single_choice",title:"How satisfied are you with your current role?",description:"Please select the option that best describes your overall job satisfaction.",required:!0,options:["Very Satisfied","Satisfied","Neutral","Dissatisfied","Very Dissatisfied"],order:0},{id:"q2",type:"rating",title:"Rate your work-life balance",description:"On a scale of 1-5, how would you rate your current work-life balance?",required:!0,min_rating:1,max_rating:5,order:1},{id:"q3",type:"multiple_choice",title:"Which benefits are most important to you?",description:"Select all that apply.",required:!1,options:["Health Insurance","Retirement Plan","Flexible Hours","Remote Work","Professional Development","Paid Time Off"],order:2},{id:"q4",type:"textarea",title:"What improvements would you like to see in our workplace?",description:"Please share any suggestions or feedback you have for improving our work environment.",required:!1,placeholder:"Share your thoughts and suggestions...",order:3},{id:"q5",type:"text",title:"What is your department?",required:!0,placeholder:"e.g., Engineering, Marketing, Sales...",order:4}],settings:{allow_anonymous:!0,require_login:!1,show_progress:!0,randomize_questions:!1,time_limit:15},created_by:"HR Team",created_at:"2024-02-15T10:00:00Z"};setTimeout(()=>{j(e),A(!1),e.settings.time_limit&&W(60*e.settings.time_limit)},1e3)},[s]),(0,i.useEffect)(()=>{if(null===P||P<=0)return;let e=setInterval(()=>{W(e=>null===e||e<=1?(F(),0):e-1)},1e3);return()=>clearInterval(e)},[P]);let I=e=>N.find(t=>t.question_id===e),D=(e,t)=>{w(s=>s.find(t=>t.question_id===e)?s.map(s=>s.question_id===e?{...s,value:t}:s):[...s,{question_id:e,value:t}]),M[e]&&T(t=>{let s={...t};return delete s[e],s})},O=e=>{let t=I(e.id);if(e.required&&(!t||!t.value||Array.isArray(t.value)&&0===t.value.length||"string"==typeof t.value&&""===t.value.trim()))return"This question is required";if(t&&e.validation){let s=t.value;if("string"==typeof s){if(e.validation.min_length&&s.length<e.validation.min_length)return"Minimum length is ".concat(e.validation.min_length," characters");if(e.validation.max_length&&s.length>e.validation.max_length)return"Maximum length is ".concat(e.validation.max_length," characters");if(e.validation.pattern&&!new RegExp(e.validation.pattern).test(s))return"Invalid format"}if("number"==typeof s){if(e.validation.min_value&&s<e.validation.min_value)return"Minimum value is ".concat(e.validation.min_value);if(e.validation.max_value&&s>e.validation.max_value)return"Maximum value is ".concat(e.validation.max_value)}}return null},F=async()=>{if(!b)return;let e={};if(b.questions.forEach(t=>{let s=O(t);s&&(e[t.id]=s)}),Object.keys(e).length>0){T(e);let t=b.questions.findIndex(t=>e[t.id]);-1!==t&&_(t);return}C(!0);try{await new Promise(e=>setTimeout(e,2e3));let e={questionnaire_id:s,responses:N,submitted_at:new Date().toISOString(),time_taken:Math.floor((new Date().getTime()-H.getTime())/1e3)};console.log("Submitting responses:",e),R(!0)}catch(e){console.error("Error submitting responses:",e)}finally{C(!1)}};if(q)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!b)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(a.Zp,{className:"max-w-md",children:(0,r.jsxs)(a.Wu,{className:"text-center py-12",children:[(0,r.jsx)(u.A,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Questionnaire Not Found"}),(0,r.jsx)("p",{className:"text-gray-600",children:"The questionnaire you're looking for doesn't exist or has been removed."})]})})});if(E)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)(a.Zp,{className:"max-w-md",children:(0,r.jsxs)(a.Wu,{className:"text-center py-12",children:[(0,r.jsx)(m.A,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Thank You!"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Your responses have been submitted successfully. We appreciate your feedback."}),(0,r.jsx)(l.$,{onClick:()=>t.push("/questionnaires"),children:"Back to Questionnaires"})]})})});let Z=b.questions[k],$=(k+1)/b.questions.length*100;return(0,r.jsx)(d.A,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto px-4",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:b.title}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:b.description})]}),null!==P&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-orange-600",children:[(0,r.jsx)(x.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"font-mono text-lg",children:(e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))})(P)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,r.jsx)(n.E,{variant:"secondary",children:b.category}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),b.target_audience]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),b.questions.length," questions"]})]}),b.settings.show_progress&&(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,r.jsxs)("span",{children:["Question ",k+1," of ",b.questions.length]}),(0,r.jsxs)("span",{children:[Math.round($),"% complete"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat($,"%")}})})]})]}),(0,r.jsxs)(a.Zp,{className:"mb-8",children:[(0,r.jsx)(a.aR,{children:(0,r.jsx)(a.ZB,{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:["Question ",k+1]}),Z.required&&(0,r.jsx)(n.E,{variant:"destructive",className:"text-xs",children:"Required"})]}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:Z.title}),Z.description&&(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:Z.description})]})})}),(0,r.jsx)(a.Wu,{children:(e=>{var t,s;let i=I(e.id),a=M[e.id];switch(e.type){case"text":case"email":return(0,r.jsxs)("div",{children:[(0,r.jsx)(o.p,{type:e.type,value:(null==i?void 0:i.value)||"",onChange:t=>D(e.id,t.target.value),placeholder:e.placeholder,className:a?"border-red-500":""}),a&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:a})]});case"number":return(0,r.jsxs)("div",{children:[(0,r.jsx)(o.p,{type:"number",value:(null==i?void 0:i.value)||"",onChange:t=>D(e.id,parseFloat(t.target.value)||0),placeholder:e.placeholder,className:a?"border-red-500":""}),a&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:a})]});case"date":return(0,r.jsxs)("div",{children:[(0,r.jsx)(o.p,{type:"date",value:(null==i?void 0:i.value)||"",onChange:t=>D(e.id,t.target.value),className:a?"border-red-500":""}),a&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:a})]});case"textarea":return(0,r.jsxs)("div",{children:[(0,r.jsx)("textarea",{value:(null==i?void 0:i.value)||"",onChange:t=>D(e.id,t.target.value),placeholder:e.placeholder,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(a?"border-red-500":"border-gray-300"),rows:4}),a&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:a})]});case"single_choice":return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"space-y-3",children:null==(t=e.options)?void 0:t.map((t,s)=>(0,r.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:e.id,value:t,checked:(null==i?void 0:i.value)===t,onChange:t=>D(e.id,t.target.value),className:"text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-gray-700",children:t})]},s))}),a&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:a})]});case"multiple_choice":return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"space-y-3",children:null==(s=e.options)?void 0:s.map((t,s)=>(0,r.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",value:t,checked:((null==i?void 0:i.value)||[]).includes(t),onChange:s=>{let r=(null==i?void 0:i.value)||[];s.target.checked?D(e.id,[...r,t]):D(e.id,r.filter(e=>e!==t))},className:"rounded text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-gray-700",children:t})]},s))}),a&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:a})]});case"rating":let l=e.min_rating||1,n=e.max_rating||5,d=(null==i?void 0:i.value)||0;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:l}),(0,r.jsx)("div",{className:"flex space-x-1",children:Array.from({length:n-l+1},(t,s)=>{let i=l+s;return(0,r.jsx)("button",{type:"button",onClick:()=>D(e.id,i),className:"p-1 rounded ".concat(d>=i?"text-yellow-400":"text-gray-300 hover:text-yellow-200"),children:(0,r.jsx)(c.A,{className:"h-8 w-8 fill-current"})},i)})}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:n})]}),d>0&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["You rated: ",d," out of ",n]}),a&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:a})]});default:return(0,r.jsx)("div",{children:"Unsupported question type"})}})(Z)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)(l.$,{variant:"outline",onClick:()=>{k>0&&_(e=>e-1)},disabled:0===k,children:[(0,r.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Previous"]}),(0,r.jsx)("div",{className:"flex gap-2",children:b.questions.map((e,t)=>(0,r.jsx)("button",{onClick:()=>_(t),className:"w-3 h-3 rounded-full ".concat(t===k?"bg-blue-600":t<k?"bg-green-500":"bg-gray-300")},t))}),k===b.questions.length-1?(0,r.jsx)(l.$,{onClick:F,disabled:S,children:S?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Submit"]})}):(0,r.jsxs)(l.$,{onClick:()=>{if(!b)return;let e=b.questions[k],t=O(e);if(t)return void T(s=>({...s,[e.id]:t}));k<b.questions.length-1&&_(e=>e+1)},children:["Next",(0,r.jsx)(v.A,{className:"h-4 w-4 ml-2"})]})]})]})})})}},6849:(e,t,s)=>{Promise.resolve().then(s.bind(s,6477))},8156:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[7590,2354,3178,2099,4619,8441,1684,7358],()=>t(6849)),_N_E=e.O()}]);