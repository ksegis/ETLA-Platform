(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1887],{477:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1073:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1644:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2550:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},2811:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]])},2814:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var r=s(5155),a=s(2115),i=s(9434);let l=a.forwardRef((e,t)=>{let{className:s,variant:a="default",...l}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",{"border-transparent bg-blue-600 text-white hover:bg-blue-700":"default"===a,"border-transparent bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===a,"border-transparent bg-red-600 text-white hover:bg-red-700":"destructive"===a,"text-gray-950 border-gray-200 bg-white hover:bg-gray-50":"outline"===a},s),...l})});l.displayName="Badge"},3219:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},3741:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var r=s(5155),a=s(2115),i=s(9434);let l=a.forwardRef((e,t)=>{let{className:s,variant:a="default",size:l="default",...n}=e;return(0,r.jsx)("button",{className:(0,i.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"default"===a,"bg-red-600 text-white hover:bg-red-700":"destructive"===a,"border border-gray-300 bg-white hover:bg-gray-50":"outline"===a,"bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===a,"hover:bg-gray-100":"ghost"===a,"text-blue-600 underline-offset-4 hover:underline":"link"===a},{"h-10 px-4 py-2":"default"===l,"h-9 rounded-md px-3":"sm"===l,"h-11 rounded-md px-8":"lg"===l,"h-10 w-10":"icon"===l},s),ref:t,...n})});l.displayName="Button"},3915:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var r=s(5155),a=s(2115),i=s(9434);let l=a.forwardRef((e,t)=>{let{className:s,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});l.displayName="Input"},4161:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},6477:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(5155),a=s(2115),i=s(7703),l=s(3741),n=s(2814),d=s(3915),o=s(3219),c=s(8156),u=s(2550),m=s(1073),x=s(477),h=s(7141),f=s(1644),p=s(2811),g=s(4161),y=s(5695);function v(){let e=(0,y.useParams)(),t=(0,y.useRouter)(),s=e.id,[v,b]=(0,a.useState)(null),[j,N]=(0,a.useState)([]),[w,k]=(0,a.useState)(0),[_,q]=(0,a.useState)(!0),[A,C]=(0,a.useState)(!1),[S,R]=(0,a.useState)(!1),[P,E]=(0,a.useState)({}),[M,T]=(0,a.useState)(null),[H]=(0,a.useState)(new Date);(0,a.useEffect)(()=>{let e={id:s,title:"Employee Satisfaction Survey 2024",description:"Help us understand your experience and improve our workplace culture. Your responses are confidential and will be used to make positive changes.",category:"HR & Culture",target_audience:"All Employees",tags:["satisfaction","culture","feedback"],status:"active",questions:[{id:"q1",type:"single_choice",title:"How satisfied are you with your current role?",description:"Please select the option that best describes your overall job satisfaction.",required:!0,options:["Very Satisfied","Satisfied","Neutral","Dissatisfied","Very Dissatisfied"],order:0},{id:"q2",type:"rating",title:"Rate your work-life balance",description:"On a scale of 1-5, how would you rate your current work-life balance?",required:!0,min_rating:1,max_rating:5,order:1},{id:"q3",type:"multiple_choice",title:"Which benefits are most important to you?",description:"Select all that apply.",required:!1,options:["Health Insurance","Retirement Plan","Flexible Hours","Remote Work","Professional Development","Paid Time Off"],order:2},{id:"q4",type:"textarea",title:"What improvements would you like to see in our workplace?",description:"Please share any suggestions or feedback you have for improving our work environment.",required:!1,placeholder:"Share your thoughts and suggestions...",order:3},{id:"q5",type:"text",title:"What is your department?",required:!0,placeholder:"e.g., Engineering, Marketing, Sales...",order:4}],settings:{allow_anonymous:!0,require_login:!1,show_progress:!0,randomize_questions:!1,time_limit:15},created_by:"HR Team",created_at:"2024-02-15T10:00:00Z"};setTimeout(()=>{b(e),q(!1),e.settings.time_limit&&T(60*e.settings.time_limit)},1e3)},[s]),(0,a.useEffect)(()=>{if(null===M||M<=0)return;let e=setInterval(()=>{T(e=>null===e||e<=1?(I(),0):e-1)},1e3);return()=>clearInterval(e)},[M]);let W=e=>j.find(t=>t.question_id===e),D=(e,t)=>{N(s=>s.find(t=>t.question_id===e)?s.map(s=>s.question_id===e?{...s,value:t}:s):[...s,{question_id:e,value:t}]),P[e]&&E(t=>{let s={...t};return delete s[e],s})},F=e=>{let t=W(e.id);if(e.required&&(!t||!t.value||Array.isArray(t.value)&&0===t.value.length||"string"==typeof t.value&&""===t.value.trim()))return"This question is required";if(t&&e.validation){let s=t.value;if("string"==typeof s){if(e.validation.min_length&&s.length<e.validation.min_length)return"Minimum length is ".concat(e.validation.min_length," characters");if(e.validation.max_length&&s.length>e.validation.max_length)return"Maximum length is ".concat(e.validation.max_length," characters");if(e.validation.pattern&&!new RegExp(e.validation.pattern).test(s))return"Invalid format"}if("number"==typeof s){if(e.validation.min_value&&s<e.validation.min_value)return"Minimum value is ".concat(e.validation.min_value);if(e.validation.max_value&&s>e.validation.max_value)return"Maximum value is ".concat(e.validation.max_value)}}return null},I=async()=>{if(!v)return;let e={};if(v.questions.forEach(t=>{let s=F(t);s&&(e[t.id]=s)}),Object.keys(e).length>0){E(e);let t=v.questions.findIndex(t=>e[t.id]);-1!==t&&k(t);return}C(!0);try{await new Promise(e=>setTimeout(e,2e3));let e={questionnaire_id:s,responses:j,submitted_at:new Date().toISOString(),time_taken:Math.floor((new Date().getTime()-H.getTime())/1e3)};console.log("Submitting responses:",e),R(!0)}catch(e){console.error("Error submitting responses:",e)}finally{C(!1)}};if(_)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!v)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(i.Zp,{className:"max-w-md",children:(0,r.jsxs)(i.Wu,{className:"text-center py-12",children:[(0,r.jsx)(c.A,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Questionnaire Not Found"}),(0,r.jsx)("p",{className:"text-gray-600",children:"The questionnaire you're looking for doesn't exist or has been removed."})]})})});if(S)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)(i.Zp,{className:"max-w-md",children:(0,r.jsxs)(i.Wu,{className:"text-center py-12",children:[(0,r.jsx)(u.A,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Thank You!"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Your responses have been submitted successfully. We appreciate your feedback."}),(0,r.jsx)(l.$,{onClick:()=>t.push("/questionnaires"),children:"Back to Questionnaires"})]})})});let Z=v.questions[w],B=(w+1)/v.questions.length*100;return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto px-4",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:v.title}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:v.description})]}),null!==M&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-orange-600",children:[(0,r.jsx)(m.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"font-mono text-lg",children:(e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))})(M)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,r.jsx)(n.E,{variant:"secondary",children:v.category}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(x.A,{className:"h-4 w-4"}),v.target_audience]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),v.questions.length," questions"]})]}),v.settings.show_progress&&(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,r.jsxs)("span",{children:["Question ",w+1," of ",v.questions.length]}),(0,r.jsxs)("span",{children:[Math.round(B),"% complete"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(B,"%")}})})]})]}),(0,r.jsxs)(i.Zp,{className:"mb-8",children:[(0,r.jsx)(i.aR,{children:(0,r.jsx)(i.ZB,{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:["Question ",w+1]}),Z.required&&(0,r.jsx)(n.E,{variant:"destructive",className:"text-xs",children:"Required"})]}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:Z.title}),Z.description&&(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:Z.description})]})})}),(0,r.jsx)(i.Wu,{children:(e=>{var t,s;let a=W(e.id),i=P[e.id];switch(e.type){case"text":case"email":return(0,r.jsxs)("div",{children:[(0,r.jsx)(d.p,{type:e.type,value:(null==a?void 0:a.value)||"",onChange:t=>D(e.id,t.target.value),placeholder:e.placeholder,className:i?"border-red-500":""}),i&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:i})]});case"number":return(0,r.jsxs)("div",{children:[(0,r.jsx)(d.p,{type:"number",value:(null==a?void 0:a.value)||"",onChange:t=>D(e.id,parseFloat(t.target.value)||0),placeholder:e.placeholder,className:i?"border-red-500":""}),i&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:i})]});case"date":return(0,r.jsxs)("div",{children:[(0,r.jsx)(d.p,{type:"date",value:(null==a?void 0:a.value)||"",onChange:t=>D(e.id,t.target.value),className:i?"border-red-500":""}),i&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:i})]});case"textarea":return(0,r.jsxs)("div",{children:[(0,r.jsx)("textarea",{value:(null==a?void 0:a.value)||"",onChange:t=>D(e.id,t.target.value),placeholder:e.placeholder,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(i?"border-red-500":"border-gray-300"),rows:4}),i&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:i})]});case"single_choice":return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"space-y-3",children:null==(t=e.options)?void 0:t.map((t,s)=>(0,r.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:e.id,value:t,checked:(null==a?void 0:a.value)===t,onChange:t=>D(e.id,t.target.value),className:"text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-gray-700",children:t})]},s))}),i&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:i})]});case"multiple_choice":return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"space-y-3",children:null==(s=e.options)?void 0:s.map((t,s)=>(0,r.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",value:t,checked:((null==a?void 0:a.value)||[]).includes(t),onChange:s=>{let r=(null==a?void 0:a.value)||[];s.target.checked?D(e.id,[...r,t]):D(e.id,r.filter(e=>e!==t))},className:"rounded text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-gray-700",children:t})]},s))}),i&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:i})]});case"rating":let l=e.min_rating||1,n=e.max_rating||5,c=(null==a?void 0:a.value)||0;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:l}),(0,r.jsx)("div",{className:"flex space-x-1",children:Array.from({length:n-l+1},(t,s)=>{let a=l+s;return(0,r.jsx)("button",{type:"button",onClick:()=>D(e.id,a),className:"p-1 rounded ".concat(c>=a?"text-yellow-400":"text-gray-300 hover:text-yellow-200"),children:(0,r.jsx)(o.A,{className:"h-8 w-8 fill-current"})},a)})}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:n})]}),c>0&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["You rated: ",c," out of ",n]}),i&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:i})]});default:return(0,r.jsx)("div",{children:"Unsupported question type"})}})(Z)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)(l.$,{variant:"outline",onClick:()=>{w>0&&k(e=>e-1)},disabled:0===w,children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Previous"]}),(0,r.jsx)("div",{className:"flex gap-2",children:v.questions.map((e,t)=>(0,r.jsx)("button",{onClick:()=>k(t),className:"w-3 h-3 rounded-full ".concat(t===w?"bg-blue-600":t<w?"bg-green-500":"bg-gray-300")},t))}),w===v.questions.length-1?(0,r.jsx)(l.$,{onClick:I,disabled:A,children:A?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Submit"]})}):(0,r.jsxs)(l.$,{onClick:()=>{if(!v)return;let e=v.questions[w],t=F(e);if(t)return void E(s=>({...s,[e.id]:t}));w<v.questions.length-1&&k(e=>e+1)},children:["Next",(0,r.jsx)(g.A,{className:"h-4 w-4 ml-2"})]})]})]})})}},6849:(e,t,s)=>{Promise.resolve().then(s.bind(s,6477))},7141:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},7703:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>l,aR:()=>n});var r=s(5155),a=s(2115),i=s(9434);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm",s),...a})});l.displayName="Card";let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...a})});n.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});d.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-gray-500",s),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},8156:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(7140).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(2596),a=s(9688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[7590,8441,1684,7358],()=>t(6849)),_N_E=e.O()}]);