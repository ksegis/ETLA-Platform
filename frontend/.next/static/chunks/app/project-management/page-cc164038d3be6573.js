(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8920],{1266:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>B});var a=t(5155),r=t(2115),l=t(907),n=t(8483),i=t(477),c=t(9169),o=t(7691),d=t(152),m=t(1478),u=t(3219),x=t(2539),p=t(9076),h=t(7808),g=t(6836),j=t(9356),b=t(7141),v=t(3408),f=t(7235),y=t(3715),N=t(8156),_=t(4139),w=t(3376),C=t(7159),k=t(92),A=t(3741),E=t(7703),S=t(3915),P=t(2814),D=t(858),T=t(7020),L=t(7737),q=t(2099);function B(){let[e,s]=(0,r.useState)([]),[t,B]=(0,r.useState)([]),[R,$]=(0,r.useState)([]),[I,F]=(0,r.useState)(!0),[z,O]=(0,r.useState)(null),[U,M]=(0,r.useState)("list"),[W,Z]=(0,r.useState)(!1),[H,K]=(0,r.useState)(!1),[Q,V]=(0,r.useState)(null),[G,J]=(0,r.useState)("projects"),[X,Y]=(0,r.useState)({searchTerm:"",status:"all",priority:"all",department:"all",projectType:"all"}),[ee,es]=(0,r.useState)({title:"",project_name:"",project_code:"",description:"",priority:"medium",project_type:"internal",charter_status:"draft",completion_percentage:0,budget:0,estimated_budget:0,actual_budget:0,budget_variance:0,schedule_variance:0,stakeholders:[],milestone_schedule:[],deliverables:[]}),{user:et}=(0,T.h)(),{selectedTenant:ea}=(0,L.K)(),er=e=>"title"in e&&e.title?e.title:"project_name"in e&&e.project_name?e.project_name:"name"in e&&e.name?e.name:"Untitled",el=async()=>{if(!(null==ea?void 0:ea.id)){console.log("No tenant selected, skipping load"),F(!1);return}try{F(!0),O(null),console.log("Loading project data for tenant:",ea.id,ea.name);try{console.log("Loading from project_charters table...");let{data:e,error:t}=await q.ND.from("project_charters").select("*").eq("tenant_id",ea.id).order("created_at",{ascending:!1});t?(console.error("Project charters query error:",t),O("Failed to load projects: ".concat(t.message)),s([])):(console.log("Successfully loaded projects:",(null==e?void 0:e.length)||0),console.log("Sample project data:",null==e?void 0:e[0]),s(e||[]))}catch(e){console.error("Error loading projects:",e),s([]),O("Failed to load projects. Please check database connection.")}try{console.log("Loading from work_requests table...");let{data:e,error:s}=await q.ND.from("work_requests").select("*").eq("tenant_id",ea.id).order("created_at",{ascending:!1});s?(console.error("Work requests query error:",s),B([])):(console.log("Successfully loaded work requests:",(null==e?void 0:e.length)||0),B(e||[]))}catch(e){console.error("Error loading work requests:",e),B([])}try{console.log("Loading from risk_register table...");let{data:e,error:s}=await q.ND.from("risk_register").select("*").eq("tenant_id",ea.id).order("created_at",{ascending:!1});s?(console.error("Risk register query error:",s),$([])):(console.log("Successfully loaded risks:",(null==e?void 0:e.length)||0),$(e||[]))}catch(e){console.error("Error loading risks:",e),$([])}}catch(e){console.error("Unexpected error loading data:",e),O("Failed to load project management data. Please check your database connection.")}finally{F(!1)}};(0,r.useEffect)(()=>{el()},[ea]);let en={totalProjects:e.length,activeProjects:e.filter(e=>"active"===e.charter_status||"approved"===e.charter_status||"in_progress"===e.charter_status).length,completedProjects:e.filter(e=>100===e.completion_percentage||"completed"===e.charter_status).length,totalBudget:e.reduce((e,s)=>e+(s.budget||s.estimated_budget||0),0),totalWorkRequests:t.length,totalRisks:R.length,averageCompletion:e.length>0?Math.round(e.reduce((e,s)=>e+(s.completion_percentage||0),0)/e.length):0},ei=e.filter(e=>{let s=e.title||e.project_name||"",t=e.description||e.business_case||"",a=e.project_code||"",r=e.assigned_team_lead||e.team_lead||e.project_manager||"",l=s.toLowerCase().includes(X.searchTerm.toLowerCase())||t.toLowerCase().includes(X.searchTerm.toLowerCase())||a.toLowerCase().includes(X.searchTerm.toLowerCase())||r.toLowerCase().includes(X.searchTerm.toLowerCase()),n="all"===X.status||e.charter_status===X.status,i="all"===X.priority||e.priority===X.priority,c="all"===X.department||e.department===X.department,o="all"===X.projectType||e.project_type===X.projectType;return l&&n&&i&&c&&o}),ec=t.filter(e=>{let s=e.name||e.title||"",t=e.description||"",a=s.toLowerCase().includes(X.searchTerm.toLowerCase())||t.toLowerCase().includes(X.searchTerm.toLowerCase()),r="all"===X.status||e.status===X.status;return a&&r}),eo=R.filter(e=>{let s=e.name||e.title||"",t=e.description||"",a=s.toLowerCase().includes(X.searchTerm.toLowerCase())||t.toLowerCase().includes(X.searchTerm.toLowerCase()),r="all"===X.status||e.status===X.status;return a&&r}),ed=e=>e?new Date(e).toLocaleDateString():"Not set",em=e=>e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e):"$0",eu=e=>{switch((e||"").toLowerCase()){case"active":case"approved":case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"draft":case"under_review":return"bg-yellow-100 text-yellow-800";case"on_hold":return"bg-orange-100 text-orange-800";case"cancelled":case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ex=e=>{switch((e||"").toLowerCase()){case"critical":return"bg-red-100 text-red-800";case"high":return"bg-orange-100 text-orange-800";case"medium":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},ep=async()=>{if(!(null==ea?void 0:ea.id)||!ee.title)return void O("Please provide a project title and ensure a tenant is selected.");try{O(null);let e={tenant_id:ea.id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};ee.title&&(e.title=ee.title),ee.project_name&&(e.project_name=ee.project_name),ee.project_code&&(e.project_code=ee.project_code),ee.description&&(e.description=ee.description),ee.priority&&(e.priority=ee.priority),ee.project_type&&(e.project_type=ee.project_type),ee.start_date&&(e.start_date=ee.start_date),ee.end_date&&(e.end_date=ee.end_date),void 0!==ee.budget&&(e.budget=ee.budget),void 0!==ee.estimated_budget&&(e.estimated_budget=ee.estimated_budget),ee.assigned_team_lead&&(e.assigned_team_lead=ee.assigned_team_lead),ee.sponsor&&(e.sponsor=ee.sponsor),ee.department&&(e.department=ee.department),ee.charter_status&&(e.charter_status=ee.charter_status),void 0!==ee.completion_percentage&&(e.completion_percentage=ee.completion_percentage),ee.business_case&&(e.business_case=ee.business_case),ee.project_scope&&(e.project_scope=ee.project_scope),ee.success_criteria&&(e.success_criteria=ee.success_criteria),console.log("Creating project with data:",e);let{data:t,error:a}=await q.ND.from("project_charters").insert([e]).select();if(a){console.error("Error creating project:",a),O("Failed to create project: ".concat(a.message));return}console.log("Project created successfully:",t),s(e=>[t[0],...e]),Z(!1),eh()}catch(e){console.error("Unexpected error creating project:",e),O("Failed to create project due to an unexpected error.")}},eh=()=>{es({title:"",project_name:"",project_code:"",description:"",priority:"medium",project_type:"internal",charter_status:"draft",completion_percentage:0,budget:0,estimated_budget:0,actual_budget:0,budget_variance:0,schedule_variance:0,stakeholders:[],milestone_schedule:[],deliverables:[]})},eg=async()=>{if(!(null==Q?void 0:Q.id))return void O("No project selected for update.");try{O(null);let e={updated_at:new Date().toISOString()};Q.title&&(e.title=Q.title),Q.project_name&&(e.project_name=Q.project_name),Q.project_code&&(e.project_code=Q.project_code),Q.description&&(e.description=Q.description),Q.priority&&(e.priority=Q.priority),Q.project_type&&(e.project_type=Q.project_type),Q.start_date&&(e.start_date=Q.start_date),Q.end_date&&(e.end_date=Q.end_date),void 0!==Q.budget&&(e.budget=Q.budget),void 0!==Q.estimated_budget&&(e.estimated_budget=Q.estimated_budget),Q.assigned_team_lead&&(e.assigned_team_lead=Q.assigned_team_lead),Q.sponsor&&(e.sponsor=Q.sponsor),Q.department&&(e.department=Q.department),Q.charter_status&&(e.charter_status=Q.charter_status),void 0!==Q.completion_percentage&&(e.completion_percentage=Q.completion_percentage),Q.business_case&&(e.business_case=Q.business_case),Q.project_scope&&(e.project_scope=Q.project_scope),Q.success_criteria&&(e.success_criteria=Q.success_criteria),console.log("Updating project with data:",e);let{data:t,error:a}=await q.ND.from("project_charters").update(e).eq("id",Q.id).select();if(a){console.error("Error updating project:",a),O("Failed to update project: ".concat(a.message));return}console.log("Project updated successfully:",t),s(e=>e.map(e=>e.id===Q.id?t[0]:e)),K(!1),V(null)}catch(e){console.error("Unexpected error updating project:",e),O("Failed to update project due to an unexpected error.")}},ej=async e=>{if(confirm("Are you sure you want to delete this project?"))try{O(null);let{error:t}=await q.ND.from("project_charters").delete().eq("id",e);if(t){console.error("Error deleting project:",t),O("Failed to delete project: ".concat(t.message));return}s(s=>s.filter(s=>s.id!==e))}catch(e){console.error("Unexpected error deleting project:",e),O("Failed to delete project due to an unexpected error.")}},eb=[{id:"projects",label:"Projects",icon:j.A,count:ei.length},{id:"work-requests",label:"Work Requests",icon:b.A,count:ec.length},{id:"risks",label:"Risks",icon:v.A,count:eo.length}];return ea?I?(0,a.jsx)(D.A,{children:(0,a.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,a.jsx)(f.A,{className:"h-8 w-8 animate-spin text-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading project data..."})]})}):(0,a.jsx)(D.A,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Project Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Comprehensive PMBOK framework with enhanced database integration"})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)(A.$,{variant:"outline",onClick:()=>Z(!0),children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"New Project"]})})]}),z&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(N.A,{className:"h-5 w-5 text-red-500 mr-2"}),(0,a.jsx)("p",{className:"text-red-700",children:z}),(0,a.jsx)(A.$,{variant:"outline",size:"sm",className:"ml-auto",onClick:()=>O(null),children:(0,a.jsx)(_.A,{className:"h-4 w-4"})})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(E.Zp,{className:"border-blue-200 bg-blue-50",children:(0,a.jsx)(E.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-700",children:"Total Projects"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:en.totalProjects}),(0,a.jsxs)("p",{className:"text-xs text-blue-600",children:[en.activeProjects," active"]})]}),(0,a.jsx)(x.A,{className:"h-8 w-8 text-blue-500"})]})})}),(0,a.jsx)(E.Zp,{className:"border-green-200 bg-green-50",children:(0,a.jsx)(E.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Avg Completion"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-900",children:[en.averageCompletion,"%"]}),(0,a.jsxs)("p",{className:"text-xs text-green-600",children:[en.completedProjects," completed"]})]}),(0,a.jsx)(w.A,{className:"h-8 w-8 text-green-500"})]})})}),(0,a.jsx)(E.Zp,{className:"border-purple-200 bg-purple-50",children:(0,a.jsx)(E.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-purple-700",children:"Total Budget"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:em(en.totalBudget)}),(0,a.jsx)("p",{className:"text-xs text-purple-600",children:"Across all projects"})]}),(0,a.jsx)(o.A,{className:"h-8 w-8 text-purple-500"})]})})}),(0,a.jsx)(E.Zp,{className:"border-red-200 bg-red-50",children:(0,a.jsx)(E.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-red-700",children:"Work Requests"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-900",children:en.totalWorkRequests}),(0,a.jsxs)("p",{className:"text-xs text-red-600",children:[en.totalRisks," risks"]})]}),(0,a.jsx)(b.A,{className:"h-8 w-8 text-red-500"})]})})})]}),(0,a.jsx)("div",{className:"flex space-x-1 border-b overflow-x-auto",children:eb.map(e=>(0,a.jsxs)("button",{onClick:()=>J(e.id),className:"px-4 py-2 font-medium text-sm rounded-t-lg whitespace-nowrap ".concat(G===e.id?"bg-blue-500 text-white border-b-2 border-blue-500":"text-gray-600 hover:text-gray-800 hover:bg-gray-100"),children:[(0,a.jsx)(e.icon,{className:"w-4 h-4 inline mr-2"}),e.label," ",e.count>0&&"(".concat(e.count,")")]},e.id))}),(0,a.jsx)(E.Zp,{children:(0,a.jsx)(E.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(C.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(S.p,{placeholder:"Search ".concat(G,"..."),value:X.searchTerm,onChange:e=>Y(s=>({...s,searchTerm:e.target.value})),className:"pl-10"})]})}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,a.jsxs)("select",{value:X.status,onChange:e=>Y(s=>({...s,status:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"draft",children:"Draft"}),(0,a.jsx)("option",{value:"under_review",children:"Under Review"}),(0,a.jsx)("option",{value:"approved",children:"Approved"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"on_hold",children:"On Hold"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),"projects"===G&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("select",{value:X.priority,onChange:e=>Y(s=>({...s,priority:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Priority"}),(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"}),(0,a.jsx)("option",{value:"critical",children:"Critical"})]}),(0,a.jsxs)("select",{value:X.projectType,onChange:e=>Y(s=>({...s,projectType:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"internal",children:"Internal"}),(0,a.jsx)("option",{value:"external",children:"External"}),(0,a.jsx)("option",{value:"client",children:"Client"}),(0,a.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,a.jsx)("option",{value:"enhancement",children:"Enhancement"})]}),(0,a.jsxs)("div",{className:"flex border rounded-md",children:[(0,a.jsx)(A.$,{variant:"list"===U?"default":"outline",size:"sm",onClick:()=>M("list"),className:"rounded-r-none",children:(0,a.jsx)(l.A,{className:"w-4 h-4"})}),(0,a.jsx)(A.$,{variant:"grid"===U?"default":"outline",size:"sm",onClick:()=>M("grid"),className:"rounded-l-none",children:(0,a.jsx)(n.A,{className:"w-4 h-4"})})]})]})]})]})})}),(0,a.jsxs)(E.Zp,{children:[(0,a.jsx)(E.aR,{children:(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(E.ZB,{className:"text-gray-900",children:"projects"===G?"Projects":"work-requests"===G?"Work Requests":"Risks"}),(0,a.jsxs)(E.BT,{className:"text-gray-600",children:["projects"===G?"".concat(ei.length," of ").concat(e.length," projects"):"work-requests"===G?"".concat(ec.length," of ").concat(t.length," work requests"):"".concat(eo.length," of ").concat(R.length," risks"),ea&&(0,a.jsxs)("span",{className:"ml-2",children:["| Tenant: ",ea.name]})]})]})})}),(0,a.jsx)(E.Wu,{children:"projects"===G?0===ei.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(x.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"No projects found"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:0===e.length?"Create your first project to get started.":"Try adjusting your search or filter criteria."}),(0,a.jsxs)(A.$,{className:"mt-4",onClick:()=>Z(!0),children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Create Project"]})]}):"list"===U?(0,a.jsx)("div",{className:"space-y-4",children:ei.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-6 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:er(e)}),e.project_code&&(0,a.jsx)(P.E,{variant:"outline",className:"text-xs",children:e.project_code}),(0,a.jsx)(P.E,{className:eu(e.charter_status),children:e.charter_status||"Draft"}),e.priority&&(0,a.jsx)(P.E,{className:ex(e.priority),children:e.priority}),e.project_type&&(0,a.jsx)(P.E,{variant:"outline",className:"text-xs",children:e.project_type})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:e.description||e.business_case||"No description"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-medium",children:"Team Lead:"})]}),(0,a.jsx)("p",{className:"text-gray-600",children:e.assigned_team_lead||e.team_lead||e.project_manager||"Not assigned"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-medium",children:"Timeline:"})]}),(0,a.jsxs)("p",{className:"text-gray-600",children:[ed(e.start_date)," - ",ed(e.end_date)]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-medium",children:"Budget:"})]}),(0,a.jsx)("p",{className:"text-gray-600",children:em(e.budget||e.estimated_budget)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-medium",children:"Progress:"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(e.completion_percentage||0,"%")}})}),(0,a.jsxs)("span",{className:"text-gray-600",children:[e.completion_percentage||0,"%"]})]})]})]}),(e.department||e.sponsor||e.division)&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 mt-4 text-sm text-gray-500",children:[e.department&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Dept: ",e.department]})]}),e.sponsor&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Sponsor: ",e.sponsor]})]}),e.division&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Division: ",e.division]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,a.jsx)(A.$,{variant:"outline",size:"sm",onClick:()=>{V(e),K(!0)},children:(0,a.jsx)(p.A,{className:"h-4 w-4"})}),(0,a.jsx)(A.$,{variant:"outline",size:"sm",onClick:()=>{V(e),K(!0)},children:(0,a.jsx)(h.A,{className:"h-4 w-4"})}),(0,a.jsx)(A.$,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>ej(e.id),children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})]})]})},e.id))}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ei.map(e=>(0,a.jsxs)(E.Zp,{className:"hover:shadow-lg transition-shadow",children:[(0,a.jsx)(E.aR,{className:"pb-3",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(E.ZB,{className:"text-lg mb-2",children:er(e)}),(0,a.jsxs)("div",{className:"flex gap-2 mb-2 flex-wrap",children:[e.project_code&&(0,a.jsx)(P.E,{variant:"outline",className:"text-xs",children:e.project_code}),(0,a.jsx)(P.E,{className:eu(e.charter_status),children:e.charter_status||"Draft"}),e.priority&&(0,a.jsx)(P.E,{className:ex(e.priority),children:e.priority}),e.project_type&&(0,a.jsx)(P.E,{variant:"outline",className:"text-xs",children:e.project_type})]})]})})}),(0,a.jsxs)(E.Wu,{children:[(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.description||e.business_case||"No description"}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{children:e.assigned_team_lead||e.team_lead||e.project_manager||"Not assigned"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{children:ed(e.start_date)||"Not scheduled"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{children:em(e.budget||e.estimated_budget)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(e.completion_percentage||0,"%")}})}),(0,a.jsxs)("span",{children:[e.completion_percentage||0,"%"]})]}),(e.department||e.sponsor)&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs text-gray-500",children:[e.department&&(0,a.jsxs)("span",{className:"bg-gray-100 px-2 py-1 rounded",children:["Dept: ",e.department]}),e.sponsor&&(0,a.jsxs)("span",{className:"bg-gray-100 px-2 py-1 rounded",children:["Sponsor: ",e.sponsor]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,a.jsxs)(A.$,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{V(e),K(!0)},children:[(0,a.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"View"]}),(0,a.jsxs)(A.$,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{V(e),K(!0)},children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-1"}),"Edit"]})]})]})]},e.id))}):"work-requests"===G?0===ec.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(b.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"No work requests found"})]}):(0,a.jsx)("div",{className:"space-y-4",children:ec.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:er(e)}),(0,a.jsx)(P.E,{className:eu(e.status),children:e.status||"Unknown"}),e.priority&&(0,a.jsx)(P.E,{className:ex(e.priority),children:e.priority})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-3",children:e.description||"No description"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Created: ",ed(e.created_at)]})]})})]}),(0,a.jsx)("div",{className:"flex gap-2 ml-4",children:(0,a.jsx)(A.$,{variant:"outline",size:"sm",children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})})]})},e.id))}):0===eo.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(v.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"No risks found"})]}):(0,a.jsx)("div",{className:"space-y-4",children:eo.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:er(e)}),(0,a.jsx)(P.E,{className:eu(e.status),children:e.status||"Unknown"})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-3",children:e.description||"No description"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Created: ",ed(e.created_at)]})]})})]}),(0,a.jsx)("div",{className:"flex gap-2 ml-4",children:(0,a.jsx)(A.$,{variant:"outline",size:"sm",children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})})]})},e.id))})})]}),W&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Create New Project"}),(0,a.jsx)(A.$,{variant:"outline",size:"sm",onClick:()=>{Z(!1),eh()},children:(0,a.jsx)(_.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Basic Information"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Title *"}),(0,a.jsx)(S.p,{value:ee.title||"",onChange:e=>es(s=>({...s,title:e.target.value})),placeholder:"Enter project title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Code"}),(0,a.jsx)(S.p,{value:ee.project_code||"",onChange:e=>es(s=>({...s,project_code:e.target.value})),placeholder:"Enter project code"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{value:ee.description||"",onChange:e=>es(s=>({...s,description:e.target.value})),placeholder:"Enter project description",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,a.jsxs)("select",{value:ee.priority||"medium",onChange:e=>es(s=>({...s,priority:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"}),(0,a.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Type"}),(0,a.jsxs)("select",{value:ee.project_type||"internal",onChange:e=>es(s=>({...s,project_type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"internal",children:"Internal"}),(0,a.jsx)("option",{value:"external",children:"External"}),(0,a.jsx)("option",{value:"client",children:"Client"}),(0,a.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,a.jsx)("option",{value:"enhancement",children:"Enhancement"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,a.jsx)(S.p,{type:"date",value:ee.start_date||"",onChange:e=>es(s=>({...s,start_date:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,a.jsx)(S.p,{type:"date",value:ee.end_date||"",onChange:e=>es(s=>({...s,end_date:e.target.value}))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Case"}),(0,a.jsx)("textarea",{value:ee.business_case||"",onChange:e=>es(s=>({...s,business_case:e.target.value})),placeholder:"Enter business case and justification",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Scope"}),(0,a.jsx)("textarea",{value:ee.project_scope||"",onChange:e=>es(s=>({...s,project_scope:e.target.value})),placeholder:"Define project scope and boundaries",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Success Criteria"}),(0,a.jsx)("textarea",{value:ee.success_criteria||"",onChange:e=>es(s=>({...s,success_criteria:e.target.value})),placeholder:"Define success criteria and acceptance criteria",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Team & Organization"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Team Lead"}),(0,a.jsx)(S.p,{value:ee.assigned_team_lead||"",onChange:e=>es(s=>({...s,assigned_team_lead:e.target.value})),placeholder:"Enter team lead name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Sponsor"}),(0,a.jsx)(S.p,{value:ee.sponsor||"",onChange:e=>es(s=>({...s,sponsor:e.target.value})),placeholder:"Enter project sponsor"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,a.jsx)(S.p,{value:ee.department||"",onChange:e=>es(s=>({...s,department:e.target.value})),placeholder:"Enter department"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget"}),(0,a.jsx)(S.p,{type:"number",value:ee.budget||"",onChange:e=>es(s=>({...s,budget:parseFloat(e.target.value)||0})),placeholder:"0.00"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Budget"}),(0,a.jsx)(S.p,{type:"number",value:ee.estimated_budget||"",onChange:e=>es(s=>({...s,estimated_budget:parseFloat(e.target.value)||0})),placeholder:"0.00"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Charter Status"}),(0,a.jsxs)("select",{value:ee.charter_status||"draft",onChange:e=>es(s=>({...s,charter_status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"draft",children:"Draft"}),(0,a.jsx)("option",{value:"under_review",children:"Under Review"}),(0,a.jsx)("option",{value:"approved",children:"Approved"}),(0,a.jsx)("option",{value:"active",children:"Active"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Completion %"}),(0,a.jsx)(S.p,{type:"number",min:"0",max:"100",value:ee.completion_percentage||"",onChange:e=>es(s=>({...s,completion_percentage:parseInt(e.target.value)||0})),placeholder:"0"})]})]}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2 mt-6",children:"PMBOK Framework"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Risk Assessment"}),(0,a.jsx)("textarea",{value:ee.risk_assessment||"",onChange:e=>es(s=>({...s,risk_assessment:e.target.value})),placeholder:"Identify key risks and mitigation strategies",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quality Metrics"}),(0,a.jsx)("textarea",{value:ee.quality_metrics||"",onChange:e=>es(s=>({...s,quality_metrics:e.target.value})),placeholder:"Define quality standards and metrics",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Communication Plan"}),(0,a.jsx)("textarea",{value:ee.communication_plan||"",onChange:e=>es(s=>({...s,communication_plan:e.target.value})),placeholder:"Define communication strategy and stakeholder engagement",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Constraints"}),(0,a.jsx)("textarea",{value:ee.constraints||"",onChange:e=>es(s=>({...s,constraints:e.target.value})),placeholder:"List project constraints and limitations",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assumptions"}),(0,a.jsx)("textarea",{value:ee.assumptions||"",onChange:e=>es(s=>({...s,assumptions:e.target.value})),placeholder:"List key project assumptions",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-6 pt-6 border-t",children:[(0,a.jsxs)(A.$,{onClick:ep,disabled:!ee.title,children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Create Project"]}),(0,a.jsx)(A.$,{variant:"outline",onClick:()=>{Z(!1),eh()},children:"Cancel"})]})]})})}),H&&Q&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Edit Project"}),(0,a.jsx)(A.$,{variant:"outline",size:"sm",onClick:()=>{K(!1),V(null)},children:(0,a.jsx)(_.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Basic Information"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Title *"}),(0,a.jsx)(S.p,{value:Q.title||"",onChange:e=>V(s=>s?{...s,title:e.target.value}:null),placeholder:"Enter project title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Code"}),(0,a.jsx)(S.p,{value:Q.project_code||"",onChange:e=>V(s=>s?{...s,project_code:e.target.value}:null),placeholder:"Enter project code"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{value:Q.description||"",onChange:e=>V(s=>s?{...s,description:e.target.value}:null),placeholder:"Enter project description",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,a.jsxs)("select",{value:Q.priority||"medium",onChange:e=>V(s=>s?{...s,priority:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"}),(0,a.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Type"}),(0,a.jsxs)("select",{value:Q.project_type||"internal",onChange:e=>V(s=>s?{...s,project_type:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"internal",children:"Internal"}),(0,a.jsx)("option",{value:"external",children:"External"}),(0,a.jsx)("option",{value:"client",children:"Client"}),(0,a.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,a.jsx)("option",{value:"enhancement",children:"Enhancement"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,a.jsx)(S.p,{type:"date",value:Q.start_date||"",onChange:e=>V(s=>s?{...s,start_date:e.target.value}:null)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,a.jsx)(S.p,{type:"date",value:Q.end_date||"",onChange:e=>V(s=>s?{...s,end_date:e.target.value}:null)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Case"}),(0,a.jsx)("textarea",{value:Q.business_case||"",onChange:e=>V(s=>s?{...s,business_case:e.target.value}:null),placeholder:"Enter business case and justification",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Scope"}),(0,a.jsx)("textarea",{value:Q.project_scope||"",onChange:e=>V(s=>s?{...s,project_scope:e.target.value}:null),placeholder:"Define project scope and boundaries",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Success Criteria"}),(0,a.jsx)("textarea",{value:Q.success_criteria||"",onChange:e=>V(s=>s?{...s,success_criteria:e.target.value}:null),placeholder:"Define success criteria and acceptance criteria",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Team & Organization"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Team Lead"}),(0,a.jsx)(S.p,{value:Q.assigned_team_lead||"",onChange:e=>V(s=>s?{...s,assigned_team_lead:e.target.value}:null),placeholder:"Enter team lead name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Sponsor"}),(0,a.jsx)(S.p,{value:Q.sponsor||"",onChange:e=>V(s=>s?{...s,sponsor:e.target.value}:null),placeholder:"Enter project sponsor"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,a.jsx)(S.p,{value:Q.department||"",onChange:e=>V(s=>s?{...s,department:e.target.value}:null),placeholder:"Enter department"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget"}),(0,a.jsx)(S.p,{type:"number",value:Q.budget||"",onChange:e=>V(s=>s?{...s,budget:parseFloat(e.target.value)||0}:null),placeholder:"0.00"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Budget"}),(0,a.jsx)(S.p,{type:"number",value:Q.estimated_budget||"",onChange:e=>V(s=>s?{...s,estimated_budget:parseFloat(e.target.value)||0}:null),placeholder:"0.00"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Charter Status"}),(0,a.jsxs)("select",{value:Q.charter_status||"draft",onChange:e=>V(s=>s?{...s,charter_status:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"draft",children:"Draft"}),(0,a.jsx)("option",{value:"under_review",children:"Under Review"}),(0,a.jsx)("option",{value:"approved",children:"Approved"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"on_hold",children:"On Hold"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Completion %"}),(0,a.jsx)(S.p,{type:"number",min:"0",max:"100",value:Q.completion_percentage||"",onChange:e=>V(s=>s?{...s,completion_percentage:parseInt(e.target.value)||0}:null),placeholder:"0"})]})]}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2 mt-6",children:"PMBOK Framework"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Risk Assessment"}),(0,a.jsx)("textarea",{value:Q.risk_assessment||"",onChange:e=>V(s=>s?{...s,risk_assessment:e.target.value}:null),placeholder:"Identify key risks and mitigation strategies",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quality Metrics"}),(0,a.jsx)("textarea",{value:Q.quality_metrics||"",onChange:e=>V(s=>s?{...s,quality_metrics:e.target.value}:null),placeholder:"Define quality standards and metrics",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Communication Plan"}),(0,a.jsx)("textarea",{value:Q.communication_plan||"",onChange:e=>V(s=>s?{...s,communication_plan:e.target.value}:null),placeholder:"Define communication strategy and stakeholder engagement",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Constraints"}),(0,a.jsx)("textarea",{value:Q.constraints||"",onChange:e=>V(s=>s?{...s,constraints:e.target.value}:null),placeholder:"List project constraints and limitations",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assumptions"}),(0,a.jsx)("textarea",{value:Q.assumptions||"",onChange:e=>V(s=>s?{...s,assumptions:e.target.value}:null),placeholder:"List key project assumptions",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-6 pt-6 border-t",children:[(0,a.jsxs)(A.$,{onClick:eg,disabled:!Q.title,children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Update Project"]}),(0,a.jsx)(A.$,{variant:"outline",onClick:()=>{K(!1),V(null)},children:"Cancel"})]})]})})})]})}):(0,a.jsx)(D.A,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Please select a tenant to view project management."})})})}},2814:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var a=t(5155),r=t(2115),l=t(9434);let n=r.forwardRef((e,s)=>{let{className:t,variant:r="default",...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",{"border-transparent bg-blue-600 text-white hover:bg-blue-700":"default"===r,"border-transparent bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===r,"border-transparent bg-red-600 text-white hover:bg-red-700":"destructive"===r,"text-gray-950 border-gray-200 bg-white hover:bg-gray-50":"outline"===r},t),...n})});n.displayName="Badge"},3741:(e,s,t)=>{"use strict";t.d(s,{$:()=>n});var a=t(5155),r=t(2115),l=t(9434);let n=r.forwardRef((e,s)=>{let{className:t,variant:r="default",size:n="default",...i}=e;return(0,a.jsx)("button",{className:(0,l.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"default"===r,"bg-red-600 text-white hover:bg-red-700":"destructive"===r,"border border-gray-300 bg-white hover:bg-gray-50":"outline"===r,"bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===r,"hover:bg-gray-100":"ghost"===r,"text-blue-600 underline-offset-4 hover:underline":"link"===r},{"h-10 px-4 py-2":"default"===n,"h-9 rounded-md px-3":"sm"===n,"h-11 rounded-md px-8":"lg"===n,"h-10 w-10":"icon"===n},t),ref:s,...i})});n.displayName="Button"},3915:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var a=t(5155),r=t(2115),l=t(9434);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});n.displayName="Input"},7737:(e,s,t)=>{"use strict";t.d(s,{K:()=>o,TenantProvider:()=>c});var a=t(5155),r=t(2115),l=t(2099),n=t(7020);let i=(0,r.createContext)(void 0);function c(e){let{children:s}=e,{user:t,tenantUser:c,isAuthenticated:o,isDemoMode:d}=(0,n.h)(),[m,u]=(0,r.useState)(null),[x,p]=(0,r.useState)([]),[h,g]=(0,r.useState)(!0),j={id:"demo-tenant-id",name:"Demo Company",domain:"demo.company.com",status:"active",subscription_plan:"professional",subscription_start_date:new Date().toISOString(),max_users:100,current_users:5,settings:{},tenant_id:"demo-tenant-id",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},b=async()=>{if(d){p([j]),u(j),g(!1);return}if(!o||!t){p([]),u(null),g(!1);return}try{if((null==c?void 0:c.role)==="host_admin"){let{data:e,error:s}=await l.ND.from("tenants").select("*").order("name");if(s)throw s;p(e||[]);let t=(null==e?void 0:e[0])||null;u(t)}else{let{data:e,error:s}=await l.ND.from("tenant_users").select("tenant_id").eq("user_id",t.id).eq("is_active",!0);if(s)throw s;if(e&&e.length>0){let s=e.map(e=>e.tenant_id),{data:t,error:a}=await l.ND.from("tenants").select("*").in("id",s).order("name");if(a)throw a;p(t||[]);let r=(null==t?void 0:t.find(e=>e.id===(null==c?void 0:c.tenant_id)))||(null==t?void 0:t[0])||null;u(r)}else p([]),u(null)}}catch(e){console.error("Error loading tenants:",e),p([]),u(null)}finally{g(!1)}};return(0,r.useEffect)(()=>{b()},[o,t,c,d]),(0,a.jsx)(i.Provider,{value:{selectedTenant:m,setSelectedTenant:u,availableTenants:x,isLoading:h,loadAvailableTenants:b,canSelectTenant:()=>!d&&((null==c?void 0:c.role)==="host_admin"||(null==c?void 0:c.role)==="program_manager"),isDemoMode:d},children:s})}function o(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useTenant must be used within a TenantProvider");return e}},8762:(e,s,t)=>{Promise.resolve().then(t.bind(t,1266))}},e=>{var s=s=>e(e.s=s);e.O(0,[7590,2354,6063,2099,4660,4619,8441,1684,7358],()=>s(8762)),_N_E=e.O()}]);