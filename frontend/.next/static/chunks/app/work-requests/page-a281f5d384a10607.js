(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2415],{3741:(e,t,s)=>{"use strict";s.d(t,{$:()=>l});var r=s(5155),a=s(2115),n=s(9434);let l=a.forwardRef((e,t)=>{let{className:s,variant:a="default",size:l="default",...i}=e;return(0,r.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"default"===a,"bg-red-600 text-white hover:bg-red-700":"destructive"===a,"border border-gray-300 bg-white hover:bg-gray-50":"outline"===a,"bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===a,"hover:bg-gray-100":"ghost"===a,"text-blue-600 underline-offset-4 hover:underline":"link"===a},{"h-10 px-4 py-2":"default"===l,"h-9 rounded-md px-3":"sm"===l,"h-11 rounded-md px-8":"lg"===l,"h-10 w-10":"icon"===l},s),ref:t,...i})});l.displayName="Button"},5851:(e,t,s)=>{Promise.resolve().then(s.bind(s,9950))},7737:(e,t,s)=>{"use strict";s.d(t,{K:()=>c,O:()=>d,TenantProvider:()=>o});var r=s(5155),a=s(2115),n=s(2099),l=s(7020);let i=(0,a.createContext)(void 0);function o(e){let{children:t}=e,{user:s,tenantUser:o,isAuthenticated:c,isDemoMode:d}=(0,l.As)(),[u,m]=(0,a.useState)(null),[x,g]=(0,a.useState)([]),[h,p]=(0,a.useState)(!0),f=(0,n.createClient)(),b={id:"demo-tenant-id",name:"Demo Company",domain:"demo.company.com",status:"active",subscription_plan:"professional",subscription_start_date:new Date().toISOString(),max_users:100,current_users:5,settings:{},tenant_id:"demo-tenant-id",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},v=async()=>{if(d){g([b]),m(b),p(!1);return}if(!c||!s){g([]),m(null),p(!1);return}try{if((null==o?void 0:o.role)==="host_admin"){let{data:e,error:t}=await f.from("tenants").select("*").order("name");if(t)throw t;g(e||[]);let s=(null==e?void 0:e[0])||null;m(s)}else{let{data:e,error:t}=await f.from("user_tenant_access").select("tenant_id").eq("user_id",s.id).eq("is_active",!0);if(t)throw t;if(e&&e.length>0){let t=e.map(e=>e.tenant_id),{data:s,error:r}=await f.from("tenants").select("*").in("id",t).order("name");if(r)throw r;g(s||[]);let a=(null==s?void 0:s.find(e=>e.id===(null==o?void 0:o.tenant_id)))||(null==s?void 0:s[0])||null;m(a)}else g([]),m(null)}}catch(e){console.error("Error loading tenants:",e),g([]),m(null)}finally{p(!1)}};return(0,a.useEffect)(()=>{v()},[c,s,o,d]),(0,r.jsx)(i.Provider,{value:{selectedTenant:u,setSelectedTenant:m,availableTenants:x,isLoading:h,loadAvailableTenants:v,canSelectTenant:()=>!d&&((null==o?void 0:o.role)==="host_admin"||(null==o?void 0:o.role)==="program_manager"),isDemoMode:d},children:t})}function c(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useTenant must be used within a TenantProvider");return e}function d(){let{selectedTenant:e,isDemoMode:t}=c();return t?"demo-tenant-id":(null==e?void 0:e.id)||null}},9950:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>W});var r=s(5155),a=s(2115),n=s(1073),l=s(8156),i=s(2550),o=s(3878),c=s(9169),d=s(3715),u=s(7159),m=s(477),x=s(9076),g=s(7808),h=s(6836),p=s(3741),f=s(7703),b=s(858),v=s(2539),j=s(4821),y=s(2811),w=s(7737);function _(){let{selectedTenant:e,setSelectedTenant:t,availableTenants:s,canSelectTenant:n,isDemoMode:l}=(0,w.K)(),[i,o]=(0,a.useState)(!1);if(!n()||l||s.length<=1)return null;let c=e=>{t(e),o(!1)};return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)(p.$,{variant:"outline",onClick:()=>o(!i),className:"flex items-center gap-2 min-w-[200px] justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"truncate",children:(null==e?void 0:e.name)||"Select Tenant"})]}),(0,r.jsx)(j.A,{className:"h-4 w-4 transition-transform ".concat(i?"rotate-180":"")})]}),i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>o(!1)}),(0,r.jsx)("div",{className:"absolute top-full left-0 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg z-20 max-h-60 overflow-y-auto",children:s.map(t=>(0,r.jsxs)("button",{onClick:()=>c(t),className:"w-full px-3 py-2 text-left hover:bg-gray-50 flex items-center justify-between group",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-medium text-gray-900",children:t.name}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[t.domain," â€¢ ",t.subscription_plan]})]}),(null==e?void 0:e.id)===t.id&&(0,r.jsx)(y.A,{className:"h-4 w-4 text-blue-600"})]},t.id))})]})]})}var N=s(2099);class k{async getWorkRequests(e){let{data:t,error:s}=await this.supabase.from("work_requests").select("\n        *,\n        customer:users!customer_id(first_name, last_name, email),\n        assigned:team_members!assigned_to(name)\n      ").eq("tenant_id",e).order("created_at",{ascending:!1});if(s)throw console.error("Error fetching work requests:",s),Error("Failed to fetch work requests");return t.map(e=>{var t,s;return{...e,customer_name:e.customer?"".concat(e.customer.first_name," ").concat(e.customer.last_name):"Unknown",customer_email:(null==(t=e.customer)?void 0:t.email)||"",assigned_name:(null==(s=e.assigned)?void 0:s.name)||""}})}async getWorkRequestsForUser(e,t){let{data:s,error:r}=await this.supabase.from("work_requests").select("\n        *,\n        customer:users!customer_id(first_name, last_name, email),\n        assigned:team_members!assigned_to(name)\n      ").eq("customer_id",e).eq("tenant_id",t).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching user work requests:",r),Error("Failed to fetch work requests");return s.map(e=>{var t,s;return{...e,customer_name:e.customer?"".concat(e.customer.first_name," ").concat(e.customer.last_name):"Unknown",customer_email:(null==(t=e.customer)?void 0:t.email)||"",assigned_name:(null==(s=e.assigned)?void 0:s.name)||""}})}async getWorkRequest(e){var t,s;let{data:r,error:a}=await this.supabase.from("work_requests").select("\n        *,\n        customer:users!customer_id(first_name, last_name, email),\n        assigned:team_members!assigned_to(name)\n      ").eq("id",e).single();return a?(console.error("Error fetching work request:",a),null):{...r,customer_name:r.customer?"".concat(r.customer.first_name," ").concat(r.customer.last_name):"Unknown",customer_email:(null==(t=r.customer)?void 0:t.email)||"",assigned_name:(null==(s=r.assigned)?void 0:s.name)||""}}async createWorkRequest(e,t,s){var r,a;let{data:n,error:l}=await this.supabase.from("work_requests").insert({...e,customer_id:t,tenant_id:s,status:"submitted"}).select("\n        *,\n        customer:users!customer_id(first_name, last_name, email),\n        assigned:team_members!assigned_to(name)\n      ").single();if(l)throw console.error("Error creating work request:",l),Error("Failed to create work request");return{...n,customer_name:n.customer?"".concat(n.customer.first_name," ").concat(n.customer.last_name):"Unknown",customer_email:(null==(r=n.customer)?void 0:r.email)||"",assigned_name:(null==(a=n.assigned)?void 0:a.name)||""}}async updateWorkRequest(e,t){var s,r;let{data:a,error:n}=await this.supabase.from("work_requests").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select("\n        *,\n        customer:users!customer_id(first_name, last_name, email),\n        assigned:team_members!assigned_to(name)\n      ").single();if(n)throw console.error("Error updating work request:",n),Error("Failed to update work request");return{...a,customer_name:a.customer?"".concat(a.customer.first_name," ").concat(a.customer.last_name):"Unknown",customer_email:(null==(s=a.customer)?void 0:s.email)||"",assigned_name:(null==(r=a.assigned)?void 0:r.name)||""}}async deleteWorkRequest(e){let{error:t}=await this.supabase.from("work_requests").delete().eq("id",e);if(t)throw console.error("Error deleting work request:",t),Error("Failed to delete work request")}async getWorkRequestStats(e){let{data:t,error:s}=await this.supabase.from("work_requests").select("status").eq("tenant_id",e);if(s)throw console.error("Error fetching work request stats:",s),Error("Failed to fetch work request statistics");let r={total:t.length,submitted:0,under_review:0,approved:0,rejected:0,in_progress:0,completed:0};return t.forEach(e=>{e.status in r&&r[e.status]++}),r}async getTeamMembers(e){let{data:t,error:s}=await this.supabase.from("team_members").select("id, name, role").eq("is_active",!0).order("name");return s?(console.error("Error fetching team members:",s),[]):t||[]}constructor(){this.supabase=(0,N.createClient)()}}let q=new k;var S=s(7020),C=s(8513);let E={submitted:{icon:n.A,color:"text-blue-600",bg:"bg-blue-100",label:"Submitted"},under_review:{icon:l.A,color:"text-yellow-600",bg:"bg-yellow-100",label:"Under Review"},approved:{icon:i.A,color:"text-green-600",bg:"bg-green-100",label:"Approved"},rejected:{icon:o.A,color:"text-red-600",bg:"bg-red-100",label:"Rejected"},scheduled:{icon:c.A,color:"text-purple-600",bg:"bg-purple-100",label:"Scheduled"},in_progress:{icon:n.A,color:"text-indigo-600",bg:"bg-indigo-100",label:"In Progress"},completed:{icon:i.A,color:"text-green-600",bg:"bg-green-100",label:"Completed"},cancelled:{icon:o.A,color:"text-gray-600",bg:"bg-gray-100",label:"Cancelled"}},R={low:{color:"text-gray-600",bg:"bg-gray-100",label:"Low"},medium:{color:"text-yellow-600",bg:"bg-yellow-100",label:"Medium"},high:{color:"text-orange-600",bg:"bg-orange-100",label:"High"},critical:{color:"text-red-600",bg:"bg-red-100",label:"Critical"}};function A(e){let{isOpen:t,onClose:s,workRequest:n,onSave:l}=e,[i,o]=(0,a.useState)({title:"",description:"",category:"",priority:"medium",urgency:"medium",estimated_hours:"",budget:"",required_completion_date:""}),[c,d]=(0,a.useState)(!1),u=(0,w.O)(),{user:m}=(0,S.As)();(0,a.useEffect)(()=>{if(n){var e,t;o({title:n.title,description:n.description,category:n.category,priority:n.priority,urgency:n.urgency,estimated_hours:(null==(e=n.estimated_hours)?void 0:e.toString())||"",budget:(null==(t=n.budget)?void 0:t.toString())||"",required_completion_date:n.required_completion_date||""})}else o({title:"",description:"",category:"",priority:"medium",urgency:"medium",estimated_hours:"",budget:"",required_completion_date:""})},[n]);let x=async e=>{if(e.preventDefault(),u&&m){d(!0);try{let e={title:i.title,description:i.description,category:i.category,priority:i.priority,urgency:i.urgency,estimated_hours:i.estimated_hours?parseInt(i.estimated_hours):void 0,budget:i.budget?parseFloat(i.budget):void 0,required_completion_date:i.required_completion_date||void 0};n?await q.updateWorkRequest(n.id,e):await q.createWorkRequest(e,m.id,u),l(),s()}catch(e){console.error("Error saving work request:",e),alert("Failed to save work request. Please try again.")}finally{d(!1)}}};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:n?"Edit Work Request":"Create New Work Request"}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),(0,r.jsx)("input",{type:"text",required:!0,value:i.title,onChange:e=>o({...i,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,r.jsx)("textarea",{required:!0,rows:4,value:i.description,onChange:e=>o({...i,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,r.jsxs)("select",{required:!0,value:i.category,onChange:e=>o({...i,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Select Category"}),(0,r.jsx)("option",{value:"system_integration",children:"System Integration"}),(0,r.jsx)("option",{value:"web_development",children:"Web Development"}),(0,r.jsx)("option",{value:"data_migration",children:"Data Migration"}),(0,r.jsx)("option",{value:"reporting",children:"Reporting"}),(0,r.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,r.jsx)("option",{value:"training",children:"Training"}),(0,r.jsx)("option",{value:"other",children:"Other"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority *"}),(0,r.jsxs)("select",{required:!0,value:i.priority,onChange:e=>o({...i,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"low",children:"Low"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"high",children:"High"}),(0,r.jsx)("option",{value:"critical",children:"Critical"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Urgency *"}),(0,r.jsxs)("select",{required:!0,value:i.urgency,onChange:e=>o({...i,urgency:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"low",children:"Low"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"high",children:"High"}),(0,r.jsx)("option",{value:"urgent",children:"Urgent"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Hours"}),(0,r.jsx)("input",{type:"number",min:"1",value:i.estimated_hours,onChange:e=>o({...i,estimated_hours:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget"}),(0,r.jsx)("input",{type:"number",min:"0",step:"0.01",value:i.budget,onChange:e=>o({...i,budget:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Required Completion Date"}),(0,r.jsx)("input",{type:"date",value:i.required_completion_date,onChange:e=>o({...i,required_completion_date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,r.jsx)(p.$,{type:"button",variant:"outline",onClick:s,disabled:c,children:"Cancel"}),(0,r.jsx)(p.$,{type:"submit",disabled:c,children:c?"Saving...":n?"Update":"Create"})]})]})]})}):null}function W(){let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[v,j]=(0,a.useState)(!0),[y,N]=(0,a.useState)(null),[k,W]=(0,a.useState)(""),[O,U]=(0,a.useState)(""),[T,F]=(0,a.useState)(""),[D,L]=(0,a.useState)(!1),[$,P]=(0,a.useState)(null),[I,K]=(0,a.useState)({total:0,submitted:0,under_review:0,approved:0,rejected:0,in_progress:0,completed:0}),M=(0,w.O)(),{user:z,tenantUser:G}=(0,S.As)(),{canCreate:Z,canUpdate:Q,canDelete:H,canView:B}=(0,C.Sk)(),Y=async()=>{if(M){j(!0);try{let e;e=(null==G?void 0:G.role)==="client_user"&&z?await q.getWorkRequestsForUser(z.id,M):await q.getWorkRequests(M),t(e),o(e);let s=await q.getWorkRequestStats(M);K(s)}catch(e){N("Failed to load work requests"),console.error("Error loading work requests:",e)}finally{j(!1)}}};(0,a.useEffect)(()=>{let t=e;k&&(t=t.filter(e=>{var t;return e.title.toLowerCase().includes(k.toLowerCase())||e.description.toLowerCase().includes(k.toLowerCase())||(null==(t=e.customer_name)?void 0:t.toLowerCase().includes(k.toLowerCase()))})),O&&(t=t.filter(e=>e.status===O)),T&&(t=t.filter(e=>e.priority===T)),o(t)},[e,k,O,T]),(0,a.useEffect)(()=>{M&&Y()},[M]);let J=()=>{P(null),L(!0)},V=e=>{P(e),L(!0)},X=async e=>{if(confirm("Are you sure you want to delete this work request?"))try{await q.deleteWorkRequest(e.id),Y()}catch(e){console.error("Error deleting work request:",e),alert("Failed to delete work request")}},ee=e=>new Date(e).toLocaleDateString();return B(C.Gv.WORK_REQUESTS)?(0,r.jsx)(b.A,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Work Requests"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage and track work requests"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(_,{}),Z(C.Gv.WORK_REQUESTS)&&(0,r.jsxs)(p.$,{onClick:J,children:[(0,r.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"New Request"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,r.jsx)(f.Zp,{children:(0,r.jsx)(f.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Requests"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:I.total})]}),(0,r.jsx)("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(n.A,{className:"h-4 w-4 text-blue-600"})})]})})}),(0,r.jsx)(f.Zp,{children:(0,r.jsx)(f.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:I.in_progress})]}),(0,r.jsx)("div",{className:"h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(n.A,{className:"h-4 w-4 text-indigo-600"})})]})})}),(0,r.jsx)(f.Zp,{children:(0,r.jsx)(f.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:I.completed})]}),(0,r.jsx)("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(i.A,{className:"h-4 w-4 text-green-600"})})]})})}),(0,r.jsx)(f.Zp,{children:(0,r.jsx)(f.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Under Review"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:I.under_review})]}),(0,r.jsx)("div",{className:"h-8 w-8 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(l.A,{className:"h-4 w-4 text-yellow-600"})})]})})})]}),(0,r.jsx)(f.Zp,{className:"mb-6",children:(0,r.jsx)(f.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,r.jsx)("input",{type:"text",placeholder:"Search requests...",value:k,onChange:e=>W(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),(0,r.jsxs)("select",{value:O,onChange:e=>U(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"All Statuses"}),Object.entries(E).map(e=>{let[t,s]=e;return(0,r.jsx)("option",{value:t,children:s.label},t)})]}),(0,r.jsxs)("select",{value:T,onChange:e=>F(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"All Priorities"}),Object.entries(R).map(e=>{let[t,s]=e;return(0,r.jsx)("option",{value:t,children:s.label},t)})]})]})})}),v?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading work requests..."})]}):y?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("p",{className:"text-red-600",children:y}),(0,r.jsx)(p.$,{onClick:Y,className:"mt-4",children:"Try Again"})]}):0===s.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No work requests found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:0===e.length?"Get started by creating your first work request.":"Try adjusting your search or filter criteria."}),Z(C.Gv.WORK_REQUESTS)&&0===e.length&&(0,r.jsxs)(p.$,{onClick:J,children:[(0,r.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Create First Request"]})]}):(0,r.jsx)("div",{className:"space-y-4",children:s.map(e=>{var t;let s=(null==(t=E[e.status])?void 0:t.icon)||n.A,a=E[e.status]||E.submitted,l=R[e.priority]||R.medium;return(0,r.jsx)(f.Zp,{className:"hover:shadow-md transition-shadow",children:(0,r.jsx)(f.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(a.bg," ").concat(a.color),children:[(0,r.jsx)(s,{className:"h-3 w-3 mr-1"}),a.label]}),(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(l.bg," ").concat(l.color),children:l.label})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-3 line-clamp-2",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(m.A,{className:"h-4 w-4"}),e.customer_name]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(c.A,{className:"h-4 w-4"}),"Created ",ee(e.created_at)]}),e.estimated_hours&&(0,r.jsxs)("div",{children:["Est. ",e.estimated_hours,"h"]}),e.budget&&(0,r.jsxs)("div",{children:["$",e.budget.toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,r.jsx)(p.$,{variant:"outline",size:"sm",children:(0,r.jsx)(x.A,{className:"h-4 w-4"})}),Q(C.Gv.WORK_REQUESTS)&&(0,r.jsx)(p.$,{variant:"outline",size:"sm",onClick:()=>V(e),children:(0,r.jsx)(g.A,{className:"h-4 w-4"})}),H(C.Gv.WORK_REQUESTS)&&(0,r.jsx)(p.$,{variant:"outline",size:"sm",onClick:()=>X(e),className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(h.A,{className:"h-4 w-4"})})]})]})})},e.id)})}),(0,r.jsx)(A,{isOpen:D,onClose:()=>L(!1),workRequest:$,onSave:Y})]})}):(0,r.jsx)(b.A,{children:(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600",children:"You don't have permission to view work requests."})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7590,2354,4142,4660,4619,2099,8441,1684,7358],()=>t(5851)),_N_E=e.O()}]);