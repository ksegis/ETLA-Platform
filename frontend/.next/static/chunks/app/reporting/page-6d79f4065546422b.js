(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7747],{2814:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var r=a(5155),l=a(2115),s=a(9434);let n=l.forwardRef((e,t)=>{let{className:a,variant:l="default",...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",{"border-transparent bg-blue-600 text-white hover:bg-blue-700":"default"===l,"border-transparent bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===l,"border-transparent bg-red-600 text-white hover:bg-red-700":"destructive"===l,"text-gray-950 border-gray-200 bg-white hover:bg-gray-50":"outline"===l},a),...n})});n.displayName="Badge"},3741:(e,t,a)=>{"use strict";a.d(t,{$:()=>n});var r=a(5155),l=a(2115),s=a(9434);let n=l.forwardRef((e,t)=>{let{className:a,variant:l="default",size:n="default",...i}=e;return(0,r.jsx)("button",{className:(0,s.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"default"===l,"bg-red-600 text-white hover:bg-red-700":"destructive"===l,"border border-gray-300 bg-white hover:bg-gray-50":"outline"===l,"bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===l,"hover:bg-gray-100":"ghost"===l,"text-blue-600 underline-offset-4 hover:underline":"link"===l},{"h-10 px-4 py-2":"default"===n,"h-9 rounded-md px-3":"sm"===n,"h-11 rounded-md px-8":"lg"===n,"h-10 w-10":"icon"===n},a),ref:t,...i})});n.displayName="Button"},3915:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var r=a(5155),l=a(2115),s=a(9434);let n=l.forwardRef((e,t)=>{let{className:a,type:l,...n}=e;return(0,r.jsx)("input",{type:l,className:(0,s.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});n.displayName="Input"},6895:(e,t,a)=>{Promise.resolve().then(a.bind(a,9697))},7703:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i});var r=a(5155),l=a(2115),s=a(9434);let n=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm",a),...l})});n.displayName="Card";let i=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...l})});i.displayName="CardHeader";let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});o.displayName="CardTitle";let d=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-gray-500",a),...l})});d.displayName="CardDescription";let c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...l})});c.displayName="CardContent",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"},7737:(e,t,a)=>{"use strict";a.d(t,{K:()=>d,TenantProvider:()=>o});var r=a(5155),l=a(2115),s=a(2099),n=a(7020);let i=(0,l.createContext)(void 0);function o(e){let{children:t}=e,{user:a,tenantUser:o,isAuthenticated:d,isDemoMode:c}=(0,n.h)(),[m,u]=(0,l.useState)(null),[p,x]=(0,l.useState)([]),[h,y]=(0,l.useState)(!0),g={id:"demo-tenant-id",name:"Demo Company",domain:"demo.company.com",status:"active",subscription_plan:"professional",subscription_start_date:new Date().toISOString(),max_users:100,current_users:5,settings:{},tenant_id:"demo-tenant-id",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},b=async()=>{if(c){x([g]),u(g),y(!1);return}if(!d||!a){x([]),u(null),y(!1);return}try{if((null==o?void 0:o.role)==="host_admin"){let{data:e,error:t}=await s.ND.from("tenants").select("*").order("name");if(t)throw t;x(e||[]);let a=(null==e?void 0:e[0])||null;u(a)}else{let{data:e,error:t}=await s.ND.from("tenant_users").select("tenant_id").eq("user_id",a.id).eq("is_active",!0);if(t)throw t;if(e&&e.length>0){let t=e.map(e=>e.tenant_id),{data:a,error:r}=await s.ND.from("tenants").select("*").in("id",t).order("name");if(r)throw r;x(a||[]);let l=(null==a?void 0:a.find(e=>e.id===(null==o?void 0:o.tenant_id)))||(null==a?void 0:a[0])||null;u(l)}else x([]),u(null)}}catch(e){console.error("Error loading tenants:",e),x([]),u(null)}finally{y(!1)}};return(0,l.useEffect)(()=>{b()},[d,a,o,c]),(0,r.jsx)(i.Provider,{value:{selectedTenant:m,setSelectedTenant:u,availableTenants:p,isLoading:h,loadAvailableTenants:b,canSelectTenant:()=>!c&&((null==o?void 0:o.role)==="host_admin"||(null==o?void 0:o.role)==="program_manager"),isDemoMode:c},children:t})}function d(){let e=(0,l.useContext)(i);if(void 0===e)throw Error("useTenant must be used within a TenantProvider");return e}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s});var r=a(2596),l=a(9688);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.QP)((0,r.$)(t))}},9697:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(5155),l=a(2115),s=a(7020),n=a(7737),i=a(2099),o=a(7703),d=a(3741),c=a(3915),m=a(2814);function u(){var e,t,a,u,p,x;let{user:h}=(0,s.h)(),{selectedTenant:y}=(0,n.K)(),[g,b]=(0,l.useState)("employees"),[f,v]=(0,l.useState)(!1),[j,N]=(0,l.useState)(null),[w,_]=(0,l.useState)(""),[R,k]=(0,l.useState)([]),[S,C]=(0,l.useState)([]),[T,D]=(0,l.useState)([]),[E,L]=(0,l.useState)([]),[O,A]=(0,l.useState)([]),[P,U]=(0,l.useState)({dateRange:{start:"",end:""},department:"",employeeStatus:"",location:"",jobTitle:"",payType:"",salaryRange:{min:"",max:""}}),q=async e=>{if(null==y?void 0:y.id){v(!0),N(null);try{switch(e){case"employees":await F();break;case"checks":await B();break;case"jobs":await Z();break;case"salary":await J();break;case"timecards":await M();break;case"all-reports":await $()}}catch(t){console.error("Error loading ".concat(e," data:"),t),N("Failed to load ".concat(e," data: ").concat(t instanceof Error?t.message:"Unknown error"))}finally{v(!1)}}},F=async()=>{if(!(null==y?void 0:y.id))return;let{data:e,error:t}=await i.ND.from("employees").select("*").eq("customer_id",y.id).order("created_at",{ascending:!1});if(t)throw t;k(e||[])},B=async()=>{if(!(null==y?void 0:y.id))return;let{data:e,error:t}=await i.ND.from("pay_statements").select("*").eq("customer_id",y.id).order("pay_date",{ascending:!1});if(t)throw t;C(e||[])},Z=async()=>{if(!(null==y?void 0:y.id))return;let{data:e,error:t}=await i.ND.from("employees").select("position, home_department, employment_type, work_location, customer_id").eq("customer_id",y.id).not("position","is",null);if(t)throw t;D(Object.values(e.reduce((e,t)=>{let a="".concat(t.position,"-").concat(t.home_department);return e[a]||(e[a]={position:t.position,department:t.home_department,employment_type:t.employment_type,location:t.work_location,count:0}),e[a].count++,e},{})))},J=async()=>{if(!(null==y?void 0:y.id))return;let{data:e,error:t}=await i.ND.from("employees").select("employee_name, employee_code, position, pay_period_salary, hourly_rate, pay_type, home_department").eq("customer_id",y.id).not("pay_period_salary","is",null);if(t)throw t;L(e||[])},M=async()=>{if(!(null==y?void 0:y.id))return;let{data:e,error:t}=await i.ND.from("timecards").select("*").eq("customer_id",y.id).order("work_date",{ascending:!1});if(t)throw t;A(e||[])},$=async()=>{(null==y?void 0:y.id)&&await Promise.all([F(),B(),Z(),J(),M()])};(0,l.useEffect)(()=>{(null==y?void 0:y.id)&&q(g)},[g,null==y?void 0:y.id]);let I=(e,t)=>{if(!e.length)return;let a=Object.keys(e[0]),r=new Blob([[a.join(","),...e.map(e=>a.map(t=>'"'.concat(e[t]||"",'"')).join(","))].join("\n")],{type:"text/csv"}),l=window.URL.createObjectURL(r),s=document.createElement("a");s.href=l,s.download=t,s.click(),window.URL.revokeObjectURL(l)},H=(e,t)=>{let a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=window.URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=t,l.click(),window.URL.revokeObjectURL(r)},K=(()=>{switch(g){case"employees":return R;case"checks":return S;case"jobs":return T;case"salary":return E;case"timecards":return O;case"all-reports":return{employees:R,checks:S,jobs:T,salary:E,timecards:O};default:return[]}})(),W=Array.isArray(K)?Array.isArray(K)?K.filter(e=>{var t;if(w&&!["employee_name","employee_code","position","home_department","employment_status"].some(t=>{var a;return null==(a=e[t])?void 0:a.toString().toLowerCase().includes(w.toLowerCase())})||P.department&&e.home_department!==P.department||P.employeeStatus&&e.employment_status!==P.employeeStatus||P.location&&e.work_location!==P.location||P.jobTitle&&!(null==(t=e.position)?void 0:t.toLowerCase().includes(P.jobTitle.toLowerCase()))||P.payType&&e.pay_type!==P.payType||P.salaryRange.min&&e.pay_period_salary<parseFloat(P.salaryRange.min)||P.salaryRange.max&&e.pay_period_salary>parseFloat(P.salaryRange.max))return!1;if(P.dateRange.start||P.dateRange.end){let t=new Date(e.created_at||e.pay_date||e.work_date);if(P.dateRange.start&&t<new Date(P.dateRange.start)||P.dateRange.end&&t>new Date(P.dateRange.end))return!1}return!0}):[]:K,G=[{id:"employees",label:"Employees",icon:"\uD83D\uDC65"},{id:"checks",label:"Checks",icon:"\uD83D\uDCB0"},{id:"jobs",label:"Jobs",icon:"\uD83D\uDCBC"},{id:"salary",label:"Salary",icon:"\uD83D\uDCB5"},{id:"timecards",label:"Timecards",icon:"‚è∞"},{id:"all-reports",label:"All Reports",icon:"\uD83D\uDCCA"}];return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Comprehensive Reporting System"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Generate detailed reports and extract data across all categories"})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("div",{className:"border-b border-gray-200",children:(0,r.jsx)("nav",{className:"-mb-px flex space-x-8",children:G.map(e=>(0,r.jsxs)("button",{onClick:()=>b(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(g===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,r.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})})}),(0,r.jsx)(o.Zp,{className:"mb-6",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Data Extraction Filters"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,r.jsx)(c.p,{type:"text",placeholder:"Search records...",value:w,onChange:e=>_(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),(0,r.jsx)(c.p,{type:"date",value:P.dateRange.start,onChange:e=>U(t=>({...t,dateRange:{...t.dateRange,start:e.target.value}}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),(0,r.jsx)(c.p,{type:"date",value:P.dateRange.end,onChange:e=>U(t=>({...t,dateRange:{...t.dateRange,end:e.target.value}}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),(0,r.jsx)(c.p,{type:"text",placeholder:"Department",value:P.department,onChange:e=>U(t=>({...t,department:e.target.value}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee Status"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:P.employeeStatus,onChange:e=>U(t=>({...t,employeeStatus:e.target.value})),children:[(0,r.jsx)("option",{value:"",children:"All Statuses"}),(0,r.jsx)("option",{value:"Active",children:"Active"}),(0,r.jsx)("option",{value:"Terminated",children:"Terminated"}),(0,r.jsx)("option",{value:"On Leave",children:"On Leave"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,r.jsx)(c.p,{type:"text",placeholder:"Work Location",value:P.location,onChange:e=>U(t=>({...t,location:e.target.value}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Title"}),(0,r.jsx)(c.p,{type:"text",placeholder:"Position",value:P.jobTitle,onChange:e=>U(t=>({...t,jobTitle:e.target.value}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pay Type"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:P.payType,onChange:e=>U(t=>({...t,payType:e.target.value})),children:[(0,r.jsx)("option",{value:"",children:"All Types"}),(0,r.jsx)("option",{value:"salary",children:"Salary"}),(0,r.jsx)("option",{value:"hourly",children:"Hourly"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Salary"}),(0,r.jsx)(c.p,{type:"number",placeholder:"Minimum salary",value:P.salaryRange.min,onChange:e=>U(t=>({...t,salaryRange:{...t.salaryRange,min:e.target.value}}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Salary"}),(0,r.jsx)(c.p,{type:"number",placeholder:"Maximum salary",value:P.salaryRange.max,onChange:e=>U(t=>({...t,salaryRange:{...t.salaryRange,max:e.target.value}}))})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)(d.$,{onClick:()=>U({dateRange:{start:"",end:""},department:"",employeeStatus:"",location:"",jobTitle:"",payType:"",salaryRange:{min:"",max:""}}),variant:"outline",children:"Clear Filters"}),Array.isArray(W)&&W.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.$,{onClick:()=>I(W,"".concat(g,"_report.csv")),variant:"outline",children:"Export CSV"}),(0,r.jsx)(d.$,{onClick:()=>H(W,"".concat(g,"_report.json")),variant:"outline",children:"Export JSON"})]})]})]})}),j&&(0,r.jsx)(o.Zp,{className:"mb-6",children:(0,r.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("span",{className:"text-red-400",children:"‚ö†Ô∏è"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading Data"}),(0,r.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,r.jsx)("p",{children:j})})]})]})})}),f&&(0,r.jsx)(o.Zp,{className:"mb-6",children:(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Loading ",g," data..."]})]})}),!f&&!j&&(0,r.jsx)(o.Zp,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold",children:[null==(e=G.find(e=>e.id===g))?void 0:e.label," Report"]}),(0,r.jsxs)(m.E,{variant:"secondary",children:[Array.isArray(W)?W.length:"Multiple"," records"]})]}),Array.isArray(W)&&W.length>0?(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsx)("tr",{children:Object.keys(W[0]).map(e=>(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.replace(/_/g," ")},e))})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map((e,t)=>(0,r.jsx)("tr",{className:"hover:bg-gray-50",children:Object.values(e).map((e,t)=>(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(null==e?void 0:e.toString())||"-"},t))},t))})]})}):"all-reports"===g&&"object"==typeof W?(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-900",children:"Employees"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null==(t=W.employees)?void 0:t.length)||0})]}),(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-green-900",children:"Pay Statements"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-600",children:(null==(a=W.checks)?void 0:a.length)||0})]}),(0,r.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-purple-900",children:"Job Categories"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:(null==(u=W.jobs)?void 0:u.length)||0})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-yellow-900",children:"Salary Records"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:(null==(p=W.salary)?void 0:p.length)||0})]}),(0,r.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-red-900",children:"Timecards"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-600",children:(null==(x=W.timecards)?void 0:x.length)||0})]})]})}):(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No data available for the selected filters."})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,2354,2099,4660,8441,1684,7358],()=>t(6895)),_N_E=e.O()}]);