(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4685],{1421:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>E});var a=t(5155),l=t(2115),n=t(7020),r=t(7737),i=t(858),c=t(7703),d=t(3741),o=t(8156),m=t(6358),x=t(3465),u=t(5847),h=t(5639),p=t(403),g=t(3408),v=t(2550),j=t(1073),f=t(7159),b=t(7808),y=t(782),N=t(2099),_=t(477),w=t(4139),A=t(8839),C=t(9356),k=t(2539);function S(e){let{isOpen:s,onClose:t,onSuccess:n,tenants:r}=e,[i,o]=(0,l.useState)({email:"",full_name:"",phone:"",department:"",job_title:"",role:"user",role_level:"sub_client",tenant_id:"",password:"",can_invite_users:!1,can_manage_sub_clients:!1,permission_scope:"own"}),[x,u]=(0,l.useState)(!1),[h,p]=(0,l.useState)(""),v=(e,s)=>{if(o(t=>({...t,[e]:s})),"role_level"===e){let e="host"===s?"all":"primary_client"===s?"tenant":"own";o(s=>({...s,permission_scope:e}))}},j=async e=>{e.preventDefault(),u(!0),p("");try{if(!i.email||!i.full_name||!i.tenant_id||!i.password)return void p("Please fill in all required fields");let e={email:i.email,full_name:i.full_name,phone:i.phone||void 0,department:i.department||void 0,job_title:i.job_title||void 0,role:i.role,role_level:i.role_level,tenant_id:i.tenant_id,password:i.password,can_invite_users:i.can_invite_users,can_manage_sub_clients:i.can_manage_sub_clients,permission_scope:i.permission_scope},s=await N.Lr.createUser(e);s.success?(n(),t(),o({email:"",full_name:"",phone:"",department:"",job_title:"",role:"user",role_level:"sub_client",tenant_id:"",password:"",can_invite_users:!1,can_manage_sub_clients:!1,permission_scope:"own"})):p(s.error||"Failed to create user")}catch(e){p("An error occurred while creating the user"),console.error("User creation error:",e)}finally{u(!1)}};return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(c.Zp,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(_.A,{className:"h-5 w-5 mr-2"}),"Create New User"]}),(0,a.jsx)(c.BT,{children:"Add a new user to the system with appropriate role and permissions"})]}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:t,children:(0,a.jsx)(w.A,{className:"h-4 w-4"})})]})}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[h&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:h})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 inline mr-1"}),"Email Address *"]}),(0,a.jsx)("input",{type:"email",required:!0,value:i.email,onChange:e=>v("email",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"user@company.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(_.A,{className:"h-4 w-4 inline mr-1"}),"Full Name *"]}),(0,a.jsx)("input",{type:"text",required:!0,value:i.full_name,onChange:e=>v("full_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"John Doe"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(A.A,{className:"h-4 w-4 inline mr-1"}),"Phone Number"]}),(0,a.jsx)("input",{type:"tel",value:i.phone,onChange:e=>v("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+1 (555) 123-4567"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(C.A,{className:"h-4 w-4 inline mr-1"}),"Job Title"]}),(0,a.jsx)("input",{type:"text",value:i.job_title,onChange:e=>v("job_title",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Software Engineer"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 inline mr-1"}),"Department"]}),(0,a.jsx)("input",{type:"text",value:i.department,onChange:e=>v("department",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Engineering"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Role and Permissions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 inline mr-1"}),"Role Level *"]}),(0,a.jsxs)("select",{required:!0,value:i.role_level,onChange:e=>v("role_level",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"sub_client",children:"Sub Client"}),(0,a.jsx)("option",{value:"primary_client",children:"Primary Client"}),(0,a.jsx)("option",{value:"host",children:"Host Admin"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),(0,a.jsxs)("select",{required:!0,value:i.role,onChange:e=>v("role",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"viewer",children:"Viewer"}),(0,a.jsx)("option",{value:"user",children:"User"}),(0,a.jsx)("option",{value:"manager",children:"Manager"}),(0,a.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 inline mr-1"}),"Tenant *"]}),(0,a.jsxs)("select",{required:!0,value:i.tenant_id,onChange:e=>v("tenant_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Select Tenant"}),r.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.tenant_type,")"]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Permission Scope"}),(0,a.jsxs)("select",{value:i.permission_scope,onChange:e=>v("permission_scope",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"own",children:"Own Data Only"}),(0,a.jsx)("option",{value:"tenant",children:"Tenant Scope"}),(0,a.jsx)("option",{value:"all",children:"All Data"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"can_invite_users",checked:i.can_invite_users,onChange:e=>v("can_invite_users",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"can_invite_users",className:"ml-2 text-sm text-gray-700",children:"Can invite other users"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"can_manage_sub_clients",checked:i.can_manage_sub_clients,onChange:e=>v("can_manage_sub_clients",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"can_manage_sub_clients",className:"ml-2 text-sm text-gray-700",children:"Can manage sub-client users"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Authentication"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Temporary Password *"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",required:!0,value:i.password,onChange:e=>v("password",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter temporary password"}),(0,a.jsx)(d.$,{type:"button",onClick:()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*",s="";for(let t=0;t<12;t++)s+=e.charAt(Math.floor(Math.random()*e.length));o(e=>({...e,password:s}))},variant:"outline",children:"Generate"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"User will be required to change password on first login"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,a.jsx)(d.$,{type:"button",variant:"outline",onClick:t,disabled:x,children:"Cancel"}),(0,a.jsx)(d.$,{type:"submit",disabled:x,children:x?"Creating...":"Create User"})]})]})})]})}):null}var U=t(8681);function D(e){var s;let{isOpen:t,onClose:n,onSuccess:r,tenants:i}=e,[o,x]=(0,l.useState)({emails:"",role:"user",role_level:"sub_client",tenant_id:"",message:"",expires_in_days:7}),[u,h]=(0,l.useState)(!1),[v,j]=(0,l.useState)(""),[f,b]=(0,l.useState)(0),y=(e,s)=>{x(t=>({...t,[e]:s})),"emails"===e&&b(s.split(/[,\n]/).filter(e=>e.trim().length>0).length)},_=e=>{let s=e.split(/[,\n]/).map(e=>e.trim()).filter(e=>e.length>0),t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,a=[],l=[];if(s.forEach(e=>{t.test(e)?a.push(e):l.push(e)}),l.length>0)throw Error("Invalid email addresses: ".concat(l.join(", ")));return a},A=async e=>{e.preventDefault(),h(!0),j("");try{let e=_(o.emails);if(0===e.length)throw Error("Please enter at least one valid email address");if(!o.tenant_id)throw Error("Please select a tenant");let s={emails:e,role:o.role,role_level:o.role_level,tenant_id:o.tenant_id,message:o.message||void 0,expires_in_days:o.expires_in_days},t=await N.Lr.inviteUsers(s);t.success?(r(),n(),x({emails:"",role:"user",role_level:"sub_client",tenant_id:"",message:"",expires_in_days:7}),b(0)):j(t.error||"Failed to send invitations")}catch(e){j(e instanceof Error?e.message:"An error occurred while sending invitations"),console.error("Invitation error:",e)}finally{h(!1)}};return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(c.Zp,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"Invite Users"]}),(0,a.jsx)(c.BT,{children:"Send email invitations to new users to join the platform"})]}),(0,a.jsx)(d.$,{variant:"outline",size:"sm",onClick:n,children:(0,a.jsx)(w.A,{className:"h-4 w-4"})})]})}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("form",{onSubmit:A,className:"space-y-6",children:[v&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:v})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Recipients"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 inline mr-1"}),"Email Addresses *"]}),(0,a.jsx)("textarea",{required:!0,rows:4,value:o.emails,onChange:e=>y("emails",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email addresses separated by commas or new lines: user1@company.com user2@company.com, user3@company.com"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:f>0?"".concat(f," email").concat(f>1?"s":""," to be invited"):"Separate multiple emails with commas or new lines"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Role Assignment"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 inline mr-1"}),"Role Level *"]}),(0,a.jsxs)("select",{required:!0,value:o.role_level,onChange:e=>y("role_level",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"sub_client",children:"Sub Client"}),(0,a.jsx)("option",{value:"primary_client",children:"Primary Client"}),(0,a.jsx)("option",{value:"host",children:"Host Admin"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),(0,a.jsxs)("select",{required:!0,value:o.role,onChange:e=>y("role",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"viewer",children:"Viewer"}),(0,a.jsx)("option",{value:"user",children:"User"}),(0,a.jsx)("option",{value:"manager",children:"Manager"}),(0,a.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 inline mr-1"}),"Tenant *"]}),(0,a.jsxs)("select",{required:!0,value:o.tenant_id,onChange:e=>y("tenant_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Select Tenant"}),i.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.tenant_type,")"]},e.id))]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Invitation Settings"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expires In (Days)"}),(0,a.jsxs)("select",{value:o.expires_in_days,onChange:e=>y("expires_in_days",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:1,children:"1 Day"}),(0,a.jsx)("option",{value:3,children:"3 Days"}),(0,a.jsx)("option",{value:7,children:"7 Days"}),(0,a.jsx)("option",{value:14,children:"14 Days"}),(0,a.jsx)("option",{value:30,children:"30 Days"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Message"}),(0,a.jsx)("textarea",{rows:3,value:o.message,onChange:e=>y("message",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:(()=>{let e=i.find(e=>e.id===o.tenant_id);return"You have been invited to join ".concat((null==e?void 0:e.name)||"our organization"," on the ETLA Platform. Please click the link below to accept your invitation and set up your account.")})()}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to use the default invitation message"})]})]}),f>0&&o.tenant_id&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:[(0,a.jsx)(p.A,{className:"h-4 w-4 inline mr-1"}),"Invitation Preview"]}),(0,a.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:f})," user",f>1?"s":""," will be invited as ",(0,a.jsx)("strong",{children:o.role})," (",o.role_level,") to ",(0,a.jsx)("strong",{children:null==(s=i.find(e=>e.id===o.tenant_id))?void 0:s.name})]}),(0,a.jsxs)("p",{className:"mt-1",children:["Invitations will expire in ",(0,a.jsxs)("strong",{children:[o.expires_in_days," day",o.expires_in_days>1?"s":""]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,a.jsx)(d.$,{type:"button",variant:"outline",onClick:n,disabled:u,children:"Cancel"}),(0,a.jsxs)(d.$,{type:"submit",disabled:u||0===f,children:[(0,a.jsx)(U.A,{className:"h-4 w-4 mr-2"}),u?"Sending...":"Send ".concat(f," Invitation").concat(f>1?"s":"")]})]})]})})]})}):null}function E(){let{user:e,isAuthenticated:s,isDemoMode:t,tenantUser:_}=(0,n.h)(),{selectedTenant:w}=(0,r.K)(),[A,C]=(0,l.useState)([]),[k,U]=(0,l.useState)([]),[E,P]=(0,l.useState)([]),[R,q]=(0,l.useState)([]),[I,T]=(0,l.useState)(!0),[$,L]=(0,l.useState)(null),[Z,z]=(0,l.useState)(""),[B,O]=(0,l.useState)("all"),[F,W]=(0,l.useState)("all"),[M,H]=(0,l.useState)(!1),[J,K]=(0,l.useState)(!1),[V,Y]=(0,l.useState)(!1),[G,Q]=(0,l.useState)(!1),[X,ee]=(0,l.useState)(null),[es,et]=(0,l.useState)("overview"),ea=(null==_?void 0:_.role)||(null==e?void 0:e.role),el="host_admin"===ea,en="client_admin"===ea,er=(null==e?void 0:e.email)==="demo@company.com"||t,ei=el||en||er;console.log("\uD83D\uDD0D Access Control Permission Debug:",{user:null==e?void 0:e.email,userRole:ea,tenantUserRole:null==_?void 0:_.role,isAuthenticated:s,isDemoMode:t,canManageUsers:ei,isHostAdmin:el,isClientAdmin:en,isDemoUser:er}),(0,l.useEffect)(()=>{(s||t)&&ei?(console.log("✅ Loading Access Control data"),ec()):console.log("❌ Access denied - not loading data")},[s,t,ei,w]);let ec=async()=>{T(!0),L(null);try{await Promise.all([ed(),eo(),em(),ex()])}catch(e){console.error("Error loading data:",e),L("Failed to load data. Please try again.")}finally{T(!1)}},ed=async()=>{try{let s=N.ND.from("profiles").select("\n          *,\n          tenant_users!inner(\n            role,\n            role_level,\n            is_active,\n            tenant_id,\n            is_primary_tenant,\n            requires_password_change,\n            permission_scope,\n            can_invite_users,\n            can_manage_sub_clients,\n            tenants(name, code)\n          )\n        ").order("created_at",{ascending:!1});console.log("\uD83D\uDD0D Access Control Debug:",{isHostAdmin:el,selectedTenant:null==w?void 0:w.name,userRole:null==e?void 0:e.role,userEmail:null==e?void 0:e.email,willFilter:!el&&w}),!el&&w?(console.log("\uD83D\uDEAB Applying tenant filter for tenant:",w.name),s=s.eq("tenant_users.tenant_id",w.id)):console.log("✅ No tenant filtering - showing all users");let{data:t,error:a}=await s;if(console.log("\uD83D\uDCCA Query Results:",{userCount:(null==t?void 0:t.length)||0,users:(null==t?void 0:t.map(e=>{var s,t;return{email:e.email,role:null==(t=e.tenant_users)||null==(s=t[0])?void 0:s.role}}))||[]}),a)throw console.error("Error loading users:",a),a;let l=(null==t?void 0:t.map(e=>{var s;let t=e.tenant_users[0]||{},a=t.tenants||{};return{id:e.id,email:e.email||"N/A",full_name:e.full_name||"Unknown",phone:e.phone,department:e.department,job_title:e.job_title,role:t.role||"user",role_level:t.role_level,tenant_id:t.tenant_id,tenant_name:a.name||"No Tenant",is_active:null==(s=t.is_active)||s,status:e.status||"active",created_at:e.created_at,last_sign_in_at:e.last_sign_in_at,can_invite_users:t.can_invite_users||!1,can_manage_sub_clients:t.can_manage_sub_clients||!1,permission_scope:t.permission_scope||"own",requires_password_change:t.requires_password_change||!1,is_primary_tenant:t.is_primary_tenant||!1}}))||[];C(l)}catch(e){throw console.error("Error loading users:",e),e}},eo=async()=>{try{let{data:e,error:s}=await N.ND.from("tenants").select("*").eq("is_active",!0).order("name");if(s)throw s;U(e||[])}catch(e){throw console.error("Error loading tenants:",e),e}},em=async()=>{try{let e=N.ND.from("user_invitations").select("\n          *,\n          tenants(name),\n          invited_by_profile:profiles!user_invitations_invited_by_fkey(full_name)\n        ").order("created_at",{ascending:!1});!el&&w&&(e=e.eq("tenant_id",w.id));let{data:s,error:t}=await e;if(t)throw t;let a=(null==s?void 0:s.map(e=>{var s,t;return{id:e.id,email:e.email,full_name:e.full_name,tenant_name:(null==(s=e.tenants)?void 0:s.name)||"Unknown Tenant",role:e.role,status:e.status,created_at:e.created_at,expires_at:e.expires_at,invited_by_name:(null==(t=e.invited_by_profile)?void 0:t.full_name)||"Unknown"}}))||[];P(a)}catch(e){throw console.error("Error loading invitations:",e),e}},ex=async()=>{try{let{data:s,error:t}=await N.ND.from("admin_notifications").select("*").eq("admin_id",null==e?void 0:e.id).order("created_at",{ascending:!1}).limit(50);if(t)throw t;q(s||[])}catch(e){throw console.error("Error loading notifications:",e),e}},eu=A.filter(e=>{let s=e.full_name.toLowerCase().includes(Z.toLowerCase())||e.email.toLowerCase().includes(Z.toLowerCase()),t="all"===B||e.role===B,a="all"===F||e.status===F;return s&&t&&a}),eh={totalUsers:A.length,activeUsers:A.filter(e=>e.is_active&&"active"===e.status).length,pendingUsers:A.filter(e=>"pending_assignment"===e.status).length,pendingInvites:E.filter(e=>"pending"===e.status).length,unreadNotifications:R.filter(e=>!e.is_read).length},ep=A.reduce((e,s)=>(e[s.role]=(e[s.role]||0)+1,e),{});return(console.log("\uD83D\uDD0D Final Access Check:",{canManageUsers:ei,isHostAdmin:el,isClientAdmin:en,isDemoUser:er,userEmail:null==e?void 0:e.email,userRole:ea,tenantUserRole:null==_?void 0:_.role,isAuthenticated:s,isDemoMode:t}),ei)?(console.log("✅ Access granted - rendering Access Control page"),(0,a.jsxs)(i.A,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Access Control & Security"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Comprehensive user management, RBAC, and security controls"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)(d.$,{onClick:()=>K(!0),variant:"outline",className:"flex items-center space-x-2",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Invite User"})]}),(0,a.jsxs)(d.$,{onClick:()=>H(!0),className:"flex items-center space-x-2",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Create User"})]})]})]}),$&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(o.A,{className:"h-5 w-5 text-red-400"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,a.jsx)("p",{className:"text-sm text-red-700 mt-1",children:$}),(0,a.jsxs)(d.$,{onClick:ec,variant:"outline",size:"sm",className:"mt-2",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Retry"]})]})]})}),(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",label:"Overview",icon:h.A},{id:"users",label:"Users",icon:p.A},{id:"roles",label:"Roles & Permissions",icon:g.A},{id:"invites",label:"Invitations",icon:m.A},{id:"notifications",label:"Notifications",icon:o.A}].map(e=>(0,a.jsxs)("button",{onClick:()=>et(e.id),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ".concat(es===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)(e.icon,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:e.label}),"notifications"===e.id&&eh.unreadNotifications>0&&(0,a.jsx)("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1",children:eh.unreadNotifications})]},e.id))})}),"overview"===es&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(p.A,{className:"h-8 w-8 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:eh.totalUsers})]})]})})}),(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(v.A,{className:"h-8 w-8 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:eh.activeUsers})]})]})})}),(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(j.A,{className:"h-8 w-8 text-yellow-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Pending Assignment"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:eh.pendingUsers})]})]})})}),(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(m.A,{className:"h-8 w-8 text-purple-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Pending Invites"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:eh.pendingInvites})]})]})})}),(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(o.A,{className:"h-8 w-8 text-red-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Notifications"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:eh.unreadNotifications})]})]})})})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Role Distribution"}),(0,a.jsx)(c.BT,{children:"Current user distribution across roles and levels"})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(ep).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-medium capitalize",children:s.replace("_"," ")})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[t," users"]}),(0,a.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(t/eh.totalUsers*100,"%")}})})]})]},s)})})})]})]}),"users"===es&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search users...",value:Z,onChange:e=>z(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})}),(0,a.jsxs)("select",{value:B,onChange:e=>O(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Roles"}),(0,a.jsx)("option",{value:"host_admin",children:"Host Admin"}),(0,a.jsx)("option",{value:"client_admin",children:"Client Admin"}),(0,a.jsx)("option",{value:"user",children:"User"})]}),(0,a.jsxs)("select",{value:F,onChange:e=>W(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"pending_assignment",children:"Pending Assignment"}),(0,a.jsx)("option",{value:"suspended",children:"Suspended"})]}),(0,a.jsx)(d.$,{onClick:ec,variant:"outline",disabled:I,children:(0,a.jsx)(u.A,{className:"h-4 w-4 ".concat(I?"animate-spin":"")})})]}),(0,a.jsx)(c.Zp,{children:(0,a.jsx)(c.Wu,{className:"p-0",children:I?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(u.A,{className:"h-8 w-8 animate-spin text-gray-400"})}):0===eu.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(p.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Users Found"}),(0,a.jsx)("p",{className:"text-gray-500",children:0===A.length?"No users have been created yet.":"No users match your search criteria."}),0===A.length&&(0,a.jsxs)(d.$,{onClick:()=>H(!0),className:"mt-4",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Create First User"]})]})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role & Tenant"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:eu.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.full_name.charAt(0).toUpperCase()})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.full_name,e.is_primary_tenant&&(0,a.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Primary"})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),e.job_title&&(0,a.jsx)("div",{className:"text-xs text-gray-400",children:e.job_title})]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900 capitalize",children:e.role.replace("_"," ")}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.tenant_name}),e.role_level&&(0,a.jsx)("div",{className:"text-xs text-gray-400 capitalize",children:e.role_level.replace("_"," ")})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_active&&"active"===e.status?"bg-green-100 text-green-800":"pending_assignment"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.is_active&&"active"===e.status?"Active":"pending_assignment"===e.status?"Pending":"Inactive"}),e.requires_password_change&&(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"Password Reset Required"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.last_sign_in_at?new Date(e.last_sign_in_at).toLocaleDateString():"Never"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.$,{onClick:()=>{ee(e),Y(!0)},variant:"outline",size:"sm",children:(0,a.jsx)(b.A,{className:"h-4 w-4"})}),(0,a.jsx)(d.$,{onClick:()=>{ee(e),Q(!0)},variant:"outline",size:"sm",children:(0,a.jsx)(y.A,{className:"h-4 w-4"})})]})})]},e.id))})]})})})})]}),"invites"===es&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Pending Invitations"}),(0,a.jsx)(c.BT,{children:"Manage user invitations and track their status"})]}),(0,a.jsx)(c.Wu,{children:0===E.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(m.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Invitations"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No user invitations have been sent yet."})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invitee"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role & Tenant"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invited By"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.full_name||"N/A"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900 capitalize",children:e.role.replace("_"," ")}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.tenant_name})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"accepted"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.invited_by_name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.expires_at).toLocaleDateString()})]},e.id))})]})})})]})})]}),M&&(0,a.jsx)(S,{isOpen:M,onClose:()=>H(!1),onSuccess:()=>{ec(),H(!1)},tenants:k}),J&&(0,a.jsx)(D,{isOpen:J,onClose:()=>K(!1),onSuccess:()=>{ec(),K(!1)},tenants:k})]})):(console.log("❌ Access denied - canManageUsers is false"),(0,a.jsx)(i.A,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-500",children:"You don't have permission to access user management."})]})})}))}},3741:(e,s,t)=>{"use strict";t.d(s,{$:()=>r});var a=t(5155),l=t(2115),n=t(9434);let r=l.forwardRef((e,s)=>{let{className:t,variant:l="default",size:r="default",...i}=e;return(0,a.jsx)("button",{className:(0,n.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white hover:bg-blue-700":"default"===l,"bg-red-600 text-white hover:bg-red-700":"destructive"===l,"border border-gray-300 bg-white hover:bg-gray-50":"outline"===l,"bg-gray-100 text-gray-900 hover:bg-gray-200":"secondary"===l,"hover:bg-gray-100":"ghost"===l,"text-blue-600 underline-offset-4 hover:underline":"link"===l},{"h-10 px-4 py-2":"default"===r,"h-9 rounded-md px-3":"sm"===r,"h-11 rounded-md px-8":"lg"===r,"h-10 w-10":"icon"===r},t),ref:s,...i})});r.displayName="Button"},7737:(e,s,t)=>{"use strict";t.d(s,{K:()=>d,TenantProvider:()=>c});var a=t(5155),l=t(2115),n=t(2099),r=t(7020);let i=(0,l.createContext)(void 0);function c(e){let{children:s}=e,{user:t,tenantUser:c,isAuthenticated:d,isDemoMode:o}=(0,r.h)(),[m,x]=(0,l.useState)(null),[u,h]=(0,l.useState)([]),[p,g]=(0,l.useState)(!0),v={id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",name:"Demo Company",domain:"demo.company.com",status:"active",subscription_plan:"professional",subscription_start_date:new Date().toISOString(),max_users:25,current_users:5,settings:{},tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},j=async()=>{if(o){h([v]),x(v),g(!1);return}if(!d||!t){h([]),x(null),g(!1);return}try{if((null==c?void 0:c.role)==="host_admin"){let{data:e,error:s}=await n.ND.from("tenants").select("*").order("name");if(s)throw s;h(e||[]);let t=(null==e?void 0:e[0])||null;x(t)}else{let{data:e,error:s}=await n.ND.from("tenant_users").select("tenant_id").eq("user_id",t.id).eq("is_active",!0);if(s)throw s;if(e&&e.length>0){let s=e.map(e=>e.tenant_id),{data:t,error:a}=await n.ND.from("tenants").select("*").in("id",s).order("name");if(a)throw a;h(t||[]);let l=(null==t?void 0:t.find(e=>e.id===(null==c?void 0:c.tenant_id)))||(null==t?void 0:t[0])||null;x(l)}else h([]),x(null)}}catch(e){console.error("Error loading tenants:",e),h([]),x(null)}finally{g(!1)}};return(0,l.useEffect)(()=>{j()},[d,t,c,o]),(0,a.jsx)(i.Provider,{value:{selectedTenant:m,setSelectedTenant:x,availableTenants:u,isLoading:p,loadAvailableTenants:j,canSelectTenant:()=>!o&&((null==c?void 0:c.role)==="host_admin"||(null==c?void 0:c.role)==="program_manager"),isDemoMode:o},children:s})}function d(){let e=(0,l.useContext)(i);if(void 0===e)throw Error("useTenant must be used within a TenantProvider");return e}},8877:(e,s,t)=>{Promise.resolve().then(t.bind(t,1421))}},e=>{var s=s=>e(e.s=s);e.O(0,[7590,2354,3801,2099,4660,4619,8441,1684,7358],()=>s(8877)),_N_E=e.O()}]);