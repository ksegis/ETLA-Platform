"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2099],{2099:(e,t,a)=>{a.d(t,{Lr:()=>b,ND:()=>w});var r=a(2354);let n="https://your-project.supabase.co",s=!n||n.includes("placeholder")||n.includes("your-project")||!0,i=[{id:"b224935f-732f-4b09-a4a0-16492c5ae563",email:"demo@company.com",full_name:"Demo Host Admin",phone:"+1-555-0101",department:"IT Administration",job_title:"System Administrator",status:"active",created_at:"2024-01-01T00:00:00Z",last_sign_in_at:"2024-12-01T10:00:00Z",tenant_users:[{role:"host_admin",role_level:"senior",is_active:!0,tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",is_primary_tenant:!0,requires_password_change:!1,permission_scope:"all",can_invite_users:!0,can_manage_sub_clients:!0,tenants:{name:"Demo Company",code:"DEMO"}}]},{id:"user2-id",email:"client.admin@company.com",full_name:"Client Admin User",phone:"+1-555-0102",department:"Operations",job_title:"Operations Manager",status:"active",created_at:"2024-01-02T00:00:00Z",last_sign_in_at:"2024-11-30T15:30:00Z",tenant_users:[{role:"client_admin",role_level:"standard",is_active:!0,tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",is_primary_tenant:!0,requires_password_change:!1,permission_scope:"tenant",can_invite_users:!0,can_manage_sub_clients:!1,tenants:{name:"Demo Company",code:"DEMO"}}]},{id:"user3-id",email:"user@company.com",full_name:"Regular User",phone:"+1-555-0103",department:"Finance",job_title:"Financial Analyst",status:"active",created_at:"2024-01-03T00:00:00Z",last_sign_in_at:"2024-11-29T09:15:00Z",tenant_users:[{role:"user",role_level:"standard",is_active:!0,tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",is_primary_tenant:!0,requires_password_change:!1,permission_scope:"own",can_invite_users:!1,can_manage_sub_clients:!1,tenants:{name:"Demo Company",code:"DEMO"}}]},{id:"user4-id",email:"manager@company.com",full_name:"Project Manager",phone:"+1-555-0104",department:"Project Management",job_title:"Senior Project Manager",status:"active",created_at:"2024-01-04T00:00:00Z",last_sign_in_at:"2024-12-01T08:45:00Z",tenant_users:[{role:"project_manager",role_level:"senior",is_active:!0,tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",is_primary_tenant:!0,requires_password_change:!1,permission_scope:"department",can_invite_users:!0,can_manage_sub_clients:!1,tenants:{name:"Demo Company",code:"DEMO"}}]},{id:"user5-id",email:"analyst@company.com",full_name:"Data Analyst",phone:"+1-555-0105",department:"Analytics",job_title:"Senior Data Analyst",status:"active",created_at:"2024-01-05T00:00:00Z",last_sign_in_at:"2024-11-28T14:20:00Z",tenant_users:[{role:"analyst",role_level:"senior",is_active:!0,tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",is_primary_tenant:!0,requires_password_change:!1,permission_scope:"department",can_invite_users:!1,can_manage_sub_clients:!1,tenants:{name:"Demo Company",code:"DEMO"}}]}],o=[{id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",name:"Demo Company",code:"DEMO",status:"active",tenant_type:"enterprise",is_active:!0,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"}],c=[{id:"invite1-id",email:"newuser@company.com",full_name:"New User",role:"user",status:"pending",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",created_at:"2024-11-25T00:00:00Z",expires_at:"2024-12-25T00:00:00Z",invited_by:"b224935f-732f-4b09-a4a0-16492c5ae563",tenants:{name:"Demo Company"},invited_by_profile:{full_name:"Demo Host Admin"}}],_=[{id:"notif1-id",type:"user_invitation",title:"New User Invitation",message:"A new user invitation has been sent to newuser@company.com",user_id:"b224935f-732f-4b09-a4a0-16492c5ae563",is_read:!1,created_at:"2024-11-25T00:00:00Z",data:{email:"newuser@company.com"}}],d=[{id:"emp1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",first_name:"John",last_name:"Smith",email:"john.smith@company.com",employment_status:"active",home_department:"Engineering",flsa_status:"exempt",union_status:"non_union",eeo_categories:"Professional",job_title:"Senior Software Engineer",created_at:"2024-01-01T00:00:00Z"},{id:"emp2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",first_name:"Sarah",last_name:"Johnson",email:"sarah.johnson@company.com",employment_status:"active",home_department:"Marketing",flsa_status:"non-exempt",union_status:"non_union",eeo_categories:"Professional",job_title:"Marketing Manager",created_at:"2024-01-15T00:00:00Z"},{id:"emp3",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",first_name:"Mike",last_name:"Davis",email:"mike.davis@company.com",employment_status:"active",home_department:"Sales",flsa_status:"exempt",union_status:"non_union",eeo_categories:"Sales",job_title:"Sales Director",created_at:"2024-02-01T00:00:00Z"}],l=[{id:"pay1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",user_id:"emp1",pay_date:"2024-11-30",gross_pay:8500,net_pay:6200,federal_tax_withheld:1200,state_tax_withheld:400,department:"Engineering",regular_hours:80,overtime_hours:5},{id:"pay2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",user_id:"emp2",pay_date:"2024-11-30",gross_pay:6500,net_pay:4800,federal_tax_withheld:900,state_tax_withheld:300,department:"Marketing",regular_hours:80,overtime_hours:2},{id:"pay3",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",user_id:"emp3",pay_date:"2024-11-30",gross_pay:9500,net_pay:6900,federal_tax_withheld:1400,state_tax_withheld:500,department:"Sales",regular_hours:80,overtime_hours:8}],u=[{id:"time1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",user_id:"emp1",total_hours:85,regular_hours:80,overtime_hours:5,holiday_hours:0,approval_status:"approved",department:"Engineering",week_ending:"2024-11-30"},{id:"time2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",user_id:"emp2",total_hours:82,regular_hours:80,overtime_hours:2,holiday_hours:0,approval_status:"approved",department:"Marketing",week_ending:"2024-11-30"},{id:"time3",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",user_id:"emp3",total_hours:88,regular_hours:80,overtime_hours:8,holiday_hours:0,approval_status:"pending",department:"Sales",week_ending:"2024-11-30"}],m=[{id:"job1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",title:"Senior Software Engineer",department:"Engineering",flsa_classification:"exempt",pay_range_min:12e4,pay_range_max:16e4,employee_count:5},{id:"job2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",title:"Marketing Manager",department:"Marketing",flsa_classification:"non-exempt",pay_range_min:7e4,pay_range_max:9e4,employee_count:3},{id:"job3",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",title:"Sales Director",department:"Sales",flsa_classification:"exempt",pay_range_min:1e5,pay_range_max:14e4,employee_count:2}],p=[{id:"tax1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",form_type:"W-2",tax_year:"2024",status:"completed",total_wages:85e3,total_taxes_withheld:15300},{id:"tax2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",form_type:"1099",tax_year:"2024",status:"pending",total_wages:25e3,total_taxes_withheld:3750}],f=[{id:"ben1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",deduction_type:"Health Insurance",employee_contribution:150,employer_contribution:400,frequency:"monthly",is_garnishment:!1},{id:"ben2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",deduction_type:"401k",employee_contribution:500,employer_contribution:250,frequency:"monthly",is_garnishment:!1}],g=[{id:"comp1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",compliance_type:"OSHA",status:"current",due_date:"2024-12-31",is_overdue:!1},{id:"comp2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",compliance_type:"EEO-1",status:"pending",due_date:"2024-12-15",is_overdue:!1}],h=[{id:"wr1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",title:"Website Redesign Project",description:"Complete redesign of company website with modern UI/UX",category:"Web Development",priority:"high",urgency:"medium",status:"in_progress",customer_id:"cust1",assigned_to:"emp1",estimated_hours:120,actual_hours:45,budget:15e3,created_at:"2024-11-01T00:00:00Z"},{id:"wr2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",title:"Marketing Campaign Analysis",description:"Analyze Q4 marketing campaign performance and ROI",category:"Marketing",priority:"medium",urgency:"low",status:"completed",customer_id:"cust2",assigned_to:"emp2",estimated_hours:40,actual_hours:38,budget:5e3,created_at:"2024-10-15T00:00:00Z"}],y=[{id:"proj1",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",work_request_id:"wr1",title:"Website Redesign Implementation",description:"Implementation phase of the website redesign project",status:"in_progress",priority:"high",assigned_team_lead:"emp1",estimated_hours:120,actual_hours:45,budget:15e3,start_date:"2024-11-01",end_date:"2024-12-31",completion_percentage:40,created_at:"2024-11-01T00:00:00Z"},{id:"proj2",tenant_id:"99883779-9517-4ca9-a3f8-7fdc59051f0e",work_request_id:"wr2",title:"Q4 Marketing Analysis",description:"Complete analysis of Q4 marketing campaigns",status:"completed",priority:"medium",assigned_team_lead:"emp2",estimated_hours:40,actual_hours:38,budget:5e3,start_date:"2024-10-15",end_date:"2024-11-15",completion_percentage:100,created_at:"2024-10-15T00:00:00Z"}],v=e=>{switch(e){case"profiles":return i;case"tenants":return o;case"user_invitations":return c;case"admin_notifications":return _;case"employee_comprehensive_report":return d;case"pay_statements_comprehensive_report":return l;case"timecards_comprehensive_report":return u;case"jobs_comprehensive_report":return m;case"tax_records_comprehensive_report":return p;case"benefits_deductions_comprehensive_report":return f;case"compliance_records_comprehensive_report":return g;case"work_requests":return h;case"projects":return y;default:return[]}},w=s?{from:e=>({select:t=>({eq:(t,a)=>({order:(t,a)=>({limit:t=>Promise.resolve({data:v(e),error:null}),then:t=>t({data:v(e),error:null})}),then:t=>t({data:v(e),error:null})}),order:(t,a)=>({then:t=>t({data:v(e),error:null})}),then:t=>t({data:v(e),error:null})}),insert:e=>Promise.resolve({data:e,error:null}),update:e=>({eq:(t,a)=>Promise.resolve({data:e,error:null})}),delete:()=>({eq:(e,t)=>Promise.resolve({data:null,error:null})})}),auth:{getSession:()=>Promise.resolve({data:{session:null},error:null}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})}}:(0,r.UU)(n,"your_anon_token_here"),b={createUser:async e=>{try{let{data:t,error:a}=await w.auth.admin.createUser({email:e.email,password:e.password,email_confirm:!0,user_metadata:{full_name:e.full_name,role:e.role,role_level:e.role_level}});if(a)return{success:!1,error:a.message};if(!t.user)return{success:!1,error:"Failed to create user account"};let{error:r}=await w.from("profiles").insert({id:t.user.id,email:e.email,full_name:e.full_name,phone:e.phone,department:e.department,job_title:e.job_title,role:e.role,role_level:e.role_level,tenant_id:e.tenant_id,is_active:!0,can_invite_users:e.can_invite_users,can_manage_sub_clients:e.can_manage_sub_clients,permission_scope:e.permission_scope,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(r)return await w.auth.admin.deleteUser(t.user.id),{success:!1,error:"Profile creation failed: ".concat(r.message)};let{error:n}=await w.from("tenant_users").insert({tenant_id:e.tenant_id,user_id:t.user.id,role:e.role,role_level:e.role_level,can_invite_users:e.can_invite_users,can_manage_sub_clients:e.can_manage_sub_clients,permission_scope:e.permission_scope,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(n)return await w.auth.admin.deleteUser(t.user.id),await w.from("profiles").delete().eq("id",t.user.id),{success:!1,error:"Tenant assignment failed: ".concat(n.message)};return{success:!0,data:t.user}}catch(e){return{success:!1,error:e.message||"Failed to create user"}}},inviteUsers:async e=>{try{let t=[];for(let a of e.emails){let{data:r,error:n}=await w.from("user_invitations").insert({email:a,role:e.role,role_level:e.role_level,tenant_id:e.tenant_id,message:e.message,expires_at:new Date(Date.now()+24*e.expires_in_days*36e5).toISOString(),created_at:new Date().toISOString()}).select().single();if(n){console.error("Failed to create invitation for ".concat(a,":"),n);continue}let{error:s}=await w.auth.admin.inviteUserByEmail(a,{redirectTo:"".concat(window.location.origin,"/accept-invitation?token=").concat(r.id),data:{role:e.role,role_level:e.role_level,tenant_id:e.tenant_id,invitation_id:r.id}});s?(console.error("Failed to send invitation email to ".concat(a,":"),s),await w.from("user_invitations").update({status:"failed"}).eq("id",r.id)):t.push(r)}return{success:!0,data:{sent:t.length,total:e.emails.length}}}catch(e){return{success:!1,error:e.message||"Failed to send invitations"}}},updateUser:async(e,t)=>{try{let{error:a}=await w.from("profiles").update({...t,updated_at:new Date().toISOString()}).eq("id",e);if(a)return{success:!1,error:a.message};return{success:!0}}catch(e){return{success:!1,error:e.message||"Failed to update user"}}},deactivateUser:async e=>{try{let{error:t}=await w.from("profiles").update({is_active:!1,updated_at:new Date().toISOString()}).eq("id",e);if(t)return{success:!1,error:t.message};return{success:!0}}catch(e){return{success:!1,error:e.message||"Failed to deactivate user"}}},activateUser:async e=>{try{let{error:t}=await w.from("profiles").update({is_active:!0,updated_at:new Date().toISOString()}).eq("id",e);if(t)return{success:!1,error:t.message};return{success:!0}}catch(e){return{success:!1,error:e.message||"Failed to activate user"}}},resetUserPassword:async(e,t)=>{try{if(t){let{error:a}=await w.auth.admin.updateUserById(e,{password:t});if(a)return{success:!1,error:a.message};return{success:!0}}{let{error:t}=await w.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/reset-password")});if(t)return{success:!1,error:t.message};return{success:!0}}}catch(e){return{success:!1,error:e.message||"Failed to reset password"}}},previewUserCleanup:async e=>{try{let t=0,a=0,r=0;if(e.deleteInactiveUsers){let a=new Date(Date.now()-24*e.inactiveDays*36e5).toISOString(),{count:r}=await w.from("profiles").select("*",{count:"exact",head:!0}).lt("last_login",a).eq("is_active",!0);t=r||0}if(e.deleteUnconfirmedUsers){let t=new Date(Date.now()-24*e.unconfirmedDays*36e5).toISOString(),{count:r}=await w.from("auth.users").select("*",{count:"exact",head:!0}).is("email_confirmed_at",null).lt("created_at",t);a=r||0}if(e.deleteExpiredInvites){let{count:e}=await w.from("user_invitations").select("*",{count:"exact",head:!0}).lt("expires_at",new Date().toISOString()).neq("status","accepted");r=e||0}let n=t+a+r;return{success:!0,data:{inactiveUsers:t,unconfirmedUsers:a,expiredInvites:r,totalToDelete:n}}}catch(e){return{success:!1,error:e.message||"Failed to preview cleanup"}}},executeUserCleanup:async e=>{try{let t=0;if(e.deleteInactiveUsers){let a=new Date(Date.now()-24*e.inactiveDays*36e5).toISOString(),{data:r}=await w.from("profiles").select("id").lt("last_login",a).eq("is_active",!0);if(r&&r.length>0){for(let e of r)await w.auth.admin.deleteUser(e.id);t+=r.length}}if(e.deleteUnconfirmedUsers&&(new Date(Date.now()-24*e.unconfirmedDays*36e5).toISOString(),console.log("Unconfirmed users cleanup would be executed here")),e.deleteExpiredInvites){let{error:e}=await w.from("user_invitations").delete().lt("expires_at",new Date().toISOString()).neq("status","accepted");e&&console.error("Failed to delete expired invites:",e)}return{success:!0,data:{deletedCount:t}}}catch(e){return{success:!1,error:e.message||"Failed to execute cleanup"}}}}}}]);